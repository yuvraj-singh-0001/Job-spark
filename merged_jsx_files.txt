=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\eslint.config.js ===
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs['recommended-latest'],
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\postcss.config.js ===
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\App.jsx ===
import { RouterProvider } from "react-router-dom";
import router from "./routes/router.jsx";

export default function App() {
  return <RouterProvider router={router} />;
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\apiconfig\apiconfig.jsx ===
import axios from "axios";

/**
 * Axios Instance
 * --------------
 * Purpose:
 *   - Centralize API configuration.
 *   - Automatically include credentials (cookies) for authentication.
 *   - Use baseURL so all requests start from /api without repeating the address.
 *
 * baseURL:
 *   - Uses Vite environment variable VITE_API_BASE.
 *   - Falls back to localhost backend for development.
 *
 * withCredentials:
 *   - Ensures JWT HttpOnly cookies are sent automatically with every request.
 *   - Required for protected routes and auth middleware.
 */
const api = axios.create({
  baseURL: import.meta.env.VITE_API_BASE || "http://localhost:5000/api",
  withCredentials: true, // allow sending cookies
});

/**
 * Axios Response Interceptor
 * ---------------------------
 * Purpose:
 *   - Catch errors globally (e.g., 401 Unauthorized).
 *   - You can auto-logout or redirect based on server responses.
 *
 * Current behavior:
 *   - Simply rethrows the error (but gives a clean place to handle auth failures later).
 */
api.interceptors.response.use(
  (response) => response,
  (error) => {
    // Example (optional):
    // if (error.response?.status === 401) {
    //   localStorage.removeItem("user");
    //   window.location.href = "/login";
    // }

    return Promise.reject(error);
  }
);

export default api;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\admin-layout\AdminLayout.jsx ===
import React from "react";
import { Outlet } from "react-router-dom";
import AdminSidebar from "./AdminSidebar.jsx";

/**
 * Admin Layout - For admin dashboard pages
 * Includes Sidebar for navigation
 */
const AdminLayout = () => {
  return (
    <div className="min-h-screen bg-gray-50 flex">
      <AdminSidebar />

      <main className="flex-1 ml-64 p-6 transition-all duration-300">
        <Outlet />
      </main>
    </div>
  );
};

export default AdminLayout;


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\admin-layout\AdminSidebar.jsx ===
import React, { useState } from "react";
import { Link, useLocation, useNavigate } from "react-router-dom";
import {
  LayoutDashboard,
  Briefcase,
  User,
  Users,
  Menu,
  Clock,
  CheckCircle,
  FileText,
  XCircle,
  Archive,
  LogOut
} from "lucide-react";
import api from "../../../components/apiconfig/apiconfig";

/**
 * Admin Sidebar - For admin dashboard
 */
const AdminSidebar = () => {
  const [isOpen, setIsOpen] = useState(true);
  const location = useLocation();
  const navigate = useNavigate();

  // Define menu items
  const menuItems = [
    { title: "Dashboard", icon: <LayoutDashboard />, path: "/admin" },
    { title: "Pending Recruiters", icon: <Clock />, path: "/admin/pending-recruiters" },
    { title: "Verified Recruiters", icon: <CheckCircle />, path: "/admin/verified-recruiters" },
    { title: "Users", icon: <User />, path: "/admin/users" },
    { title: "Jobs", icon: <FileText />, path: "/admin/jobs" },
    { title: "Pending Jobs", icon: <Clock />, path: "/admin/pending-jobs" },
    { title: "Approved Jobs", icon: <CheckCircle />, path: "/admin/approved-jobs" },
    { title: "Rejected Jobs", icon: <XCircle />, path: "/admin/rejected-jobs" },
    { title: "Closed Jobs", icon: <Archive />, path: "/admin/closed-jobs" },
  ];

  const handleLogout = async () => {
    try {
      await api.post('/admin/auth/logout');
      navigate('/admin/signin');
    } catch (error) {
      console.error('Logout error:', error);
      // Even if logout fails, redirect to signin
      navigate('/admin/signin');
    }
  };

  return (
    <aside
      className={`h-screen border-r bg-white transition-all duration-300 fixed top-0 left-0 z-50
      ${isOpen ? "w-64" : "w-20"}`}
    >
      {/* Top Section */}
      <div className="flex items-center justify-between p-4 border-b">
        <h1
          className={`text-xl font-bold transition-all duration-300 ${isOpen ? "opacity-100" : "opacity-0 hidden"
            }`}
        >
          Admin Panel
        </h1>

        <button
          onClick={() => setIsOpen(!isOpen)}
          className="p-2 rounded-md hover:bg-gray-200 transition-colors"
        >
          <Menu size={20} />
        </button>
      </div>

      {/* Menu Items */}
      <ul className="mt-4 space-y-2 px-2">
        {menuItems.map((item) => {
          const isActive = location.pathname === item.path;

          return (
            <li key={item.title}>
              <Link
                to={item.path}
                className={`flex items-center gap-4 px-4 py-3 rounded-lg cursor-pointer
                transition-all duration-200
                ${isActive
                    ? "bg-blue-600 text-white"
                    : "text-gray-700 hover:bg-gray-100"
                  }
              `}
              >
                <span className="text-lg flex-shrink-0">{item.icon}</span>
                <span
                  className={`${isOpen ? "block" : "hidden"
                    } text-md font-medium whitespace-nowrap`}
                >
                  {item.title}
                </span>
              </Link>
            </li>
          );
        })}
      </ul>

      {/* Logout Button */}
      <div className="absolute bottom-0 left-0 right-0 p-2 border-t">
        <button
          onClick={handleLogout}
          className={`flex items-center gap-4 w-full px-4 py-3 rounded-lg cursor-pointer
            transition-all duration-200 text-red-600 hover:bg-red-50
            ${!isOpen ? "justify-center" : ""}
          `}
        >
          <LogOut size={20} />
          <span
            className={`${isOpen ? "block" : "hidden"
              } text-md font-medium whitespace-nowrap`}
          >
            Logout
          </span>
        </button>
      </div>
    </aside>
  );
};

export default AdminSidebar;


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\candidate-layout\CandidateHeader.jsx ===
import React, { useState, useEffect, useRef } from 'react';
import { Link, useLocation, useNavigate } from 'react-router-dom';
import { Sparkles, User, Menu, X } from 'lucide-react';
import api from '../../../components/apiconfig/apiconfig';

export default function CandidateHeader() {
  const [userData, setUserData] = useState(null);
  const [dropdownOpen, setDropdownOpen] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const dropdownRef = useRef(null);
  const location = useLocation();
  const navigate = useNavigate();

  useEffect(() => {
    fetchUserData();
  }, []);

  useEffect(() => {
    function handleClickOutside(e) {
      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {
        setDropdownOpen(false);
      }
    }

    document.addEventListener('mousedown', handleClickOutside);
    return () => document.removeEventListener('mousedown', handleClickOutside);
  }, []);

  const fetchUserData = async () => {
    try {
      const response = await api.get('/auth/session');
      if (response.data?.user) {
        setUserData(response.data.user);
      }
    } catch (error) {
      console.error('Error fetching user data:', error);
    }
  };

  const getUserInitial = () => {
    if (userData?.full_name) {
      return userData.full_name.charAt(0).toUpperCase();
    }
    return userData?.username?.charAt(0).toUpperCase() || 'U';
  };

  const handleLogout = async () => {
    try {
      await api.post('/auth/logout');
      navigate('/sign-in');
    } catch (error) {
      console.error('Logout error:', error);
    }
  };

  const formatCreatedDate = (u) => {
    if (!u) return '-';
    const d = u.created_at || u.createdAt || u.created || u.createdAtDate || u.createdAtUTC;
    try {
      const date = d ? new Date(d) : null;
      return date ? date.toLocaleDateString() : '-';
    } catch (e) {
      return '-';
    }
  };

  const formatLoginTime = (u) => {
    if (!u) return '-';
    const d = u.loginAt || u.last_login || u.lastLogin || u.loggedInAt;
    try {
      const date = d ? new Date(d) : null;
      return date ? date.toLocaleString() : '-';
    } catch (e) {
      return '-';
    }
  };

  const navItems = [
    { path: '/dashboard', label: 'Find Jobs' },
    { path: '/dashboard/saved', label: 'Saved Jobs' },
    { path: '/dashboard/applied', label: 'Applications' },
    { path: '/dashboard/profile', label: 'Profile' },
  ];

  const isActive = (path) => {
    if (path === '/dashboard') {
      return location.pathname === '/dashboard';
    }
    return location.pathname.startsWith(path);
  };

  return (
    <header className="sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16">
          {/* Logo */}
          <Link 
            to="/dashboard" 
            className="flex items-center gap-2.5 hover:opacity-90 transition-opacity"
          >
            <div className="h-9 w-9 rounded-lg bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center shadow-md">
              <Sparkles size={18} className="text-white" />
            </div>
            <span className="text-xl font-bold text-gray-900">
              Hire<span className="text-blue-600">Spark</span>
            </span>
          </Link>

          {/* Desktop Navigation */}
          <nav className="hidden md:flex items-center gap-1">
            {navItems.map((item) => (
              <Link
                key={item.path}
                to={item.path}
                className={`relative px-4 py-2 text-sm font-medium transition-colors ${
                  isActive(item.path)
                    ? 'text-blue-600'
                    : 'text-gray-700 hover:text-gray-900'
                }`}
              >
                {item.label}
                {isActive(item.path) && (
                  <span className="absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 rounded-full"></span>
                )}
              </Link>
            ))}
          </nav>

          {/* Right Section */}
          <div className="flex items-center gap-3">
            {/* Mobile Menu Button */}
            <button
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
              className="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors"
            >
              {mobileMenuOpen ? <X size={20} /> : <Menu size={20} />}
            </button>

            {/* User Profile Dropdown */}
            <div className="relative" ref={dropdownRef}>
              <button
                onClick={() => setDropdownOpen(!dropdownOpen)}
                className="flex items-center gap-2 p-1.5 rounded-lg hover:bg-gray-50 transition-colors"
              >
                <div className="h-9 w-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-sm font-semibold text-white shadow-sm">
                  {userData ? getUserInitial() : <User size={18} />}
                </div>
              </button>

              {dropdownOpen && userData && (
                <div className="absolute right-0 mt-2.5 w-72 bg-white rounded-xl shadow-2xl border border-gray-200 p-5 z-50 transform transition-all duration-200 ease-out opacity-100 translate-y-0">
                    <div className="space-y-4">
                      <div>
                        <div className="text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide">Name</div>
                        <div className="font-semibold text-gray-900 text-base">
                          {userData.name || userData.full_name || userData.fullname || userData.username || '-'}
                        </div>
                      </div>
                      <div>
                        <div className="text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide">Username</div>
                        <div className="text-sm text-gray-700 font-medium">{userData.username || userData.email || '-'}</div>
                      </div>
                      <div>
                        <div className="text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide">Role</div>
                        <div className="text-sm">
                          <span className="inline-flex px-2.5 py-1 bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 rounded-md text-xs font-semibold border border-blue-200">
                            {userData.role || 'candidate'}
                          </span>
                        </div>
                      </div>
                      <div>
                        <div className="text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide">Member since</div>
                        <div className="text-sm text-gray-700 font-medium">{formatCreatedDate(userData)}</div>
                      </div>
                      <div>
                        <div className="text-xs font-medium text-gray-500 mb-1.5 uppercase tracking-wide">Last login</div>
                        <div className="text-sm text-gray-700 font-medium">{formatLoginTime(userData)}</div>
                      </div>
                    </div>
                    
                    <div className="pt-5 mt-5 border-t border-gray-200 space-y-2.5">
                      <Link
                        to="/dashboard/profile"
                        onClick={() => setDropdownOpen(false)}
                        className="block w-full text-center px-4 py-2.5 rounded-lg bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 hover:from-blue-100 hover:to-blue-200 transition-all duration-200 font-semibold text-sm border border-blue-200 shadow-sm hover:shadow-md"
                      >
                        View Profile
                      </Link>
                      <button
                        onClick={handleLogout}
                        className="w-full px-4 py-2.5 rounded-lg bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 transition-all duration-200 font-semibold text-sm text-white shadow-sm hover:shadow-md"
                      >
                        Logout
                      </button>
                    </div>
                  </div>
              )}
            </div>
          </div>
        </div>

        {/* Mobile Navigation Menu */}
        {mobileMenuOpen && (
          <nav className="md:hidden py-4 border-t border-gray-200">
            <div className="space-y-1">
              {navItems.map((item) => (
                <Link
                  key={item.path}
                  to={item.path}
                  onClick={() => setMobileMenuOpen(false)}
                  className={`block px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${
                    isActive(item.path)
                      ? 'bg-blue-50 text-blue-700'
                      : 'text-gray-700 hover:bg-gray-50'
                  }`}
                >
                  {item.label}
                </Link>
              ))}
            </div>
          </nav>
        )}
      </div>
    </header>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\candidate-layout\CandidateLayout.jsx ===
import React from 'react';
import { Outlet } from 'react-router-dom';
import CandidateHeader from './CandidateHeader.jsx';

/**
 * Candidate Layout - For user/candidate dashboard pages
 * Includes Header for navigation
 */
const CandidateLayout = () => {
  return (
    <div className="min-h-screen bg-white">
      <CandidateHeader />
      <main className="flex-1">
        <Outlet />
      </main>
    </div>
  );
};

export default CandidateLayout;


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\candidate-layout\CandidateSidebar.jsx ===
import React from 'react';
import { Link } from 'react-router-dom';

/**
 * Candidate Sidebar - For user/candidate dashboard
 */
export default function CandidateSidebar({
  sidebarOpen,
  mobileSidebarOpen,
  userData,
  onToggleSidebar,
  onLogout,
  currentPath,
  setMobileSidebarOpen
}) {
  const navItems = [
    { path: '/dashboard', label: 'Dashboard' },
    { path: '/jobs', label: 'Find Jobs' },
    { path: '/dashboard/saved', label: 'Saved' },
    { path: '/dashboard/applied', label: 'Applications' },
    { path: '/dashboard/profile', label: 'Profile' },
    { path: '/dashboard/alerts', label: 'Notifications' },
  ];

  return (
    <>
      {/* Desktop Sidebar */}
      <aside className="w-64 bg-white border-r border-slate-200 hidden md:flex flex-col">
        <div className="px-6 py-4 border-b border-slate-200">
          <h1 className="text-xl font-semibold tracking-tight">HireSpark</h1>
          <p className="text-xs text-slate-500 mt-1">Applicant Dashboard</p>
        </div>

        <nav className="flex-1 px-3 py-4 space-y-1 text-sm">
          {navItems.map((item) => (
            <Link
              key={item.path}
              to={item.path}
              className={`
                flex items-center gap-2 px-3 py-2 rounded-lg font-medium
                ${currentPath === item.path
                  ? 'bg-slate-900 text-white'
                  : 'text-slate-700 hover:bg-slate-100'
                }
              `}
            >
              <span>{item.label}</span>
            </Link>
          ))}
        </nav>

        <div className="px-3 py-4 border-t border-slate-200">
          <button
            onClick={onLogout}
            className="w-full text-left px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50"
          >
            Logout
          </button>
        </div>
      </aside>

      {/* Mobile Sidebar Overlay */}
      {mobileSidebarOpen && (
        <div
          className="md:hidden fixed inset-0 bg-black/50 z-40"
          onClick={() => setMobileSidebarOpen(false)}
        />
      )}

      {/* Mobile Sidebar */}
      <aside className={`
        md:hidden fixed inset-y-0 left-0 w-64 bg-white z-50 transform transition-transform duration-300
        ${mobileSidebarOpen ? 'translate-x-0' : '-translate-x-full'}
      `}>
        <div className="px-6 py-4 border-b border-slate-200">
          <h1 className="text-xl font-semibold tracking-tight">HireSpark</h1>
          <p className="text-xs text-slate-500 mt-1">Applicant Dashboard</p>
        </div>

        <nav className="flex-1 px-3 py-4 space-y-1 text-sm">
          {navItems.map((item) => (
            <Link
              key={item.path}
              to={item.path}
              className={`
                flex items-center gap-2 px-3 py-2 rounded-lg font-medium
                ${currentPath === item.path
                  ? 'bg-slate-900 text-white'
                  : 'text-slate-700 hover:bg-slate-100'
                }
              `}
              onClick={() => setMobileSidebarOpen(false)}
            >
              <span>{item.label}</span>
            </Link>
          ))}
        </nav>

        <div className="px-3 py-4 border-t border-slate-200">
          <button
            onClick={onLogout}
            className="w-full text-left px-3 py-2 rounded-lg text-sm text-red-600 hover:bg-red-50"
          >
            Logout
          </button>
        </div>
      </aside>
    </>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\guest-layout\GuestFooter.jsx ===
import { Link } from "react-router-dom";
import { Sparkles } from "lucide-react";

/**
 * Guest Footer - For public pages
 */
function GuestFooter() {
  return (
    <footer className="mt-12 bg-white border-t border-border text-text-muted">
      <div className="container-custom py-10 sm:py-12">
        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-10 mb-8">
          {/* Brand / description */}
          <div className="space-y-3 sm:col-span-2 lg:col-span-1">
            <div className="flex items-center gap-2.5">
              <div className="h-10 w-10 rounded-xl bg-primary-500 text-white grid place-items-center shadow-soft">
                <Sparkles size={18} />
              </div>
              <span className="text-lg font-bold tracking-tight text-text-dark">
                Hire<span className="text-primary-500">Spark</span>
              </span>
            </div>
            <p className="text-xs sm:text-sm text-text-muted max-w-xs leading-relaxed">
              A modern hiring platform that helps companies and candidates connect
              faster and more fairly.
            </p>
          </div>

          {/* Product links */}
          <div>
            <h4 className="text-xs font-semibold text-text-dark uppercase tracking-wider mb-4">
              Product
            </h4>
            <ul className="space-y-2.5 text-sm text-text-muted">
              <li>
                <Link to="/jobs" className="hover:text-primary-600 transition-colors">
                  Browse Jobs
                </Link>
              </li>
              <li>
                <Link to="/sign-in?role=recruiter&redirect=post-job" className="hover:text-primary-600 transition-colors">
                  Post a Job
                </Link>
              </li>
              <li>
                <Link to="/companies" className="hover:text-primary-600 transition-colors">
                  Companies
                </Link>
              </li>
            </ul>
          </div>

          {/* Company links */}
          <div>
            <h4 className="text-xs font-semibold text-text-dark uppercase tracking-wider mb-4">
              Company
            </h4>
            <ul className="space-y-2.5 text-sm text-text-muted">
              <li>
                <Link to="/" className="hover:text-primary-600 transition-colors">
                  Home
                </Link>
              </li>
              <li>
                <Link to="/contact" className="hover:text-primary-600 transition-colors">
                  Contact
                </Link>
              </li>
              <li>
                <Link to="/terms" className="hover:text-primary-600 transition-colors">
                  Terms & Conditions
                </Link>
              </li>
              <li>
                <Link to="/privacy" className="hover:text-primary-600 transition-colors">
                  Privacy Policy
                </Link>
              </li>
              <li>
                <Link to="/refund" className="hover:text-primary-600 transition-colors">
                  Refund / Cancellation
                </Link>
              </li>
            </ul>
          </div>

          {/* Newsletter */}
          <div>
            <h4 className="text-xs font-semibold text-text-dark uppercase tracking-wider mb-4">
              Stay in the loop
            </h4>
            <p className="text-xs sm:text-sm text-text-muted mb-4 leading-relaxed">
              Get curated job alerts and hiring insights in your inbox.
            </p>
            <form
              onSubmit={(e) => e.preventDefault()}
              className="space-y-2"
            >
              <div className="flex rounded-input bg-gray-50 border border-border overflow-hidden focus-within:border-primary-500 focus-within:ring-2 focus-within:ring-primary-500/20 transition-all">
                <input
                  type="email"
                  required
                  placeholder="Your email"
                  className="flex-1 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-transparent outline-none text-text-dark placeholder:text-text-muted"
                />
                <button
                  type="submit"
                  className="px-3 sm:px-4 py-2 text-xs sm:text-sm font-semibold bg-primary-500 hover:bg-primary-600 text-white transition-colors"
                >
                  Subscribe
                </button>
              </div>
              <p className="text-[10px] text-text-light">
                No spam. Unsubscribe anytime.
              </p>
            </form>
          </div>
        </div>

        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 border-t border-border pt-6">
          <p className="text-xs text-text-muted">
            Â© {new Date().getFullYear()} HireSpark. All rights reserved.
          </p>
        </div>
      </div>
    </footer>
  );
}

export default GuestFooter;


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\guest-layout\GuestLayout.jsx ===
import React, { useState, useEffect } from "react";
import { Outlet, useLocation } from "react-router-dom";
import GuestNavbar from "./GuestNavbar.jsx";
import GuestFooter from "./GuestFooter.jsx";
import CandidateHeader from "../candidate-layout/CandidateHeader.jsx";
import api from "../../apiconfig/apiconfig";

/**
 * Guest Layout - For public pages (home, jobs, companies, etc.)
 * Includes Navbar and Footer (footer hidden on auth pages)
 * Shows CandidateHeader if user is logged in as candidate
 */
const GuestLayout = () => {
  const { pathname } = useLocation();
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  // Routes where we DON'T want to show the footer or candidate header
  const authRoutes = [
    "/sign-in",
    "/sign-up",
    "/forgot",
    "/sign-in-modal",
    "/admin/signin",
    "/admin/signup",
  ];

  const isAuthRoute =
    authRoutes.includes(pathname) ||
    authRoutes.some((p) => pathname.startsWith(p + "/"));

  // Check authentication status
  // Re-check when pathname changes to detect logout
  useEffect(() => {
    let mounted = true;

    async function checkAuth() {
      try {
        const { data } = await api.get("/auth/session");
        if (mounted) setUser(data?.user || null);
      } catch (err) {
        if (mounted) setUser(null);
      } finally {
        if (mounted) setLoading(false);
      }
    }

    checkAuth();

    return () => {
      mounted = false;
    };
  }, [pathname]);

  const hideFooter = isAuthRoute;

  // Show CandidateHeader if user is logged in as candidate and not on auth pages
  const showCandidateHeader =
    !loading &&
    user &&
    user.role === "candidate" &&
    !isAuthRoute;

  return (
    <div className="min-h-screen flex flex-col">
      <header>
        {showCandidateHeader ? <CandidateHeader /> : <GuestNavbar />}
      </header>

      <main className="flex-1">
        <Outlet />
      </main>

      {!hideFooter && (
        <footer>
          <GuestFooter />
        </footer>
      )}
    </div>
  );
};

export default GuestLayout;


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\guest-layout\GuestNavbar.jsx ===
import React, { useState, useEffect, useRef } from "react";
import { Sparkles, User, Menu, X } from "lucide-react";
import { Link, useNavigate } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";
import SignInModal from "../../../modules/auth/candidate-recruiter/SignInModal";

/**
 * Guest Navbar - For public pages
 */
export default function GuestNavbar() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [open, setOpen] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const dropdownRef = useRef(null);
  const navigate = useNavigate();

  // auth popup
  const [authOpen, setAuthOpen] = useState(false);
  const [selectedRole, setSelectedRole] = useState("candidate"); // "candidate" (normal user) | "recruiter"

  useEffect(() => {
    let mounted = true;

    async function fetchProfile() {
      try {
        const res = await api.get("/auth/session");
        if (mounted) setUser(res.data.user || null);
      } catch (err) {
        if (mounted) setUser(null);
      } finally {
        if (mounted) setLoading(false);
      }
    }

    fetchProfile();

    return () => {
      mounted = false;
    };
  }, []);

  useEffect(() => {
    function handleClickOutside(e) {
      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {
        setOpen(false);
      }
    }

    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  function formatCreatedDate(u) {
    if (!u) return "-";
    const d =
      u.created_at ||
      u.createdAt ||
      u.created ||
      u.createdAtDate ||
      u.createdAtUTC;
    try {
      const date = d ? new Date(d) : null;
      return date ? date.toLocaleDateString() : "-";
    } catch (e) {
      return "-";
    }
  }

  function formatLoginTime(u) {
    if (!u) return "-";
    const d = u.loginAt || u.last_login || u.lastLogin || u.loggedInAt;
    try {
      const date = d ? new Date(d) : null;
      return date ? date.toLocaleString() : "-";
    } catch (e) {
      return "-";
    }
  }

  async function handleLogout() {
    try {
      await api.post("/auth/logout");
      setUser(null);
      setOpen(false);
      setMobileMenuOpen(false);
      navigate("/sign-in");
    } catch (err) {
      console.error("Logout failed", err);
    }
  }

  function handleOpenAuth(role) {
    setSelectedRole(role); // "candidate" or "recruiter"
    setAuthOpen(true);
    setMobileMenuOpen(false); // Close mobile menu if open
  }

  return (
    <>
      <header className="sticky top-0 z-50 border-b border-border bg-white text-text-dark shadow-sm backdrop-blur-sm bg-white/95">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 md:py-4">
          <div className="flex items-center justify-between gap-4">
            {/* Logo */}
            <Link
              to="/"
              className="flex items-center gap-2.5 sm:gap-3 hover:opacity-90 transition-opacity flex-shrink-0"
            >
              <div className="h-9 w-9 sm:h-10 sm:w-10 rounded-xl bg-primary-500 text-white grid place-items-center shadow-soft flex-shrink-0">
                <Sparkles size={18} className="sm:w-5 sm:h-5" />
              </div>
              <b className="text-lg sm:text-xl font-bold tracking-tight">
                Hire<span className="text-primary-500">Spark</span>
              </b>
            </Link>

            {/* Desktop Navigation Menu */}
            <nav className="hidden md:flex items-center gap-2 lg:gap-3">
              <Link
                to="/"
                className="px-3 lg:px-4 py-2 rounded-button text-sm font-semibold text-text-muted hover:bg-primary-50 hover:text-primary-600 transition-colors"
              >
                Home
              </Link>
              <Link
                to="/jobs"
                className="px-3 lg:px-4 py-2 rounded-button text-sm font-semibold text-text-muted hover:bg-primary-50 hover:text-primary-600 transition-colors"
              >
                Browse Jobs
              </Link>
              <Link
                to="/sign-in?role=recruiter&redirect=post-job"
                className="px-3 lg:px-4 py-2 rounded-button text-sm font-semibold text-text-muted hover:bg-primary-50 hover:text-primary-600 transition-colors"
              >
                Post a Job
              </Link>
            </nav>

            {/* Buttons / Profile */}
            <div className="flex gap-2 sm:gap-3 items-center">
              {!loading && user ? (
                <div className="relative" ref={dropdownRef}>
                  <button
                    onClick={() => setOpen((v) => !v)}
                    className="flex items-center gap-2 px-2 sm:px-3 py-2 rounded-button hover:bg-gray-100 transition-colors"
                    aria-haspopup="true"
                    aria-expanded={open}
                  >
                    <div className="h-8 w-8 sm:h-9 sm:w-9 rounded-full bg-primary-50 grid place-items-center text-sm font-semibold text-primary-700 flex-shrink-0">
                      {user.username ? (
                        user.username.charAt(0).toUpperCase()
                      ) : (
                        <User size={16} className="sm:w-[18px] sm:h-[18px]" />
                      )}
                    </div>
                    <span className="hidden sm:block text-sm font-medium text-text-dark">
                      {user.name || user.fullname || user.username}
                    </span>
                  </button>

                  {open && (
                    <div className="absolute right-0 mt-2 w-72 sm:w-80 bg-white text-text-dark rounded-xl shadow-large p-5 z-50 border border-border">
                      <div className="mb-4">
                        <div className="text-xs text-text-muted mb-1">Name</div>
                        <div className="font-semibold text-base">
                          {user.name || user.fullname || user.username || "-"}
                        </div>
                      </div>
                      <div className="mb-4">
                        <div className="text-xs text-text-muted mb-1">Username</div>
                        <div className="font-medium text-sm">{user.username || user.email || "-"}</div>
                      </div>
                      <div className="mb-4">
                        <div className="text-xs text-text-muted mb-1">Role</div>
                        <div className="font-medium text-sm capitalize">{user.role || "-"}</div>
                      </div>
                      <div className="mb-4">
                        <div className="text-xs text-text-muted mb-1">Member since</div>
                        <div className="font-medium text-sm">
                          {formatCreatedDate(user)}
                        </div>
                      </div>
                      <div className="mb-4">
                        <div className="text-xs text-text-muted mb-1">Last login</div>
                        <div className="font-medium text-sm">
                          {formatLoginTime(user)}
                        </div>
                      </div>
                      <div className="pt-4 border-t border-border space-y-2">
                        <Link
                          to="/profile"
                          onClick={() => setOpen(false)}
                          className="block w-full text-left px-4 py-2.5 rounded-button bg-gray-50 hover:bg-gray-100 transition-colors font-medium text-sm"
                        >
                          View Profile
                        </Link>
                        <button
                          onClick={handleLogout}
                          className="w-full text-left px-4 py-2.5 rounded-button bg-error-500 hover:bg-error-600 transition-colors font-medium text-sm text-white"
                        >
                          Logout
                        </button>
                      </div>
                    </div>
                  )}
                </div>
              ) : (
                <>
                  {/* Candidate Login - Navigate to sign-in page */}
                  <Link
                    to="/sign-in?role=candidate"
                    className="hidden sm:inline-flex btn btn-ghost btn-sm"
                  >
                    Candidate Login
                  </Link>

                  {/* Recruiter Login - Navigate to sign-in page */}
                  <Link
                    to="/sign-in?role=recruiter"
                    className="btn btn-primary btn-sm"
                  >
                    <span className="hidden sm:inline">Recruiter Login</span>
                    <span className="sm:hidden">Login</span>
                  </Link>
                </>
              )}

              {/* Mobile Menu Toggle */}
              <button
                onClick={() => setMobileMenuOpen((v) => !v)}
                className="md:hidden p-2 rounded-button hover:bg-gray-100 transition-colors flex-shrink-0"
                aria-label="Toggle mobile menu"
              >
                {mobileMenuOpen ? <X size={20} /> : <Menu size={20} />}
              </button>
            </div>
          </div>
        </div>

        {/* Mobile Navigation Menu */}
        {mobileMenuOpen && (
          <div className="md:hidden bg-white border-t border-border animate-in slide-in-from-top">
            <nav className="px-4 sm:px-6 py-4 space-y-3">
              <Link
                to="/"
                onClick={() => setMobileMenuOpen(false)}
                className="block py-2 text-text-dark hover:text-primary-600 transition-colors font-medium text-base"
              >
                Home
              </Link>
              <Link
                to="/jobs"
                onClick={() => setMobileMenuOpen(false)}
                className="block py-2 text-text-dark hover:text-primary-600 transition-colors font-medium text-base"
              >
                Browse Jobs
              </Link>
              <Link
                to="/sign-in?role=recruiter&redirect=post-job"
                onClick={() => setMobileMenuOpen(false)}
                className="block py-2 text-text-dark hover:text-primary-600 transition-colors font-medium text-base"
              >
                Post a Job
              </Link>
              <Link
                to="/contact"
                onClick={() => setMobileMenuOpen(false)}
                className="block py-2 text-text-dark hover:text-primary-600 transition-colors font-medium text-base"
              >
                Contact
              </Link>
              {!loading && !user && (
                <div className="pt-4 border-t border-border space-y-2">
                  <Link
                    to="/sign-in?role=candidate"
                    onClick={() => setMobileMenuOpen(false)}
                    className="block w-full text-center px-4 py-2.5 rounded-button text-sm font-semibold text-primary-600 border-2 border-primary-500 hover:bg-primary-50 transition-colors"
                  >
                    Candidate Login
                  </Link>
                  <Link
                    to="/sign-in?role=recruiter"
                    onClick={() => setMobileMenuOpen(false)}
                    className="block w-full text-center px-4 py-2.5 rounded-button btn-primary btn-sm"
                  >
                    Recruiter Login
                  </Link>
                </div>
              )}
            </nav>
          </div>
        )}
      </header>

      {/* Auth popup modal */}
      {authOpen && (
        <SignInModal
          role={selectedRole}
          onClose={() => setAuthOpen(false)}
        />
      )}
    </>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\recruiter-layout\RecruiterHeader.jsx ===
import React, { useState, useEffect, useRef } from "react";
import { Link, useNavigate } from "react-router-dom";
import { Sparkles, User } from "lucide-react";
import api from "../../../components/apiconfig/apiconfig";

/**
 * Recruiter Header - Matches the design from the image
 * Shows: Logo, Post a Job, Applications, Profile, User dropdown
 */
export default function RecruiterHeader() {
  const [user, setUser] = useState(null);
  const [open, setOpen] = useState(false);
  const [loading, setLoading] = useState(true);
  const dropdownRef = useRef(null);
  const navigate = useNavigate();

  useEffect(() => {
    let mounted = true;

    async function fetchUser() {
      try {
        const res = await api.get("/auth/session");
        if (mounted) setUser(res.data.user || null);
      } catch (err) {
        if (mounted) setUser(null);
      } finally {
        if (mounted) setLoading(false);
      }
    }

    fetchUser();

    return () => {
      mounted = false;
    };
  }, []);

  useEffect(() => {
    function handleClickOutside(e) {
      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {
        setOpen(false);
      }
    }

    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  function formatCreatedDate(u) {
    if (!u) return "-";
    const d =
      u.created_at ||
      u.createdAt ||
      u.created ||
      u.createdAtDate ||
      u.createdAtUTC;
    try {
      const date = d ? new Date(d) : null;
      return date ? date.toLocaleDateString() : "-";
    } catch (e) {
      return "-";
    }
  }

  function formatLoginTime(u) {
    if (!u) return "-";
    const d = u.loginAt || u.last_login || u.lastLogin || u.loggedInAt;
    try {
      const date = d ? new Date(d) : null;
      return date ? date.toLocaleString() : "-";
    } catch (e) {
      return "-";
    }
  }

  async function handleLogout() {
    try {
      await api.post("/auth/logout");
      setUser(null);
      setOpen(false);
      navigate("/sign-in");
    } catch (err) {
      console.error("Logout failed", err);
    }
  }

  if (loading) {
    return (
      <header className="sticky top-0 z-50 border-b border-slate-200 bg-white text-slate-900 shadow-sm">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 md:py-4 flex items-center justify-between">
          <div className="h-10 w-10 bg-gray-200 animate-pulse rounded-xl"></div>
        </div>
      </header>
    );
  }

  return (
    <header className="sticky top-0 z-50 border-b border-slate-200 bg-white text-slate-900 shadow-sm">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 md:py-4 flex items-center justify-between">
        {/* Logo */}
        <div>
          <Link
            to="/recruiter-dashboard"
            className="flex items-center gap-3 hover:opacity-90 transition-opacity"
          >
            <div className="h-10 w-10 rounded-xl bg-blue-600 text-white grid place-items-center shadow-md">
              <Sparkles size={20} />
            </div>
            <b className="text-xl font-bold tracking-tight">
              Hire<span className="text-blue-600">Spark</span>
            </b>
          </Link>
        </div>

        {/* Center Navigation */}
        <nav className="hidden md:flex items-center gap-6">
          <Link
            to="/create-job"
            className="px-4 py-2 rounded-lg border-2 border-blue-600 text-blue-600 font-semibold hover:bg-blue-50 transition-colors"
          >
            Post a Job
          </Link>
          <Link
            to="/job-posted"
            className="text-slate-700 font-medium hover:text-blue-600 transition-colors"
          >
            Applications
          </Link>
          <Link
            to="/recruiter-profile"
            className="text-slate-700 font-medium hover:text-blue-600 transition-colors"
          >
            Profile
          </Link>
        </nav>

        {/* User Icon & Dropdown */}
        <div className="relative" ref={dropdownRef}>
          <button
            onClick={() => setOpen(!open)}
            className="flex items-center gap-2 p-1 rounded-full hover:bg-slate-100 transition-colors"
          >
            <div className="h-10 w-10 rounded-full bg-blue-100 grid place-items-center text-sm font-semibold text-blue-700">
              {user?.name || user?.username
                ? (user.name || user.username).charAt(0).toUpperCase()
                : <User size={18} />}
            </div>
          </button>

          {open && (
            <div className="absolute right-0 mt-3 w-72 bg-white text-slate-900 rounded-xl shadow-2xl p-5 z-50 border border-slate-200">
              <div className="mb-4">
                <div className="text-xs text-slate-500">Name</div>
                <div className="font-semibold text-lg">
                  {user?.name || user?.fullname || user?.username || "-"}
                </div>
              </div>
              <div className="mb-4">
                <div className="text-xs text-slate-500">Username</div>
                <div className="font-medium text-sm">{user?.username || user?.email || "-"}</div>
              </div>
              <div className="mb-4">
                <div className="text-xs text-slate-500">Role</div>
                <div className="font-medium text-sm">{user?.role || "-"}</div>
              </div>
              <div className="mb-4">
                <div className="text-xs text-slate-500">Member since</div>
                <div className="font-medium text-sm">
                  {formatCreatedDate(user)}
                </div>
              </div>
              <div className="mb-4">
                <div className="text-xs text-slate-500">Last login</div>
                <div className="font-medium text-sm">
                  {formatLoginTime(user)}
                </div>
              </div>
              <div className="pt-4 border-t border-slate-200 space-y-3">
                <Link
                  to="/recruiter-profile"
                  onClick={() => setOpen(false)}
                  className="block w-full text-left px-4 py-3 rounded-lg border border-blue-600 text-blue-600 hover:bg-blue-50 transition-colors font-medium text-sm"
                >
                  View Profile
                </Link>
                <button
                  onClick={handleLogout}
                  className="w-full text-left px-4 py-3 rounded-lg bg-red-600 hover:bg-red-700 transition-colors font-medium text-sm text-white"
                >
                  Logout
                </button>
              </div>
            </div>
          )}
        </div>
      </div>
    </header>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\recruiter-layout\RecruiterLayout.jsx ===
import React from "react";
import { Outlet, Link, useLocation, Navigate } from "react-router-dom";
import RecruiterSidebar from "./RecruiterSidebar.jsx";
import RecruiterHeader from "./RecruiterHeader.jsx";
import { useRecruiterProfile } from "../../../hooks/useRecruiterProfile";

/**
 * Recruiter Layout - For recruiter dashboard pages
 * Shows header when profile is complete, profile form when incomplete
 */
export default function RecruiterLayout() {
  const location = useLocation();
  const { loading, isComplete } = useRecruiterProfile();
  const isProfileFormPage = location.pathname === "/recruiter-profile-form";

  // Check if current route is active for mobile tabs
  const isActive = (path) => {
    return location.pathname === path || location.pathname.startsWith(path + '/');
  };

  // Get page title based on current route
  const getPageTitle = () => {
    if (location.pathname === '/recruiter-dashboard') return 'Dashboard';
    if (location.pathname === '/job-posted') return 'Posted Jobs';
    if (location.pathname === '/create-job') return 'Create Job';
    if (location.pathname.includes('/applicants')) return 'Applicants';
    if (location.pathname === '/recruiter-profile') return 'Company Profile';
    if (location.pathname === '/recruiter-profile-form') return 'Complete Profile';
    return 'Recruiter Dashboard';
  };

  // Get page description based on current route
  const getPageDescription = () => {
    if (location.pathname === '/recruiter-dashboard') return 'Quick overview of your hiring activity.';
    if (location.pathname === '/job-posted') return 'Manage your job postings and applicants.';
    if (location.pathname === '/create-job') return 'Create a new job posting.';
    if (location.pathname.includes('/applicants')) return 'Review and manage applicants.';
    if (location.pathname === '/recruiter-profile') return 'Update your company profile and settings.';
    if (location.pathname === '/recruiter-profile-form') return 'Complete your company profile to get started.';
    return 'Manage your recruiting activities.';
  };

  // Show loading state
  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  // If profile is not complete and not on profile form page, redirect to profile form
  if (!isComplete && !isProfileFormPage) {
    return <Navigate to="/recruiter-profile-form" replace />;
  }

  // If on profile form page, show form without header
  if (isProfileFormPage) {
    return (
      <div className="min-h-screen bg-slate-50">
        <Outlet />
      </div>
    );
  }

  // Profile is complete - show header layout
  return (
    <div className="min-h-screen flex flex-col bg-slate-50 text-slate-900">
      {/* Header matching the image design */}
      <RecruiterHeader />

      {/* Main content */}
      <main className="flex-1">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8">
          <Outlet />
        </div>
      </main>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\layout\recruiter-layout\RecruiterSidebar.jsx ===
import React, { useState } from "react";
import { Link, useLocation, useNavigate } from "react-router-dom";
import {
  LayoutDashboard,
  Briefcase,
  Users,
  Building,
  UserPlus,
  Bell,
  LogOut,
  Menu,
  X
} from "lucide-react";
import api from "../../../components/apiconfig/apiconfig";

/**
 * Recruiter Sidebar - For recruiter dashboard
 */
export default function RecruiterSidebar() {
  const [isOpen, setIsOpen] = useState(true);
  const location = useLocation();
  const navigate = useNavigate();

  // Check if current route is active
  const isActive = (path) => {
    return location.pathname === path || location.pathname.startsWith(path + '/');
  };

  // Menu items with icons
  const menuItems = [
    {
      title: "Dashboard",
      icon: <LayoutDashboard size={20} />,
      path: "/recruiter-dashboard"
    },
    {
      title: "Post Job",
      icon: <Briefcase size={20} />,
      path: "/create-job"
    },
    {
      title: "Jobs",
      icon: <Briefcase size={20} />,
      path: "/job-posted"
    },
    {
      title: "Company Profile",
      icon: <Building size={20} />,
      path: "/recruiter-profile"
    },
    {
      title: "Complete Profile",
      icon: <UserPlus size={20} />,
      path: "/recruiter-profile-form"
    },
  ];

  const handleLogout = async () => {
    try {
      await api.post('/auth/logout');
      navigate('/sign-in');
    } catch (error) {
      console.error('Logout error:', error);
    }
  };

  return (
    <aside
      className={`h-screen bg-white border-r border-slate-200 transition-all duration-300 fixed top-0 left-0 z-50
      ${isOpen ? "w-64" : "w-20"}`}
    >
      {/* Logo Section */}
      <div className="px-4 py-4 border-b border-slate-200 flex items-center justify-between">
        <div className={`flex items-center gap-3 transition-all ${isOpen ? "opacity-100" : "opacity-0 hidden"}`}>
          <div className="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
            <span className="text-white font-bold text-sm">HS</span>
          </div>
          <div>
            <h1 className="text-lg font-semibold tracking-tight">HireSpark</h1>
            <p className="text-xs text-slate-500">Recruiter</p>
          </div>
        </div>

        {/* Toggle Button */}
        <button
          onClick={() => setIsOpen(!isOpen)}
          className="p-1.5 rounded-lg hover:bg-slate-100 transition-colors"
        >
          {isOpen ? <X size={18} /> : <Menu size={18} />}
        </button>
      </div>

      {/* Navigation Menu */}
      <nav className="flex-1 px-2 py-4 space-y-1">
        {menuItems.map((item) => (
          <Link
            key={item.title}
            to={item.path}
            className={`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200
              ${isActive(item.path)
                ? 'bg-slate-900 text-white font-medium'
                : 'text-slate-700 hover:bg-slate-100'
              }
              ${!isOpen ? "justify-center" : ""}
            `}
            title={!isOpen ? item.title : ""}
          >
            <span className={`flex-shrink-0 ${isActive(item.path) ? 'text-white' : 'text-slate-600'}`}>
              {item.icon}
            </span>
            <span className={`${isOpen ? "block" : "hidden"} text-sm whitespace-nowrap`}>
              {item.title}
            </span>
          </Link>
        ))}
      </nav>

      {/* Bottom Section - Logout */}
      <div className="px-2 py-4 border-t border-slate-200">
        <button
          onClick={handleLogout}
          className={`flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm text-red-600 hover:bg-red-50 transition-all duration-200
            ${!isOpen ? "justify-center" : ""}
          `}
          title={!isOpen ? "Logout" : ""}
        >
          <LogOut size={18} />
          <span className={`${isOpen ? "block" : "hidden"} whitespace-nowrap`}>
            Logout
          </span>
        </button>
      </div>
    </aside>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\components\profile\profile.jsx ===
// src/modules/auth/Profile.jsx
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import api from '../apiconfig/apiconfig.jsx';

export default function Profile() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const navigate = useNavigate();

  async function fetchProfile() {
    try {
      const res = await api.get('/auth/session');
      const data = res.data;
      setUser(data.user);
    } catch (err) {
      console.error(err);
      setUser(null);
    } finally {
      setLoading(false);
    }
  }

  useEffect(() => {
    fetchProfile();
  }, []);

  async function handleLogout() {
    try {
      await api.post('/auth/logout');
      setUser(null);
      navigate('/sign-in');
    } catch (err) {
      console.error('Logout failed', err);
    }
  }

  if (loading) return <div>Loading...</div>;
  if (!user) return (
    <div className="p-6">
      <div>You are not logged in.</div>
      <button onClick={() => navigate('/sign-in')} className="mt-3 px-3 py-1 bg-blue-600 text-white rounded">Login</button>
    </div>
  );

  const loginTime = user.loginAt ? new Date(user.loginAt).toLocaleString() : '-';

  return (
    <div className="min-h-screen flex flex-col">
      {/* Main content */}
      <main className="max-w-md mx-auto p-6 mt-6">
        <h2 className="text-xl mb-3">Profile</h2>
        <div className="mb-2"><strong>ID:</strong> {user.id}</div>
        <div className="mb-2"><strong>Username:</strong> {user.username}</div>
        <div className="mb-2"><strong>Name:</strong> {user.name || '-'}</div>
        <div className="mb-2"><strong>Role:</strong> {user.role || '-'}</div>
        <div className="mb-4"><strong>Logged in at:</strong> {loginTime}</div>

        <div className="flex gap-3">
          <button onClick={handleLogout} className="px-4 py-2 bg-red-600 rounded text-white">Logout</button>
        </div>
      </main>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\hooks\useRecruiterProfile.js ===
import { useState, useEffect } from "react";
import api from "../components/apiconfig/apiconfig";

/**
 * Hook to check if recruiter profile exists and is complete
 * @returns {Object} { profile, loading, exists, isComplete }
 */
export function useRecruiterProfile() {
  const [profile, setProfile] = useState(null);
  const [loading, setLoading] = useState(true);
  const [exists, setExists] = useState(false);
  const [isComplete, setIsComplete] = useState(false);

  useEffect(() => {
    let mounted = true;

    async function checkProfile() {
      try {
        const res = await api.get("/recruiter-profile/recruiter");
        if (mounted) {
          const profileData = res.data?.recruiter || null;
          setProfile(profileData);
          setExists(!!profileData);

          // Check if profile is complete (has required fields)
          if (profileData) {
            const hasRequiredFields =
              profileData.company_name &&
              profileData.address_line1 &&
              profileData.city;
            setIsComplete(hasRequiredFields);
          } else {
            setIsComplete(false);
          }
        }
      } catch (err) {
        if (mounted) {
          // 404 means profile doesn't exist
          if (err?.response?.status === 404) {
            setProfile(null);
            setExists(false);
            setIsComplete(false);
          } else {
            // Other errors - assume profile doesn't exist
            setProfile(null);
            setExists(false);
            setIsComplete(false);
          }
        }
      } finally {
        if (mounted) setLoading(false);
      }
    }

    checkProfile();

    return () => {
      mounted = false;
    };
  }, []);

  return { profile, loading, exists, isComplete };
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\main.jsx ===
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App.jsx";
import "./index.css";
// Render the main application
ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\approval-management\approval-job-list.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function ApprovedJobs() {
  const [jobs, setJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedJob, setSelectedJob] = useState(null);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchJobs();
  }, []);

  const fetchJobs = async () => {
    try {
      const response = await api.get("/admin/auth/jobs?status=approved");
      setJobs(response.data.jobs || []);
    } catch (error) {
      console.error("Error fetching approved jobs:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (job) => {
    setSelectedJob(job);
    setShowModal(true);
  };

  const updateJobStatus = async (jobId, newStatus) => {
    try {
      await api.put(`/admin/auth/jobs/${jobId}/status`, {
        status: newStatus
      });
      
      // Remove from list immediately
      setJobs(prevJobs => prevJobs.filter(job => job.id !== jobId));
      
      // Refresh data
      fetchJobs();
    } catch (error) {
      console.error("Error updating job status:", error);
      alert("Failed to update job status. Please try again.");
    }
  };

  const formatExperience = (min, max) => {
    if (min == null && max == null) return "Fresher";
    if (min != null && max == null) return `${min}+ yrs`;
    if (min == null && max != null) return `Up to ${max} yrs`;
    return `${min}-${max} yrs`;
  };

  const formatSalary = (salary) => {
    if (!salary) return "Not specified";
    return salary;
  };

  const formatDate = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="max-w-full mx-auto">
      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <div>
          <h1 className="text-xl md:text-2xl font-bold text-gray-900">Approved Jobs</h1>
          <p className="text-sm md:text-base text-gray-600">
            Total {jobs.length} approved jobs
          </p>
        </div>
        <button
          onClick={fetchJobs}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto"
        >
          Refresh
        </button>
      </div>

      {/* Approved Jobs Table */}
      <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
        <div className="px-4 py-3 bg-green-600 border-b border-green-700">
          <h2 className="text-lg font-semibold text-white">
            Approved Jobs ({jobs.length})
          </h2>
          <p className="text-sm text-green-100">
            Jobs that have been approved and are live on the platform
          </p>
        </div>
        {jobs.length > 0 ? (
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Job Details
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Company & Recruiter
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Location
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Posted
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {jobs.map((job) => (
                  <tr key={job.id} className="hover:bg-green-50">
                    <td className="px-3 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900 truncate max-w-[200px]">
                          {job.title}
                        </div>
                        <div className="text-xs text-gray-500 capitalize">
                          {job.job_type} â¢ {formatExperience(job.min_experience, job.max_experience)}
                        </div>
                        <div className="text-xs text-gray-400 mt-1">
                          Salary: {formatSalary(job.salary)}
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[150px]">{job.company}</div>
                      <div className="text-xs text-gray-500 truncate max-w-[150px]">{job.recruiter_email}</div>
                    </td>
                    <td className="px-3 py-4 hidden lg:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">{job.location}</div>
                    </td>
                    <td className="px-3 py-4">
                      <div className="text-sm text-gray-900">
                        {formatDate(job.created_at)}
                      </div>
                    </td>
                    <td className="px-3 py-4 text-sm font-medium">
                      <div className="flex flex-col sm:flex-row gap-2">
                        <button
                          onClick={() => handleViewDetails(job)}
                          className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                        >
                          View
                        </button>
                        <button
                          onClick={() => updateJobStatus(job.id, 'closed')}
                          className="text-orange-600 hover:text-orange-900 border border-orange-200 hover:bg-orange-50 text-xs sm:text-sm px-2 py-1 rounded"
                        >
                          Close Job
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="text-center py-12">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-4">
              <svg className="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
            </div>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Approved Jobs</h3>
            <p className="text-gray-500">Approve jobs to see them listed here</p>
          </div>
        )}
      </div>

      {/* Job Details Modal */}
      {showModal && selectedJob && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Job Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Job Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Title</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.title}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedJob.job_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Vacancies</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.vacancies || 'Not specified'}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Experience Required</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {formatExperience(selectedJob.min_experience, selectedJob.max_experience)}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Salary</label>
                      <p className="text-gray-900 text-sm md:text-base">{formatSalary(selectedJob.salary)}</p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company & Location</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.company}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Location</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.location}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Posted By</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.recruiter_email}</p>
                      {selectedJob.company_name && (
                        <p className="text-sm text-gray-600">({selectedJob.company_name})</p>
                      )}
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Status</label>
                      <p className="text-gray-900">
                        <span className="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                          Approved
                        </span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Job Description</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                    {selectedJob.description || 'No description provided.'}
                  </p>
                </div>
              </div>

              <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Email</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_email ? (
                          <a href={`mailto:${selectedJob.contact_email}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_email}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Phone</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_phone ? (
                          <a href={`tel:${selectedJob.contact_phone}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_phone}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Interview Address</h3>
                  <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                      {selectedJob.interview_address || 'Not specified'}
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    updateJobStatus(selectedJob.id, 'closed');
                    setShowModal(false);
                  }}
                  className="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 text-sm md:text-base"
                >
                  Close Job
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\approval-management\closed-jobs-list.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function ClosedJobs() {
  const [jobs, setJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedJob, setSelectedJob] = useState(null);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchJobs();
  }, []);

  const fetchJobs = async () => {
    try {
      const response = await api.get("/admin/auth/jobs?status=closed");
      setJobs(response.data.jobs || []);
    } catch (error) {
      console.error("Error fetching closed jobs:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (job) => {
    setSelectedJob(job);
    setShowModal(true);
  };

  const updateJobStatus = async (jobId, newStatus) => {
    try {
      await api.put(`/admin/auth/jobs/${jobId}/status`, {
        status: newStatus
      });
      
      // Remove from list immediately
      setJobs(prevJobs => prevJobs.filter(job => job.id !== jobId));
      
      // Refresh data
      fetchJobs();
    } catch (error) {
      console.error("Error updating job status:", error);
      alert("Failed to update job status. Please try again.");
    }
  };

  const formatExperience = (min, max) => {
    if (min == null && max == null) return "Fresher";
    if (min != null && max == null) return `${min}+ yrs`;
    if (min == null && max != null) return `Up to ${max} yrs`;
    return `${min}-${max} yrs`;
  };

  const formatSalary = (salary) => {
    if (!salary) return "Not specified";
    return salary;
  };

  const formatDate = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="max-w-full mx-auto">
      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <div>
          <h1 className="text-xl md:text-2xl font-bold text-gray-900">Closed Jobs</h1>
          <p className="text-sm md:text-base text-gray-600">
            Total {jobs.length} closed jobs
          </p>
        </div>
        <button
          onClick={fetchJobs}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto"
        >
          Refresh
        </button>
      </div>

      {/* Closed Jobs Table */}
      <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
        <div className="px-4 py-3 bg-gray-600 border-b border-gray-700">
          <h2 className="text-lg font-semibold text-white">
            Closed Jobs ({jobs.length})
          </h2>
          <p className="text-sm text-gray-100">
            Jobs that are no longer accepting applications
          </p>
        </div>
        {jobs.length > 0 ? (
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Job Details
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Company & Recruiter
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Location
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Closed Date
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {jobs.map((job) => (
                  <tr key={job.id} className="hover:bg-gray-50">
                    <td className="px-3 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900 truncate max-w-[200px]">
                          {job.title}
                        </div>
                        <div className="text-xs text-gray-500 capitalize">
                          {job.job_type} â¢ {formatExperience(job.min_experience, job.max_experience)}
                        </div>
                        <div className="text-xs text-gray-400 mt-1">
                          Salary: {formatSalary(job.salary)}
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[150px]">{job.company}</div>
                      <div className="text-xs text-gray-500 truncate max-w-[150px]">{job.recruiter_email}</div>
                    </td>
                    <td className="px-3 py-4 hidden lg:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">{job.location}</div>
                    </td>
                    <td className="px-3 py-4">
                      <div className="text-sm text-gray-900">
                        {formatDate(job.updated_at || job.created_at)}
                      </div>
                    </td>
                    <td className="px-3 py-4 text-sm font-medium">
                      <div className="flex flex-col sm:flex-row gap-2">
                        <button
                          onClick={() => handleViewDetails(job)}
                          className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                        >
                          View
                        </button>
                        <button
                          onClick={() => updateJobStatus(job.id, 'approved')}
                          className="text-green-600 hover:text-green-900 border border-green-200 hover:bg-green-50 text-xs sm:text-sm px-2 py-1 rounded"
                        >
                          Re-open
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="text-center py-12">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4">
              <svg className="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
            </div>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Closed Jobs</h3>
            <p className="text-gray-500">Close jobs to see them listed here</p>
          </div>
        )}
      </div>

      {/* Job Details Modal */}
      {showModal && selectedJob && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Job Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Job Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Title</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.title}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedJob.job_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Vacancies</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.vacancies || 'Not specified'}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Experience Required</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {formatExperience(selectedJob.min_experience, selectedJob.max_experience)}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Salary</label>
                      <p className="text-gray-900 text-sm md:text-base">{formatSalary(selectedJob.salary)}</p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company & Location</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.company}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Location</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.location}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Posted By</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.recruiter_email}</p>
                      {selectedJob.company_name && (
                        <p className="text-sm text-gray-600">({selectedJob.company_name})</p>
                      )}
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Status</label>
                      <p className="text-gray-900">
                        <span className="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800">
                          Closed
                        </span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Job Description</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                    {selectedJob.description || 'No description provided.'}
                  </p>
                </div>
              </div>

              <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Email</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_email ? (
                          <a href={`mailto:${selectedJob.contact_email}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_email}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Phone</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_phone ? (
                          <a href={`tel:${selectedJob.contact_phone}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_phone}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Interview Address</h3>
                  <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                      {selectedJob.interview_address || 'Not specified'}
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    updateJobStatus(selectedJob.id, 'approved');
                    setShowModal(false);
                  }}
                  className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm md:text-base"
                >
                  Re-open Job
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\approval-management\pending-jobs-list.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function PendingJobs() {
  const [jobs, setJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedJob, setSelectedJob] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [showRejectModal, setShowRejectModal] = useState(false);
  const [rejectionReason, setRejectionReason] = useState("");
  const [processingJobId, setProcessingJobId] = useState(null);
  const [notification, setNotification] = useState({ show: false, message: "", type: "" });

  useEffect(() => {
    fetchJobs();
  }, []);

  const showNotification = (message, type = "success") => {
    setNotification({ show: true, message, type });
    setTimeout(() => {
      setNotification({ show: false, message: "", type: "" });
    }, 3000);
  };

  const fetchJobs = async () => {
    try {
      setLoading(true);
      const response = await api.get("/admin/auth/jobs?status=pending");
      setJobs(response.data.jobs || []);
    } catch (error) {
      console.error("Error fetching pending jobs:", error);
      showNotification("Failed to fetch pending jobs. Please try again.", "error");
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (job) => {
    setSelectedJob(job);
    setShowModal(true);
  };

  const handleApprove = async (jobId, jobTitle) => {
    if (!window.confirm(`Are you sure you want to approve "${jobTitle}"?`)) {
      return;
    }
    await updateJobStatus(jobId, 'approved');
  };

  const handleRejectClick = (job) => {
    setSelectedJob(job);
    setRejectionReason("");
    setShowRejectModal(true);
  };

  const handleRejectConfirm = async () => {
    if (!selectedJob) return;
    await updateJobStatus(selectedJob.id, 'rejected', rejectionReason);
    setShowRejectModal(false);
    setRejectionReason("");
  };

  const updateJobStatus = async (jobId, newStatus, reason = null) => {
    if (processingJobId === jobId) return; // Prevent double submission

    try {
      setProcessingJobId(jobId);

      const payload = { status: newStatus };
      if (reason && reason.trim()) {
        payload.rejection_reason = reason.trim();
      }

      const response = await api.put(`/admin/auth/jobs/${jobId}/status`, payload);

      // Optimize: Remove from list immediately without full refresh
      setJobs(prevJobs => prevJobs.filter(job => job.id !== jobId));

      // Show success message
      const action = newStatus === 'approved' ? 'approved' : 'rejected';
      showNotification(`Job ${action} successfully!`, "success");

      // Close modals if open
      if (showModal) setShowModal(false);
      if (showRejectModal) setShowRejectModal(false);

    } catch (error) {
      console.error("Error updating job status:", error);
      const errorMessage = error.response?.data?.message || "Failed to update job status. Please try again.";
      showNotification(errorMessage, "error");

      // Refresh on error to ensure consistency
      fetchJobs();
    } finally {
      setProcessingJobId(null);
    }
  };

  const formatExperience = (min, max) => {
    if (min == null && max == null) return "Fresher";
    if (min != null && max == null) return `${min}+ yrs`;
    if (min == null && max != null) return `Up to ${max} yrs`;
    return `${min}-${max} yrs`;
  };

  const formatSalary = (salary) => {
    if (!salary) return "Not specified";
    return salary;
  };

  const formatDate = (dateString) => {
    if (!dateString) return "Not specified";
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="max-w-full mx-auto">
      {/* Notification Toast */}
      {notification.show && (
        <div className={`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 ${notification.type === "success"
            ? "bg-green-500 text-white"
            : "bg-red-500 text-white"
          }`}>
          <span>{notification.message}</span>
          <button
            onClick={() => setNotification({ show: false, message: "", type: "" })}
            className="text-white hover:text-gray-200"
          >
            â
          </button>
        </div>
      )}

      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <div>
          <h1 className="text-xl md:text-2xl font-bold text-gray-900">Pending Jobs</h1>
          <p className="text-sm md:text-base text-gray-600">
            Total {jobs.length} jobs waiting for approval
          </p>
        </div>
        <button
          onClick={fetchJobs}
          disabled={loading}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto"
        >
          {loading ? "Refreshing..." : "Refresh"}
        </button>
      </div>

      {/* Pending Jobs Table */}
      <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
        <div className="px-4 py-3 bg-yellow-600 border-b border-yellow-700">
          <h2 className="text-lg font-semibold text-white">
            Pending Approval ({jobs.length})
          </h2>
          <p className="text-sm text-yellow-100">
            Jobs waiting for admin approval
          </p>
        </div>
        {jobs.length > 0 ? (
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Job Details
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Company
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Location
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Posted
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {jobs.map((job) => (
                  <tr key={job.id} className="hover:bg-yellow-50">
                    <td className="px-3 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900 truncate max-w-[200px]">
                          {job.title}
                        </div>
                        <div className="text-xs text-gray-500 capitalize">
                          {job.job_type} â¢ {formatExperience(job.min_experience, job.max_experience)}
                        </div>
                        <div className="text-xs text-gray-400 mt-1">
                          Salary: {formatSalary(job.salary)}
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[150px]">{job.company}</div>
                      <div className="text-xs text-gray-500 truncate max-w-[150px]">{job.recruiter_email}</div>
                    </td>
                    <td className="px-3 py-4 hidden lg:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">{job.location}</div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900">
                        {formatDate(job.created_at)}
                      </div>
                    </td>
                    <td className="px-3 py-4 text-sm font-medium">
                      <div className="flex flex-col sm:flex-row gap-2">
                        <button
                          onClick={() => handleViewDetails(job)}
                          disabled={processingJobId === job.id}
                          className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                          View
                        </button>
                        <button
                          onClick={() => handleApprove(job.id, job.title)}
                          disabled={processingJobId === job.id}
                          className="text-green-600 hover:text-green-900 border border-green-200 hover:bg-green-50 text-xs sm:text-sm px-2 py-1 rounded disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"
                        >
                          {processingJobId === job.id ? (
                            <>
                              <div className="animate-spin rounded-full h-3 w-3 border-b-2 border-green-600"></div>
                              Processing...
                            </>
                          ) : (
                            "Approve"
                          )}
                        </button>
                        <button
                          onClick={() => handleRejectClick(job)}
                          disabled={processingJobId === job.id}
                          className="text-red-600 hover:text-red-900 border border-red-200 hover:bg-red-50 text-xs sm:text-sm px-2 py-1 rounded disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                          Reject
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="text-center py-12">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-yellow-100 mb-4">
              <svg className="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Pending Jobs</h3>
            <p className="text-gray-500">All jobs have been reviewed</p>
          </div>
        )}
      </div>

      {/* Job Details Modal */}
      {showModal && selectedJob && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Job Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Job Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Title</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.title}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedJob.job_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Vacancies</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.vacancies || 'Not specified'}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Experience Required</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {formatExperience(selectedJob.min_experience, selectedJob.max_experience)}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Salary</label>
                      <p className="text-gray-900 text-sm md:text-base">{formatSalary(selectedJob.salary)}</p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company & Location</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.company}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Location</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.location}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Posted By</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.recruiter_email}</p>
                      {selectedJob.company_name && (
                        <p className="text-sm text-gray-600">({selectedJob.company_name})</p>
                      )}
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Status</label>
                      <p className="text-gray-900">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${selectedJob.status === 'approved' ? 'bg-green-100 text-green-800' :
                            selectedJob.status === 'rejected' ? 'bg-red-100 text-red-800' :
                              selectedJob.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                                'bg-gray-100 text-gray-800'
                          }`}>
                          {selectedJob.status.charAt(0).toUpperCase() + selectedJob.status.slice(1)}
                        </span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Job Description</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                    {selectedJob.description || 'No description provided.'}
                  </p>
                </div>
              </div>

              <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Email</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_email ? (
                          <a href={`mailto:${selectedJob.contact_email}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_email}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Phone</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_phone ? (
                          <a href={`tel:${selectedJob.contact_phone}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_phone}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Interview Address</h3>
                  <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                      {selectedJob.interview_address || 'Not specified'}
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    handleApprove(selectedJob.id, selectedJob.title);
                    setShowModal(false);
                  }}
                  disabled={processingJobId === selectedJob.id}
                  className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base flex items-center gap-2"
                >
                  {processingJobId === selectedJob.id ? (
                    <>
                      <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                      Processing...
                    </>
                  ) : (
                    "Approve Job"
                  )}
                </button>
                <button
                  onClick={() => {
                    setShowModal(false);
                    handleRejectClick(selectedJob);
                  }}
                  disabled={processingJobId === selectedJob.id}
                  className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base"
                >
                  Reject Job
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  disabled={processingJobId === selectedJob.id}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Rejection Reason Modal */}
      {showRejectModal && selectedJob && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-xl w-full max-w-md">
            <div className="p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Reject Job</h2>
                <button
                  onClick={() => {
                    setShowRejectModal(false);
                    setRejectionReason("");
                  }}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>

              <div className="mb-4">
                <p className="text-sm text-gray-600 mb-2">
                  Are you sure you want to reject <span className="font-semibold">"{selectedJob.title}"</span>?
                </p>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Rejection Reason (Optional)
                </label>
                <textarea
                  value={rejectionReason}
                  onChange={(e) => setRejectionReason(e.target.value)}
                  placeholder="Provide a reason for rejection (optional)..."
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none"
                  rows="4"
                />
              </div>

              <div className="flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    setShowRejectModal(false);
                    setRejectionReason("");
                  }}
                  disabled={processingJobId === selectedJob.id}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base"
                >
                  Cancel
                </button>
                <button
                  onClick={handleRejectConfirm}
                  disabled={processingJobId === selectedJob.id}
                  className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm md:text-base flex items-center justify-center gap-2"
                >
                  {processingJobId === selectedJob.id ? (
                    <>
                      <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                      Processing...
                    </>
                  ) : (
                    "Confirm Rejection"
                  )}
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\approval-management\rejected-jobs.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function RejectedJobs() {
  const [jobs, setJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedJob, setSelectedJob] = useState(null);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchJobs();
  }, []);

  const fetchJobs = async () => {
    try {
      const response = await api.get("/admin/auth/jobs?status=rejected");
      setJobs(response.data.jobs || []);
    } catch (error) {
      console.error("Error fetching rejected jobs:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (job) => {
    setSelectedJob(job);
    setShowModal(true);
  };

  const updateJobStatus = async (jobId, newStatus) => {
    try {
      await api.put(`/admin/auth/jobs/${jobId}/status`, {
        status: newStatus
      });
      
      // Remove from list immediately
      setJobs(prevJobs => prevJobs.filter(job => job.id !== jobId));
      
      // Refresh data
      fetchJobs();
    } catch (error) {
      console.error("Error updating job status:", error);
      alert("Failed to update job status. Please try again.");
    }
  };

  const formatExperience = (min, max) => {
    if (min == null && max == null) return "Fresher";
    if (min != null && max == null) return `${min}+ yrs`;
    if (min == null && max != null) return `Up to ${max} yrs`;
    return `${min}-${max} yrs`;
  };

  const formatSalary = (salary) => {
    if (!salary) return "Not specified";
    return salary;
  };

  const formatDate = (dateString) => {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="max-w-full mx-auto">
      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <div>
          <h1 className="text-xl md:text-2xl font-bold text-gray-900">Rejected Jobs</h1>
          <p className="text-sm md:text-base text-gray-600">
            Total {jobs.length} rejected jobs
          </p>
        </div>
        <button
          onClick={fetchJobs}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto"
        >
          Refresh
        </button>
      </div>

      {/* Rejected Jobs Table */}
      <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
        <div className="px-4 py-3 bg-red-600 border-b border-red-700">
          <h2 className="text-lg font-semibold text-white">
            Rejected Jobs ({jobs.length})
          </h2>
          <p className="text-sm text-red-100">
            Jobs that have been rejected by admin
          </p>
        </div>
        {jobs.length > 0 ? (
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Job Details
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Company & Recruiter
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Location
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Rejected Date
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {jobs.map((job) => (
                  <tr key={job.id} className="hover:bg-red-50">
                    <td className="px-3 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900 truncate max-w-[200px]">
                          {job.title}
                        </div>
                        <div className="text-xs text-gray-500 capitalize">
                          {job.job_type} â¢ {formatExperience(job.min_experience, job.max_experience)}
                        </div>
                        <div className="text-xs text-gray-400 mt-1">
                          Salary: {formatSalary(job.salary)}
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[150px]">{job.company}</div>
                      <div className="text-xs text-gray-500 truncate max-w-[150px]">{job.recruiter_email}</div>
                    </td>
                    <td className="px-3 py-4 hidden lg:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">{job.location}</div>
                    </td>
                    <td className="px-3 py-4">
                      <div className="text-sm text-gray-900">
                        {formatDate(job.updated_at || job.created_at)}
                      </div>
                    </td>
                    <td className="px-3 py-4 text-sm font-medium">
                      <div className="flex flex-col sm:flex-row gap-2">
                        <button
                          onClick={() => handleViewDetails(job)}
                          className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                        >
                          View
                        </button>
                        <button
                          onClick={() => updateJobStatus(job.id, 'approved')}
                          className="text-green-600 hover:text-green-900 border border-green-200 hover:bg-green-50 text-xs sm:text-sm px-2 py-1 rounded"
                        >
                          Approve
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="text-center py-12">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4">
              <svg className="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Rejected Jobs</h3>
            <p className="text-gray-500">No jobs have been rejected yet</p>
          </div>
        )}
      </div>

      {/* Job Details Modal */}
      {showModal && selectedJob && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Job Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Job Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Title</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.title}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Job Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedJob.job_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Vacancies</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.vacancies || 'Not specified'}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Experience Required</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {formatExperience(selectedJob.min_experience, selectedJob.max_experience)}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Salary</label>
                      <p className="text-gray-900 text-sm md:text-base">{formatSalary(selectedJob.salary)}</p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company & Location</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.company}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Location</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.location}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Posted By</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedJob.recruiter_email}</p>
                      {selectedJob.company_name && (
                        <p className="text-sm text-gray-600">({selectedJob.company_name})</p>
                      )}
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Status</label>
                      <p className="text-gray-900">
                        <span className="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">
                          Rejected
                        </span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Job Description</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                    {selectedJob.description || 'No description provided.'}
                  </p>
                </div>
              </div>

              <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Email</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_email ? (
                          <a href={`mailto:${selectedJob.contact_email}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_email}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Contact Phone</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedJob.contact_phone ? (
                          <a href={`tel:${selectedJob.contact_phone}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_phone}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Interview Address</h3>
                  <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base whitespace-pre-line">
                      {selectedJob.interview_address || 'Not specified'}
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    updateJobStatus(selectedJob.id, 'approved');
                    setShowModal(false);
                  }}
                  className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm md:text-base"
                >
                  Approve Job
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\candidate\candidate-list.jsx ===
import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function AdminUsers() {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedUser, setSelectedUser] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const navigate = useNavigate();

  useEffect(() => {
    fetchUsers();
  }, []);
// Fetch users from API
  const fetchUsers = async () => {
    try {
      const response = await api.get("/admin/auth/users");
      setUsers(response.data.users || []);
    } catch (error) {
      console.error("Error fetching users:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (user) => {
    setSelectedUser(user);
    setShowModal(true);
  };
// Navigate back to dashboard
  const handleBack = () => {
    navigate("/admin");
  };

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }
// Main render
  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex justify-between items-center mb-6">
          <div>
            <button
              onClick={handleBack}
              className="flex items-center text-blue-600 hover:text-blue-700 mb-2"
            >
              â Back to Dashboard
            </button>
            <h1 className="text-2xl font-bold text-gray-900">Manage Users</h1>
            <p className="text-gray-600">Total {users.length} users</p>
          </div>
          <button
            onClick={fetchUsers}
            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
          >
            Refresh
          </button>
        </div>

        {/* Users Table */}
        <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    User
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Contact
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Location
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Experience
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Education
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {users.map((user) => (
                  <tr key={user.user_id} className="hover:bg-gray-50">
                    <td className="px-6 py-4 whitespace-nowrap">
                      <div>
                        <div className="text-sm font-medium text-gray-900">
                          {user.full_name}
                        </div>
                        <div className="text-sm text-gray-500">
                          @{user.username}
                        </div>
                      </div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <div className="text-sm text-gray-900">{user.email}</div>
                      <div className="text-sm text-gray-500">{user.phone}</div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <div className="text-sm text-gray-900">
                        {user.city}, {user.state}
                      </div>
                      <div className="text-sm text-gray-500">{user.country}</div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                      {user.experience_years || 0} years
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                      {user.highest_education || 'Not specified'}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <button
                        onClick={() => handleViewDetails(user)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        View Details
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          
          {users.length === 0 && (
            <div className="text-center py-12">
              <p className="text-gray-500">No users found</p>
            </div>
          )}
        </div>
      </div>

      {/* User Details Modal */}
      {showModal && selectedUser && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div className="p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold text-gray-900">User Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <h3 className="text-lg font-semibold mb-3">Personal Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-sm font-medium text-gray-500">Full Name</label>
                      <p className="text-gray-900">{selectedUser.full_name}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Username</label>
                      <p className="text-gray-900">@{selectedUser.username}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Email</label>
                      <p className="text-gray-900">{selectedUser.email}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Phone</label>
                      <p className="text-gray-900">{selectedUser.phone || 'Not provided'}</p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-lg font-semibold mb-3">Location & Professional</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-sm font-medium text-gray-500">Location</label>
                      <p className="text-gray-900">
                        {[selectedUser.city, selectedUser.state, selectedUser.country]
                          .filter(Boolean).join(', ') || 'Not specified'}
                      </p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Experience</label>
                      <p className="text-gray-900">{selectedUser.experience_years || 0} years</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Education</label>
                      <p className="text-gray-900">{selectedUser.highest_education || 'Not specified'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Member Since</label>
                      <p className="text-gray-900">
                        {new Date(selectedUser.created_at).toLocaleDateString()}
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6 pt-6 border-t">
                <h3 className="text-lg font-semibold mb-3">Links</h3>
                <div className="space-y-2">
                  <div>
                    <label className="text-sm font-medium text-gray-500">LinkedIn</label>
                    <p className="text-gray-900">
                      {selectedUser.linkedin_url ? (
                        <a href={selectedUser.linkedin_url} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">
                          {selectedUser.linkedin_url}
                        </a>
                      ) : 'Not provided'}
                    </p>
                  </div>
                  <div>
                    <label className="text-sm font-medium text-gray-500">Portfolio</label>
                    <p className="text-gray-900">
                      {selectedUser.portfolio_url ? (
                        <a href={selectedUser.portfolio_url} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">
                          {selectedUser.portfolio_url}
                        </a>
                      ) : 'Not provided'}
                    </p>
                  </div>
                  <div>
                    <label className="text-sm font-medium text-gray-500">Resume</label>
                    <p className="text-gray-900">
                      {selectedUser.resume_path ? 'Available' : 'Not uploaded'}
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 flex justify-end">
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\dashboard\dashboard.jsx ===
import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function AdminDashboard() {
  const [stats, setStats] = useState({
    totalUsers: 0,
    totalRecruiters: 0,
    totalJobs: 0,
    verifiedRecruiters: 0
  });
  const [recentData, setRecentData] = useState({
    recentUsers: [],
    recentRecruiters: [],
    recentJobs: []
  });
  const [loading, setLoading] = useState(true);
  const navigate = useNavigate();

  useEffect(() => {
    fetchDashboardData();
  }, []);

  const fetchDashboardData = async () => {
    try {
      setLoading(true);
      
      const [usersRes, recruitersRes, jobsRes] = await Promise.all([
        api.get("/admin/auth/users"),
        api.get("/admin/auth/recruiters"), 
        api.get("/admin/auth/jobs")
      ]);

      const users = usersRes.data.users || [];
      const recruiters = recruitersRes.data.recruiters || [];
      const jobs = jobsRes.data.jobs || [];
// Update stats and recent data
      setStats({
        totalUsers: users.length,
        totalRecruiters: recruiters.length,
        totalJobs: jobs.length,
        verifiedRecruiters: recruiters.filter(r => r.verified).length
      });

      setRecentData({
        recentUsers: users.slice(0, 5),
        recentRecruiters: recruiters.slice(0, 5),
        recentJobs: jobs.slice(0, 5)
      });

    } catch (error) {
      console.error("Error fetching dashboard data:", error);
    } finally {
      setLoading(false);
    }
  };
// Logout handler
  const handleLogout = async () => {
    try {
      await api.post("/admin/auth/logout");
      window.location.href = "/admin/signin";
    } catch (error) {
      console.error("Logout error:", error);
    }
  };
// Navigation handler for viewing all items
  const handleViewAll = (type) => {
    navigate(`/admin/${type}`);
  };

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
          <p className="mt-4 text-gray-600">Loading admin dashboard...</p>
        </div>
      </div>
    );
  }
// Main dashboard layout
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Header */}
      <header className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center py-4">
            <div className="flex items-center">
              <h1 className="text-2xl font-bold text-gray-900">Admin Dashboard</h1>
              <span className="ml-3 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full">Admin</span>
            </div>
            <div className="flex items-center space-x-4">
              <button
                onClick={fetchDashboardData}
                className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium"
              >
                Refresh Data
              </button>
              <button
                onClick={handleLogout}
                className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        {/* Stats Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          {/* Total Users - Clickable */}
          <div 
            onClick={() => handleViewAll('users')}
            className="bg-white p-6 rounded-xl shadow-sm border cursor-pointer hover:shadow-md transition-shadow"
          >
            <div className="flex items-center">
              <div className="p-3 bg-blue-100 rounded-lg">
                <svg className="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" />
                </svg>
              </div>
              <div className="ml-4">
                <p className="text-sm font-medium text-gray-600">Total Users</p>
                <p className="text-2xl font-semibold text-gray-900">{stats.totalUsers}</p>
                <p className="text-xs text-blue-600 mt-1">Click to view all â</p>
              </div>
            </div>
          </div>

          {/* Total Jobs - Clickable */}
          <div 
            onClick={() => handleViewAll('jobs')}
            className="bg-white p-6 rounded-xl shadow-sm border cursor-pointer hover:shadow-md transition-shadow"
          >
            <div className="flex items-center">
              <div className="p-3 bg-green-100 rounded-lg">
                <svg className="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
              </div>
              <div className="ml-4">
                <p className="text-sm font-medium text-gray-600">Total Jobs</p>
                <p className="text-2xl font-semibold text-gray-900">{stats.totalJobs}</p>
                <p className="text-xs text-green-600 mt-1">Click to view all â</p>
              </div>
            </div>
          </div>

          {/* Recruiters - Clickable */}
          <div 
            onClick={() => handleViewAll('recruiters')}
            className="bg-white p-6 rounded-xl shadow-sm border cursor-pointer hover:shadow-md transition-shadow"
          >
            <div className="flex items-center">
              <div className="p-3 bg-purple-100 rounded-lg">
                <svg className="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              </div>
              <div className="ml-4">
                <p className="text-sm font-medium text-gray-600">Recruiters</p>
                <p className="text-2xl font-semibold text-gray-900">{stats.totalRecruiters}</p>
                <p className="text-xs text-purple-600 mt-1">Click to view all â</p>
              </div>
            </div>
          </div>

          <div className="bg-white p-6 rounded-xl shadow-sm border">
            <div className="flex items-center">
              <div className="p-3 bg-orange-100 rounded-lg">
                <svg className="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                </svg>
              </div>
              <div className="ml-4">
                <p className="text-sm font-medium text-gray-600">Verified Recruiters</p>
                <p className="text-2xl font-semibold text-gray-900">{stats.verifiedRecruiters}</p>
              </div>
            </div>
          </div>
        </div>

        {/* Rest of the dashboard remains the same */}
        {/* ... */}
      </main>
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\jobs\jobs-list.jsx ===
import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function AdminJobs() {
  const [jobs, setJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedJob, setSelectedJob] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [filter, setFilter] = useState("all");
  const navigate = useNavigate();

  useEffect(() => {
    fetchJobs();
  }, []);
// Fetch jobs from API
  const fetchJobs = async () => {
    try {
      const response = await api.get("/admin/auth/jobs");
      setJobs(response.data.jobs || []);
    } catch (error) {
      console.error("Error fetching jobs:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (job) => {
    setSelectedJob(job);
    setShowModal(true);
  };
// Navigate back to dashboard
  const handleBack = () => {
    navigate("/admin");
  };

  const formatSalary = (salary) => {
    if (!salary) return "Not specified";
    return salary;
  };
// Format experience range
  const formatExperience = (min, max) => {
    if (min == null && max == null) return "Fresher";
    if (min != null && max == null) return `${min}+ yrs`;
    if (min == null && max != null) return `Up to ${max} yrs`;
    return `${min}-${max} yrs`;
  };
// Filter jobs based on selected filter
  const filteredJobs = jobs.filter(job => {
    if (filter === "all") return true;
    if (filter === "full-time") return job.job_type?.toLowerCase().includes("full");
    if (filter === "part-time") return job.job_type?.toLowerCase().includes("part");
    if (filter === "contract") return job.job_type?.toLowerCase().includes("contract");
    return true;
  });

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }
// Main render
  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex justify-between items-center mb-6">
          <div>
            <button
              onClick={handleBack}
              className="flex items-center text-blue-600 hover:text-blue-700 mb-2"
            >
              â Back to Dashboard
            </button>
            <h1 className="text-2xl font-bold text-gray-900">Manage Jobs</h1>
            <p className="text-gray-600">Total {jobs.length} jobs posted</p>
          </div>
          <button
            onClick={fetchJobs}
            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
          >
            Refresh
          </button>
        </div>

        {/* Filter */}
        <div className="mb-6">
          <div className="flex space-x-2">
            <button
              onClick={() => setFilter("all")}
              className={`px-4 py-2 rounded-lg text-sm font-medium ${
                filter === "all" 
                  ? "bg-blue-600 text-white" 
                  : "bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"
              }`}
            >
              All Jobs
            </button>
            <button
              onClick={() => setFilter("full-time")}
              className={`px-4 py-2 rounded-lg text-sm font-medium ${
                filter === "full-time" 
                  ? "bg-blue-600 text-white" 
                  : "bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"
              }`}
            >
              Full-time
            </button>
            <button
              onClick={() => setFilter("part-time")}
              className={`px-4 py-2 rounded-lg text-sm font-medium ${
                filter === "part-time" 
                  ? "bg-blue-600 text-white" 
                  : "bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"
              }`}
            >
              Part-time
            </button>
            <button
              onClick={() => setFilter("contract")}
              className={`px-4 py-2 rounded-lg text-sm font-medium ${
                filter === "contract" 
                  ? "bg-blue-600 text-white" 
                  : "bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"
              }`}
            >
              Contract
            </button>
          </div>
        </div>

        {/* Jobs Table */}
        <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Job Details
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Company & Recruiter
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Location
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Experience & Salary
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Posted
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {filteredJobs.map((job) => (
                  <tr key={job.id} className="hover:bg-gray-50">
                    <td className="px-6 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900">
                          {job.title}
                        </div>
                        <div className="text-sm text-gray-500 capitalize">
                          {job.job_type}
                        </div>
                        <div className="text-xs text-gray-400 mt-1">
                          Vacancies: {job.vacancies || 'Not specified'}
                        </div>
                      </div>
                    </td>
                    <td className="px-6 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900">
                          {job.company}
                        </div>
                        <div className="text-sm text-gray-500">
                          {job.recruiter_email}
                        </div>
                        {job.company_name && (
                          <div className="text-xs text-gray-400">
                            by {job.company_name}
                          </div>
                        )}
                      </div>
                    </td>
                    <td className="px-6 py-4">
                      <div className="text-sm text-gray-900">
                        {job.location}
                      </div>
                    </td>
                    <td className="px-6 py-4">
                      <div className="text-sm text-gray-900">
                        {formatExperience(job.min_experience, job.max_experience)}
                      </div>
                      <div className="text-sm text-gray-500">
                        {formatSalary(job.salary)}
                      </div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                      {new Date(job.created_at).toLocaleDateString()}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <button
                        onClick={() => handleViewDetails(job)}
                        className="text-blue-600 hover:text-blue-900 mr-3"
                      >
                        View Details
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          
          {filteredJobs.length === 0 && (
            <div className="text-center py-12">
              <p className="text-gray-500">No jobs found</p>
            </div>
          )}
        </div>
      </div>

      {/* Job Details Modal */}
      {showModal && selectedJob && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
          <div className="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div className="p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold text-gray-900">Job Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <h3 className="text-lg font-semibold mb-3">Job Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-sm font-medium text-gray-500">Job Title</label>
                      <p className="text-gray-900">{selectedJob.title}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Job Type</label>
                      <p className="text-gray-900 capitalize">{selectedJob.job_type}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Vacancies</label>
                      <p className="text-gray-900">{selectedJob.vacancies || 'Not specified'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Experience Required</label>
                      <p className="text-gray-900">
                        {formatExperience(selectedJob.min_experience, selectedJob.max_experience)}
                      </p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Salary</label>
                      <p className="text-gray-900">{formatSalary(selectedJob.salary)}</p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-lg font-semibold mb-3">Company & Location</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-sm font-medium text-gray-500">Company</label>
                      <p className="text-gray-900">{selectedJob.company}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Location</label>
                      <p className="text-gray-900">{selectedJob.location}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Posted By</label>
                      <p className="text-gray-900">{selectedJob.recruiter_email}</p>
                      {selectedJob.company_name && (
                        <p className="text-sm text-gray-600">({selectedJob.company_name})</p>
                      )}
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Posted Date</label>
                      <p className="text-gray-900">
                        {new Date(selectedJob.created_at).toLocaleDateString()}
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              {/* Job Description */}
              <div className="mt-6">
                <h3 className="text-lg font-semibold mb-3">Job Description</h3>
                <div className="bg-gray-50 p-4 rounded-lg">
                  <p className="text-gray-900 whitespace-pre-line">
                    {selectedJob.description || 'No description provided.'}
                  </p>
                </div>
              </div>

              {/* Contact Information */}
              <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <h3 className="text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-sm font-medium text-gray-500">Contact Email</label>
                      <p className="text-gray-900">
                        {selectedJob.contact_email ? (
                          <a href={`mailto:${selectedJob.contact_email}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_email}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-sm font-medium text-gray-500">Contact Phone</label>
                      <p className="text-gray-900">
                        {selectedJob.contact_phone ? (
                          <a href={`tel:${selectedJob.contact_phone}`} className="text-blue-600 hover:underline">
                            {selectedJob.contact_phone}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                  </div>
                </div>

                {/* Interview Address */}
                <div>
                  <h3 className="text-lg font-semibold mb-3">Interview Address</h3>
                  <div className="bg-gray-50 p-4 rounded-lg">
                    <p className="text-gray-900 whitespace-pre-line">
                      {selectedJob.interview_address || 'Not specified'}
                    </p>
                  </div>
                </div>
              </div>

              <div className="mt-6 flex justify-end">
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\recruiter\pending-recruiters.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function PendingRecruiters() {
  const [recruiters, setRecruiters] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedRecruiter, setSelectedRecruiter] = useState(null);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchRecruiters();
  }, []);

  const fetchRecruiters = async () => {
    try {
      const response = await api.get("/admin/auth/recruiters");
      // Filter only pending recruiters
      const pendingRecruiters = (response.data.recruiters || []).filter(
        recruiter => recruiter.verified === 0 || recruiter.verified === false
      );
      setRecruiters(pendingRecruiters);
    } catch (error) {
      console.error("Error fetching recruiters:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (recruiter) => {
    setSelectedRecruiter(recruiter);
    setShowModal(true);
  };

  const toggleVerification = async (recruiterId, currentVerified) => {
    try {
      // Always verify (set to 1) since this is pending recruiters page
      await api.put(`/admin/auth/recruiters/${recruiterId}/verify`, {
        verified: 1
      });
      
      // Remove from list immediately
      setRecruiters(prevRecruiters => 
        prevRecruiters.filter(recruiter => recruiter.user_id !== recruiterId)
      );
      
      // Refresh data
      fetchRecruiters();
    } catch (error) {
      console.error("Error updating verification:", error);
      alert("Failed to verify recruiter. Please try again.");
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="max-w-full mx-auto">
      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <div>
          <h1 className="text-xl md:text-2xl font-bold text-gray-900">Pending Recruiters</h1>
          <p className="text-sm md:text-base text-gray-600">
            Total {recruiters.length} recruiters waiting for verification
          </p>
        </div>
        <button
          onClick={fetchRecruiters}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto"
        >
          Refresh
        </button>
      </div>

      {/* Pending Recruiters Table */}
      <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
        <div className="px-4 py-3 bg-blue-600 border-b border-blue-700">
          <h2 className="text-lg font-semibold text-white">
            Pending Verification ({recruiters.length})
          </h2>
          <p className="text-sm text-blue-100">
            Recruiters waiting for verification approval
          </p>
        </div>
        {recruiters.length > 0 ? (
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Company
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Contact
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Type
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Location
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {recruiters.map((recruiter) => (
                  <tr key={recruiter.user_id} className="hover:bg-gray-50">
                    <td className="px-3 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900 truncate max-w-[150px]">
                          {recruiter.company_name}
                        </div>
                        <div className="text-xs text-gray-500 truncate max-w-[150px]">
                          {recruiter.company_website && (
                            <a 
                              href={recruiter.company_website} 
                              target="_blank" 
                              rel="noopener noreferrer"
                              className="text-blue-600 hover:underline"
                            >
                              {recruiter.company_website}
                            </a>
                          )}
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">{recruiter.email}</div>
                      <div className="text-xs text-gray-500 truncate max-w-[120px]">@{recruiter.username}</div>
                    </td>
                    <td className="px-3 py-4 text-sm text-gray-900 capitalize hidden lg:table-cell">
                      {recruiter.company_type}
                    </td>
                    <td className="px-3 py-4 hidden lg:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">
                        {recruiter.city}, {recruiter.state}
                      </div>
                      <div className="text-xs text-gray-500 truncate max-w-[120px]">{recruiter.country}</div>
                    </td>
                    <td className="px-3 py-4 text-sm font-medium">
                      <div className="flex flex-col sm:flex-row gap-2">
                        <button
                          onClick={() => handleViewDetails(recruiter)}
                          className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                        >
                          View
                        </button>
                        <button
                          onClick={() => toggleVerification(recruiter.user_id, recruiter.verified)}
                          className="text-green-600 hover:text-green-900 border border-green-200 hover:bg-green-50 text-xs sm:text-sm px-2 py-1 rounded"
                        >
                          Verify
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="text-center py-12">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 mb-4">
              <svg className="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
            </div>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Pending Recruiters</h3>
            <p className="text-gray-500">All recruiters have been verified</p>
          </div>
        )}
      </div>

      {/* Recruiter Details Modal */}
      {showModal && selectedRecruiter && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Recruiter Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company Name</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.company_name}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Website</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedRecruiter.company_website ? (
                          <a href={selectedRecruiter.company_website} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">
                            {selectedRecruiter.company_website}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedRecruiter.company_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Verification Status</label>
                      <p className="text-gray-900">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                          selectedRecruiter.verified === 1 || selectedRecruiter.verified === true
                            ? 'bg-green-100 text-green-800' 
                            : 'bg-yellow-100 text-yellow-800'
                        }`}>
                          {selectedRecruiter.verified === 1 || selectedRecruiter.verified === true ? 'Verified' : 'Pending Verification'}
                        </span>
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Email</label>
                      <p className="text-gray-900 text-sm md:text-base break-all">{selectedRecruiter.email}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Username</label>
                      <p className="text-gray-900 text-sm md:text-base">@{selectedRecruiter.username}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Member Since</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {new Date(selectedRecruiter.created_at).toLocaleDateString()}
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Address</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.address_line1}</p>
                  {selectedRecruiter.address_line2 && (
                    <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.address_line2}</p>
                  )}
                  <p className="text-gray-900 text-sm md:text-base">
                    {[selectedRecruiter.city, selectedRecruiter.state, selectedRecruiter.country, selectedRecruiter.pincode]
                      .filter(Boolean).join(', ')}
                  </p>
                </div>
              </div>

              {selectedRecruiter.verification_notes && (
                <div className="mt-6">
                  <h3 className="text-base md:text-lg font-semibold mb-3">Verification Notes</h3>
                  <div className="bg-yellow-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.verification_notes}</p>
                  </div>
                </div>
              )}

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    toggleVerification(selectedRecruiter.user_id, selectedRecruiter.verified);
                    setShowModal(false);
                  }}
                  className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm md:text-base"
                >
                  Verify
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\recruiter\recruiters-list.jsx ===
import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function AdminRecruiters() {
  const [recruiters, setRecruiters] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedRecruiter, setSelectedRecruiter] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [activeTab, setActiveTab] = useState("all"); // "all", "pending", "verified"
  const navigate = useNavigate();

  useEffect(() => {
    fetchRecruiters();
  }, []);

  const fetchRecruiters = async () => {
    try {
      const response = await api.get("/admin/auth/recruiters");
      setRecruiters(response.data.recruiters || []);
    } catch (error) {
      console.error("Error fetching recruiters:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (recruiter) => {
    setSelectedRecruiter(recruiter);
    setShowModal(true);
  };

  const handleBack = () => {
    navigate("/admin");
  };

  const toggleVerification = async (recruiterId, currentVerified) => {
    try {
      const currentVerifiedNum = currentVerified === true || currentVerified === 1 ? 1 : 0;
      const newVerifiedStatus = currentVerifiedNum === 1 ? 0 : 1;
      
      await api.put(`/admin/auth/recruiters/${recruiterId}/verify`, {
        verified: newVerifiedStatus
      });
      
      setRecruiters(prevRecruiters => 
        prevRecruiters.map(recruiter => 
          recruiter.user_id === recruiterId 
            ? { ...recruiter, verified: newVerifiedStatus }
            : recruiter
        )
      );
      
      fetchRecruiters();
    } catch (error) {
      console.error("Error updating verification:", error);
      alert("Failed to update verification status. Please try again.");
    }
  };

  // Filter recruiters based on active tab
  const filteredRecruiters = () => {
    switch(activeTab) {
      case "pending":
        return recruiters.filter(recruiter => 
          recruiter.verified === 0 || recruiter.verified === false
        );
      case "verified":
        return recruiters.filter(recruiter => 
          recruiter.verified === 1 || recruiter.verified === true
        );
      default:
        return recruiters;
    }
  };

  const getTabStats = () => {
    const total = recruiters.length;
    const verified = recruiters.filter(r => r.verified === 1 || r.verified === true).length;
    const pending = total - verified;
    
    return { total, verified, pending };
  };

  const stats = getTabStats();

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gray-50">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50 p-4 md:p-6">
      <div className="max-w-full mx-auto">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
          <div>
            <button
              onClick={handleBack}
              className="flex items-center text-blue-600 hover:text-blue-700 mb-2"
            >
              â Back to Dashboard
            </button>
            <h1 className="text-xl md:text-2xl font-bold text-gray-900">Manage Recruiters</h1>
            <p className="text-sm md:text-base text-gray-600">
              Total {stats.total} recruiters â¢ {stats.verified} verified â¢ {stats.pending} pending
            </p>
          </div>
          <button
            onClick={fetchRecruiters}
            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto"
          >
            Refresh
          </button>
        </div>

        {/* Tabs */}
        <div className="mb-6">
          <div className="border-b border-gray-200">
            <nav className="-mb-px flex space-x-4 md:space-x-8 overflow-x-auto">
              <button
                onClick={() => setActiveTab("all")}
                className={`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm md:text-base ${
                  activeTab === "all"
                    ? "border-blue-500 text-blue-600"
                    : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
                }`}
              >
                All Recruiters ({stats.total})
              </button>
              <button
                onClick={() => setActiveTab("pending")}
                className={`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm md:text-base ${
                  activeTab === "pending"
                    ? "border-yellow-500 text-white bg-blue-800 rounded-t-lg px-3"
                    : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
                }`}
              >
                Pending Verification ({stats.pending})
              </button>
              <button
                onClick={() => setActiveTab("verified")}
                className={`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm md:text-base ${
                  activeTab === "verified"
                    ? "border-blue-800 text-green-600"
                    : "border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"
                }`}
              >
                Verified ({stats.verified})
              </button>
            </nav>
          </div>
        </div>

        {/* Tab Content */}
        <div className="space-y-6">
          {/* Pending Recruiters Table */}
          {activeTab === "pending" && (
            <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
              <div className="px-4 py-3 bg-yellow-50 border-b border-yellow-100">
                <h2 className="text-lg font-semibold text-yellow-800">
                  Pending Verification ({stats.pending})
                </h2>
                <p className="text-sm text-yellow-600">
                  Recruiters waiting for verification approval
                </p>
              </div>
              {filteredRecruiters().length > 0 ? (
                <div className="overflow-x-auto">
                  <table className="min-w-full divide-y divide-gray-200">
                    <thead className="bg-gray-50">
                      <tr>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Company
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                          Contact
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                          Type
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                          Location
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody className="bg-white divide-y divide-gray-200">
                      {filteredRecruiters().map((recruiter) => (
                        <tr key={recruiter.user_id} className="hover:bg-yellow-50">
                          <td className="px-3 py-4">
                            <div>
                              <div className="text-sm font-medium text-gray-900 truncate max-w-[150px]">
                                {recruiter.company_name}
                              </div>
                              <div className="text-xs text-gray-500 truncate max-w-[150px]">
                                {recruiter.company_website && (
                                  <a 
                                    href={recruiter.company_website} 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="text-blue-600 hover:underline"
                                  >
                                    {recruiter.company_website}
                                  </a>
                                )}
                              </div>
                            </div>
                          </td>
                          <td className="px-3 py-4 hidden md:table-cell">
                            <div className="text-sm text-gray-900 truncate max-w-[120px]">{recruiter.email}</div>
                            <div className="text-xs text-gray-500 truncate max-w-[120px]">@{recruiter.username}</div>
                          </td>
                          <td className="px-3 py-4 text-sm text-gray-900 capitalize hidden lg:table-cell">
                            {recruiter.company_type}
                          </td>
                          <td className="px-3 py-4 hidden lg:table-cell">
                            <div className="text-sm text-gray-900 truncate max-w-[120px]">
                              {recruiter.city}, {recruiter.state}
                            </div>
                            <div className="text-xs text-gray-500 truncate max-w-[120px]">{recruiter.country}</div>
                          </td>
                          <td className="px-3 py-4 text-sm font-medium">
                            <div className="flex flex-col sm:flex-row gap-2">
                              <button
                                onClick={() => handleViewDetails(recruiter)}
                                className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                              >
                                View
                              </button>
                              <button
                                onClick={() => toggleVerification(recruiter.user_id, recruiter.verified)}
                                className="text-green-600 hover:text-green-900 border border-green-200 hover:bg-green-50 text-xs sm:text-sm px-2 py-1 rounded"
                              >
                                Verify
                              </button>
                            </div>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              ) : (
                <div className="text-center py-12">
                  <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-yellow-100 mb-4">
                    <svg className="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                  </div>
                  <h3 className="text-lg font-medium text-gray-900 mb-2">No Pending Recruiters</h3>
                  <p className="text-gray-500">All recruiters have been verified</p>
                </div>
              )}
            </div>
          )}

          {/* Verified Recruiters Table */}
          {activeTab === "verified" && (
            <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
              <div className="px-4 py-3 bg-blue-900 border-b border-green-100">
                <h2 className="text-lg font-semibold text-white">
                  Verified Recruiters ({stats.verified})
                </h2>
                <p className="text-sm text-what-blue-600">
                  Recruiters that have been approved for verification
                </p>
              </div>
              {filteredRecruiters().length > 0 ? (
                <div className="overflow-x-auto">
                  <table className="min-w-full divide-y divide-gray-200">
                    <thead className="bg-gray-50">
                      <tr>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Company
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                          Contact
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                          Type
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                          Location
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody className="bg-white divide-y divide-gray-200">
                      {filteredRecruiters().map((recruiter) => (
                        <tr key={recruiter.user_id} className="hover:bg-green-50">
                          <td className="px-3 py-4">
                            <div>
                              <div className="text-sm font-medium text-gray-900 truncate max-w-[150px]">
                                {recruiter.company_name}
                              </div>
                              <div className="text-xs text-gray-500 truncate max-w-[150px]">
                                {recruiter.company_website && (
                                  <a 
                                    href={recruiter.company_website} 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="text-blue-600 hover:underline"
                                  >
                                    {recruiter.company_website}
                                  </a>
                                )}
                              </div>
                            </div>
                          </td>
                          <td className="px-3 py-4 hidden md:table-cell">
                            <div className="text-sm text-gray-900 truncate max-w-[120px]">{recruiter.email}</div>
                            <div className="text-xs text-gray-500 truncate max-w-[120px]">@{recruiter.username}</div>
                          </td>
                          <td className="px-3 py-4 text-sm text-gray-900 capitalize hidden lg:table-cell">
                            {recruiter.company_type}
                          </td>
                          <td className="px-3 py-4 hidden lg:table-cell">
                            <div className="text-sm text-gray-900 truncate max-w-[120px]">
                              {recruiter.city}, {recruiter.state}
                            </div>
                            <div className="text-xs text-gray-500 truncate max-w-[120px]">{recruiter.country}</div>
                          </td>
                          <td className="px-3 py-4 text-sm font-medium">
                            <div className="flex flex-col sm:flex-row gap-2">
                              <button
                                onClick={() => handleViewDetails(recruiter)}
                                className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                              >
                                View
                              </button>
                              <button
                                onClick={() => toggleVerification(recruiter.user_id, recruiter.verified)}
                                className="text-orange-600 hover:text-orange-900 border border-orange-200 hover:bg-orange-50 text-xs sm:text-sm px-2 py-1 rounded"
                              >
                                Unverify
                              </button>
                            </div>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              ) : (
                <div className="text-center py-12">
                  <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-4">
                    <svg className="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                  </div>
                  <h3 className="text-lg font-medium text-gray-900 mb-2">No Verified Recruiters</h3>
                  <p className="text-gray-500">Verify recruiters to see them listed here</p>
                </div>
              )}
            </div>
          )}

          {/* All Recruiters Table */}
          {activeTab === "all" && (
            <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
              <div className="px-4 py-3 bg-blue-50 border-b border-blue-100">
                <h2 className="text-lg font-semibold text-blue-800">
                  All Recruiters ({stats.total})
                </h2>
                <p className="text-sm text-blue-600">
                  Showing all recruiters with their verification status
                </p>
              </div>
              {filteredRecruiters().length > 0 ? (
                <div className="overflow-x-auto">
                  <table className="min-w-full divide-y divide-gray-200">
                    <thead className="bg-gray-50">
                      <tr>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Company
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                          Contact
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                          Type
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                          Location
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Status
                        </th>
                        <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                          Actions
                        </th>
                      </tr>
                    </thead>
                    <tbody className="bg-white divide-y divide-gray-200">
                      {filteredRecruiters().map((recruiter) => (
                        <tr key={recruiter.user_id} className="hover:bg-gray-50">
                          <td className="px-3 py-4">
                            <div>
                              <div className="text-sm font-medium text-gray-900 truncate max-w-[150px]">
                                {recruiter.company_name}
                              </div>
                              <div className="text-xs text-gray-500 truncate max-w-[150px]">
                                {recruiter.company_website && (
                                  <a 
                                    href={recruiter.company_website} 
                                    target="_blank" 
                                    rel="noopener noreferrer"
                                    className="text-blue-600 hover:underline"
                                  >
                                    {recruiter.company_website}
                                  </a>
                                )}
                              </div>
                            </div>
                          </td>
                          <td className="px-3 py-4 hidden md:table-cell">
                            <div className="text-sm text-gray-900 truncate max-w-[120px]">{recruiter.email}</div>
                            <div className="text-xs text-gray-500 truncate max-w-[120px]">@{recruiter.username}</div>
                          </td>
                          <td className="px-3 py-4 text-sm text-gray-900 capitalize hidden lg:table-cell">
                            {recruiter.company_type}
                          </td>
                          <td className="px-3 py-4 hidden lg:table-cell">
                            <div className="text-sm text-gray-900 truncate max-w-[120px]">
                              {recruiter.city}, {recruiter.state}
                            </div>
                            <div className="text-xs text-gray-500 truncate max-w-[120px]">{recruiter.country}</div>
                          </td>
                          <td className="px-3 py-4">
                            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                              recruiter.verified === 1 || recruiter.verified === true
                                ? 'bg-green-100 text-green-800' 
                                : 'bg-yellow-100 text-yellow-800'
                            }`}>
                              {recruiter.verified === 1 || recruiter.verified === true ? 'Verified' : 'Pending'}
                            </span>
                          </td>
                          <td className="px-3 py-4 text-sm font-medium">
                            <div className="flex flex-col sm:flex-row gap-2">
                              <button
                                onClick={() => handleViewDetails(recruiter)}
                                className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                              >
                                View
                              </button>
                              <button
                                onClick={() => toggleVerification(recruiter.user_id, recruiter.verified)}
                                className={`text-xs sm:text-sm px-2 py-1 rounded ${
                                  recruiter.verified === 1 || recruiter.verified === true
                                    ? 'text-orange-600 hover:text-orange-900 border border-orange-200 hover:bg-orange-50' 
                                    : 'text-green-600 hover:text-green-900 border border-green-200 hover:bg-green-50'
                                }`}
                              >
                                {recruiter.verified === 1 || recruiter.verified === true ? 'Unverify' : 'Verify'}
                              </button>
                            </div>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              ) : (
                <div className="text-center py-12">
                  <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 mb-4">
                    <svg className="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                  </div>
                  <h3 className="text-lg font-medium text-gray-900 mb-2">No Recruiters Found</h3>
                  <p className="text-gray-500">There are no recruiters registered yet</p>
                </div>
              )}
            </div>
          )}
        </div>
      </div>

      {/* Recruiter Details Modal (same as before) */}
      {showModal && selectedRecruiter && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Recruiter Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company Name</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.company_name}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Website</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedRecruiter.company_website ? (
                          <a href={selectedRecruiter.company_website} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">
                            {selectedRecruiter.company_website}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedRecruiter.company_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Verification Status</label>
                      <p className="text-gray-900">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                          selectedRecruiter.verified === 1 || selectedRecruiter.verified === true
                            ? 'bg-green-100 text-green-800' 
                            : 'bg-yellow-100 text-yellow-800'
                        }`}>
                          {selectedRecruiter.verified === 1 || selectedRecruiter.verified === true ? 'Verified' : 'Pending Verification'}
                        </span>
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Email</label>
                      <p className="text-gray-900 text-sm md:text-base break-all">{selectedRecruiter.email}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Username</label>
                      <p className="text-gray-900 text-sm md:text-base">@{selectedRecruiter.username}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Member Since</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {new Date(selectedRecruiter.created_at).toLocaleDateString()}
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Address</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.address_line1}</p>
                  {selectedRecruiter.address_line2 && (
                    <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.address_line2}</p>
                  )}
                  <p className="text-gray-900 text-sm md:text-base">
                    {[selectedRecruiter.city, selectedRecruiter.state, selectedRecruiter.country, selectedRecruiter.pincode]
                      .filter(Boolean).join(', ')}
                  </p>
                </div>
              </div>

              {selectedRecruiter.verification_notes && (
                <div className="mt-6">
                  <h3 className="text-base md:text-lg font-semibold mb-3">Verification Notes</h3>
                  <div className="bg-yellow-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.verification_notes}</p>
                  </div>
                </div>
              )}

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    toggleVerification(selectedRecruiter.user_id, selectedRecruiter.verified);
                    setShowModal(false);
                  }}
                  className={`px-4 py-2 rounded-lg text-sm md:text-base ${
                    selectedRecruiter.verified === 1 || selectedRecruiter.verified === true
                      ? 'bg-orange-600 text-white hover:bg-orange-700'
                      : 'bg-green-600 text-white hover:bg-green-700'
                  }`}
                >
                  {selectedRecruiter.verified === 1 || selectedRecruiter.verified === true ? 'Unverify' : 'Verify'}
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\admin\recruiter\verified-recruiters.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function VerifiedRecruiters() {
  const [recruiters, setRecruiters] = useState([]);
  const [loading, setLoading] = useState(true);
  const [selectedRecruiter, setSelectedRecruiter] = useState(null);
  const [showModal, setShowModal] = useState(false);

  useEffect(() => {
    fetchRecruiters();
  }, []);

  const fetchRecruiters = async () => {
    try {
      const response = await api.get("/admin/auth/recruiters");
      // Filter only verified recruiters
      const verifiedRecruiters = (response.data.recruiters || []).filter(
        recruiter => recruiter.verified === 1 || recruiter.verified === true
      );
      setRecruiters(verifiedRecruiters);
    } catch (error) {
      console.error("Error fetching recruiters:", error);
    } finally {
      setLoading(false);
    }
  };

  const handleViewDetails = (recruiter) => {
    setSelectedRecruiter(recruiter);
    setShowModal(true);
  };

  const toggleVerification = async (recruiterId, currentVerified) => {
    try {
      // Always unverify (set to 0) since this is verified recruiters page
      await api.put(`/admin/auth/recruiters/${recruiterId}/verify`, {
        verified: 0
      });
      
      // Remove from list immediately
      setRecruiters(prevRecruiters => 
        prevRecruiters.filter(recruiter => recruiter.user_id !== recruiterId)
      );
      
      // Refresh data
      fetchRecruiters();
    } catch (error) {
      console.error("Error updating verification:", error);
      alert("Failed to unverify recruiter. Please try again.");
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-[60vh]">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  return (
    <div className="max-w-full mx-auto">
      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <div>
          <h1 className="text-xl md:text-2xl font-bold text-gray-900">Verified Recruiters</h1>
          <p className="text-sm md:text-base text-gray-600">
            Total {recruiters.length} verified recruiters
          </p>
        </div>
        <button
          onClick={fetchRecruiters}
          className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 w-full sm:w-auto"
        >
          Refresh
        </button>
      </div>

      {/* Verified Recruiters Table */}
      <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
        <div className="px-4 py-3 bg-blue-600 border-b border-blue-700">
          <h2 className="text-lg font-semibold text-white">
            Verified Recruiters ({recruiters.length})
          </h2>
          <p className="text-sm text-blue-100">
            Recruiters that have been approved for verification
          </p>
        </div>
        {recruiters.length > 0 ? (
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Company
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell">
                    Contact
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Type
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell">
                    Location
                  </th>
                  <th className="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody className="bg-white divide-y divide-gray-200">
                {recruiters.map((recruiter) => (
                  <tr key={recruiter.user_id} className="hover:bg-gray-50">
                    <td className="px-3 py-4">
                      <div>
                        <div className="text-sm font-medium text-gray-900 truncate max-w-[150px]">
                          {recruiter.company_name}
                        </div>
                        <div className="text-xs text-gray-500 truncate max-w-[150px]">
                          {recruiter.company_website && (
                            <a 
                              href={recruiter.company_website} 
                              target="_blank" 
                              rel="noopener noreferrer"
                              className="text-blue-600 hover:underline"
                            >
                              {recruiter.company_website}
                            </a>
                          )}
                        </div>
                      </div>
                    </td>
                    <td className="px-3 py-4 hidden md:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">{recruiter.email}</div>
                      <div className="text-xs text-gray-500 truncate max-w-[120px]">@{recruiter.username}</div>
                    </td>
                    <td className="px-3 py-4 text-sm text-gray-900 capitalize hidden lg:table-cell">
                      {recruiter.company_type}
                    </td>
                    <td className="px-3 py-4 hidden lg:table-cell">
                      <div className="text-sm text-gray-900 truncate max-w-[120px]">
                        {recruiter.city}, {recruiter.state}
                      </div>
                      <div className="text-xs text-gray-500 truncate max-w-[120px]">{recruiter.country}</div>
                    </td>
                    <td className="px-3 py-4 text-sm font-medium">
                      <div className="flex flex-col sm:flex-row gap-2">
                        <button
                          onClick={() => handleViewDetails(recruiter)}
                          className="text-blue-600 hover:text-blue-900 text-xs sm:text-sm px-2 py-1 rounded border border-blue-200 hover:bg-blue-50"
                        >
                          View
                        </button>
                        <button
                          onClick={() => toggleVerification(recruiter.user_id, recruiter.verified)}
                          className="text-orange-600 hover:text-orange-900 border border-orange-200 hover:bg-orange-50 text-xs sm:text-sm px-2 py-1 rounded"
                        >
                          Unverify
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          <div className="text-center py-12">
            <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 mb-4">
              <svg className="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
            </div>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No Verified Recruiters</h3>
            <p className="text-gray-500">Verify recruiters to see them listed here</p>
          </div>
        )}
      </div>

      {/* Recruiter Details Modal */}
      {showModal && selectedRecruiter && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
          <div className="bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div className="p-4 md:p-6">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-lg md:text-xl font-bold text-gray-900">Recruiter Details</h2>
                <button
                  onClick={() => setShowModal(false)}
                  className="text-gray-400 hover:text-gray-600 text-xl"
                >
                  â
                </button>
              </div>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Company Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company Name</label>
                      <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.company_name}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Website</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {selectedRecruiter.company_website ? (
                          <a href={selectedRecruiter.company_website} target="_blank" rel="noopener noreferrer" className="text-blue-600 hover:underline">
                            {selectedRecruiter.company_website}
                          </a>
                        ) : 'Not provided'}
                      </p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Company Type</label>
                      <p className="text-gray-900 text-sm md:text-base capitalize">{selectedRecruiter.company_type}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Verification Status</label>
                      <p className="text-gray-900">
                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                          selectedRecruiter.verified === 1 || selectedRecruiter.verified === true
                            ? 'bg-green-100 text-green-800' 
                            : 'bg-yellow-100 text-yellow-800'
                        }`}>
                          {selectedRecruiter.verified === 1 || selectedRecruiter.verified === true ? 'Verified' : 'Pending Verification'}
                        </span>
                      </p>
                    </div>
                  </div>
                </div>

                <div>
                  <h3 className="text-base md:text-lg font-semibold mb-3">Contact Information</h3>
                  <div className="space-y-2">
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Email</label>
                      <p className="text-gray-900 text-sm md:text-base break-all">{selectedRecruiter.email}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Username</label>
                      <p className="text-gray-900 text-sm md:text-base">@{selectedRecruiter.username}</p>
                    </div>
                    <div>
                      <label className="text-xs md:text-sm font-medium text-gray-500">Member Since</label>
                      <p className="text-gray-900 text-sm md:text-base">
                        {new Date(selectedRecruiter.created_at).toLocaleDateString()}
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="mt-6">
                <h3 className="text-base md:text-lg font-semibold mb-3">Address</h3>
                <div className="bg-gray-50 p-3 md:p-4 rounded-lg">
                  <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.address_line1}</p>
                  {selectedRecruiter.address_line2 && (
                    <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.address_line2}</p>
                  )}
                  <p className="text-gray-900 text-sm md:text-base">
                    {[selectedRecruiter.city, selectedRecruiter.state, selectedRecruiter.country, selectedRecruiter.pincode]
                      .filter(Boolean).join(', ')}
                  </p>
                </div>
              </div>

              {selectedRecruiter.verification_notes && (
                <div className="mt-6">
                  <h3 className="text-base md:text-lg font-semibold mb-3">Verification Notes</h3>
                  <div className="bg-yellow-50 p-3 md:p-4 rounded-lg">
                    <p className="text-gray-900 text-sm md:text-base">{selectedRecruiter.verification_notes}</p>
                  </div>
                </div>
              )}

              <div className="mt-6 flex flex-col sm:flex-row justify-end gap-3">
                <button
                  onClick={() => {
                    toggleVerification(selectedRecruiter.user_id, selectedRecruiter.verified);
                    setShowModal(false);
                  }}
                  className="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 text-sm md:text-base"
                >
                  Unverify
                </button>
                <button
                  onClick={() => setShowModal(false)}
                  className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 text-sm md:text-base"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\auth\admin\SignIn.jsx ===
import { useState } from "react";
import { useNavigate } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function AdminSignIn() {
  const navigate = useNavigate();
  const [formData, setFormData] = useState({
    email: "",
    password: "",
  });
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState("");
  const [error, setError] = useState("");

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value,
    });
  };
  // Handle form submission
  async function handleSubmit(e) {
    e.preventDefault();
    setLoading(true);
    setMessage("");
    setError("");

    try {
      const { data } = await api.post("/admin/auth/login", {
        email: formData.email,
        password: formData.password,
      });

      setMessage(data?.message || "Admin login successful");

      // Redirect to admin dashboard using React Router
      setTimeout(() => {
        navigate("/admin", { replace: true });
      }, 1000);
    } catch (err) {
      const errorMessage =
        err?.response?.data?.message || err?.message || "Admin login failed";
      setError(errorMessage);
    } finally {
      setLoading(false);
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-12">
      <div className="w-full max-w-md">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">
            HireSpark Admin
          </h1>
          <p className="text-gray-600">Manage your platform efficiently</p>
        </div>

        <div className="w-full rounded-xl shadow-xl border-0 bg-white">
          <div className="px-8 pt-8 pb-6 text-center">
            <h2 className="text-2xl font-bold text-gray-800">
              Admin Sign In
            </h2>
            <p className="mt-2 text-sm text-gray-500">
              Enter your credentials to access the admin panel
            </p>
          </div>

          <div className="px-8 pb-8 space-y-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Email Address
                  </label>
                  <input
                    name="email"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="admin@hirespark.com"
                    type="email"
                    value={formData.email}
                    onChange={handleChange}
                    required
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Password
                  </label>
                  <input
                    name="password"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="Enter your password"
                    type="password"
                    value={formData.password}
                    onChange={handleChange}
                    required
                  />
                </div>
              </div>

              <button
                type="submit"
                disabled={loading}
                className="w-full rounded-lg py-3 text-white font-semibold shadow-lg bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {loading ? (
                  <div className="flex items-center justify-center">
                    <svg
                      className="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                    >
                      <circle
                        className="opacity-25"
                        cx="12"
                        cy="12"
                        r="10"
                        stroke="currentColor"
                        strokeWidth="4"
                      ></circle>
                      <path
                        className="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                      ></path>
                    </svg>
                    Signing in...
                  </div>
                ) : (
                  "Sign In to Admin Panel"
                )}
              </button>
            </form>

            {/* Messages */}
            {message && (
              <div className="rounded-lg bg-green-50 border border-green-200 p-4">
                <div className="flex items-center">
                  <svg
                    className="w-5 h-5 text-green-500 mr-2"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fillRule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                      clipRule="evenodd"
                    />
                  </svg>
                  <p className="text-green-700 text-sm font-medium">
                    {message}
                  </p>
                </div>
              </div>
            )}

            {error && (
              <div className="rounded-lg bg-red-50 border border-red-200 p-4">
                <div className="flex items-center">
                  <svg
                    className="w-5 h-5 text-red-500 mr-2"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fillRule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                      clipRule="evenodd"
                    />
                  </svg>
                  <p className="text-red-700 text-sm font-medium">{error}</p>
                </div>
              </div>
            )}

            {/* Links */}
            <div className="text-center pt-4 border-t border-gray-200">
              <p className="text-sm text-gray-600">
                Need an admin account?{" "}
                <a
                  className="font-semibold text-blue-600 hover:text-blue-700 hover:underline transition-colors"
                  href="/admin/signup"
                >
                  Register here
                </a>
              </p>
              <p className="text-sm text-gray-600 mt-2">
                Regular user?{" "}
                <a
                  className="font-medium text-gray-700 hover:text-gray-900 hover:underline transition-colors"
                  href="/sign-in"
                >
                  Sign in here
                </a>
              </p>
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="text-center mt-8">
          <p className="text-xs text-gray-500">
            Â© 2024 HireSpark Admin. Protected admin access.
          </p>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\auth\admin\SignUp.jsx ===
import { useState } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function AdminSignUp() {
  const [formData, setFormData] = useState({
    full_name: "",
    email: "",
    phone: "",
    password: "",
    confirmPassword: ""
  });
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState("");
  const [error, setError] = useState("");

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  async function handleSubmit(e) {
    e.preventDefault();
    setLoading(true);
    setMessage("");
    setError("");

    // Validation
    if (formData.password !== formData.confirmPassword) {
      setError("Passwords do not match");
      setLoading(false);
      return;
    }

    if (formData.password.length < 6) {
      setError("Password must be at least 6 characters long");
      setLoading(false);
      return;
    }

    try {
      const { data } = await api.post("/admin/auth/register", {
        full_name: formData.full_name,
        email: formData.email,
        phone: formData.phone,
        password: formData.password
      });
      
      setMessage(data?.message || "Admin registered successfully");
      
      // Redirect to admin dashboard
      setTimeout(() => {
        window.location.href = "/admin";
      }, 1500);
      
    } catch (err) {
      const errorMessage = err?.response?.data?.message || err?.message || "Admin registration failed";
      setError(errorMessage);
    } finally {
      setLoading(false);
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-12">
      <div className="w-full max-w-md">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">HireSpark Admin</h1>
          <p className="text-gray-600">Create your admin account</p>
        </div>

        <div className="w-full rounded-xl shadow-xl border-0 bg-white">
          <div className="px-8 pt-8 pb-6 text-center">
            <h2 className="text-2xl font-bold text-gray-800">Admin Registration</h2>
            <p className="mt-2 text-sm text-gray-500">Fill in your details to create an admin account</p>
          </div>

          <div className="px-8 pb-8 space-y-6">
            <form onSubmit={handleSubmit} className="space-y-6">
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Full Name *
                  </label>
                  <input
                    name="full_name"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="Enter your full name"
                    value={formData.full_name}
                    onChange={handleChange}
                    required
                  />
                </div>
                
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Email Address *
                  </label>
                  <input
                    name="email"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="admin@hirespark.com"
                    type="email"
                    value={formData.email}
                    onChange={handleChange}
                    required
                  />
                </div>
                
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Phone Number
                  </label>
                  <input
                    name="phone"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="+1 (555) 123-4567"
                    type="tel"
                    value={formData.phone}
                    onChange={handleChange}
                  />
                </div>
                
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Password *
                  </label>
                  <input
                    name="password"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="Create a strong password"
                    type="password"
                    value={formData.password}
                    onChange={handleChange}
                    required
                  />
                  <p className="text-xs text-gray-500 mt-1">Minimum 6 characters</p>
                </div>
                
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Confirm Password *
                  </label>
                  <input
                    name="confirmPassword"
                    className="w-full rounded-lg border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                    placeholder="Confirm your password"
                    type="password"
                    value={formData.confirmPassword}
                    onChange={handleChange}
                    required
                  />
                </div>
              </div>

              <button
                type="submit"
                disabled={loading}
                className="w-full rounded-lg py-3 text-white font-semibold shadow-lg bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {loading ? (
                  <div className="flex items-center justify-center">
                    <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                      <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                      <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Creating Account...
                  </div>
                ) : (
                  "Create Admin Account"
                )}
              </button>
            </form>

            {/* Messages */}
            {message && (
              <div className="rounded-lg bg-green-50 border border-green-200 p-4">
                <div className="flex items-center">
                  <svg className="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                  </svg>
                  <p className="text-green-700 text-sm font-medium">{message}</p>
                </div>
              </div>
            )}

            {error && (
              <div className="rounded-lg bg-red-50 border border-red-200 p-4">
                <div className="flex items-center">
                  <svg className="w-5 h-5 text-red-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clipRule="evenodd" />
                  </svg>
                  <p className="text-red-700 text-sm font-medium">{error}</p>
                </div>
              </div>
            )}

            {/* Links */}
            <div className="text-center pt-4 border-t border-gray-200">
              <p className="text-sm text-gray-600">
                Already have an admin account?{" "}
                <a 
                  className="font-semibold text-blue-600 hover:text-blue-700 hover:underline transition-colors" 
                  href="/admin/signin"
                >
                  Sign in here
                </a>
              </p>
              <p className="text-sm text-gray-600 mt-2">
                Regular user registration?{" "}
                <a 
                  className="font-medium text-gray-700 hover:text-gray-900 hover:underline transition-colors" 
                  href="/sign-up"
                >
                  Sign up here
                </a>
              </p>
            </div>
          </div>
        </div>

        {/* Footer */}
        <div className="text-center mt-8">
          <p className="text-xs text-gray-500">
            Â© 2024 HireSpark Admin. All rights reserved.
          </p>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\auth\candidate-recruiter\Forgot.jsx ===
export default function Forgot() {
  return (
    <div className="min-h-[80vh] grid place-items-center px-4">
      <div className="w-full max-w-md rounded-2xl bg-white border border-gray-200 shadow-lg">
        <div className="px-6 pt-6 border-b border-gray-200 pb-4">
          <h2 className="text-2xl font-semibold">Reset your password</h2>
          <p className="text-sm text-slate-600">We'll email you a reset link.</p>
        </div>
        <div className="px-6 pb-6 space-y-3 pt-6">
          <input placeholder="Email" className="w-full rounded-xl border border-gray-300 px-4 py-3 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none" />
          <button className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-xl transition-colors">Send reset link</button>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\auth\candidate-recruiter\SignIn.jsx ===
import { useState, useEffect, useCallback, useRef } from "react";
import { useLocation, useSearchParams, Link } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function SignIn() {
  const [searchParams] = useSearchParams();
  const roleParam = searchParams.get("role");
  const redirectParam = searchParams.get("redirect");

  const [role, setRole] = useState(roleParam === "recruiter" ? "recruiter" : "candidate");
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState("");
  const [error, setError] = useState("");
  const [termsAccepted, setTermsAccepted] = useState(false);
  const location = useLocation();
  const handleGoogleSuccessRef = useRef(null);

  // Update role when query parameter changes
  useEffect(() => {
    if (roleParam === "recruiter") {
      setRole("recruiter");
    } else if (roleParam === "candidate") {
      setRole("candidate");
    }
  }, [roleParam]);

  // Decide where to send the user based on role + profile existence
  const resolveRedirect = useCallback(async (resolvedRole) => {
    try {
      if (resolvedRole === "recruiter") {
        // Recruiter profile exists?
        await api.get("/recruiter-profile/recruiter");
        // Profile exists - redirect to Post Job page (default dashboard view)
        return "/create-job";
      }

      // Candidate profile exists?
      await api.get("/profile/user");
      return "/dashboard";
    } catch (err) {
      // 404 means profile not created yet
      const status = err?.response?.status;
      if (status === 404) {
        // If coming from "post a job" flow and profile doesn't exist, go to profile form
        if (resolvedRole === "recruiter" && redirectParam === "post-job") {
          return "/recruiter-profile-form";
        }
        return resolvedRole === "recruiter"
          ? "/recruiter-profile-form"
          : "/dashboard/profile";
      }
      // Fallback to default destinations on other errors
      return resolvedRole === "recruiter" ? "/create-job" : "/dashboard";
    }
  }, [redirectParam]);

  const consumePostLoginTasks = useCallback(async (userRoleFallback) => {
    const getItem = (key) => {
      try {
        return window.localStorage.getItem(key);
      } catch {
        return null;
      }
    };

    const removeItem = (key) => {
      try {
        window.localStorage.removeItem(key);
      } catch {
        // ignore storage errors
      }
    };

    const pendingJobId = getItem("postLoginSaveJobId");
    const pendingApplyJobId = getItem("postLoginApplyJobId");
    const pendingRedirect = getItem("postLoginRedirect");

    // Handle save job flow
    if (pendingJobId) {
      try {
        await api.post(`/jobs/save/${pendingJobId}`);
        setMessage("Job saved successfully after sign-in.");
      } catch (err) {
        setMessage("Signed in, but we could not save the job automatically.");
      }
      removeItem("postLoginSaveJobId");
    }

    // Handle apply job flow (only for candidates)
    // Don't auto-apply, just redirect back to job page so user can click Apply Now manually
    if (pendingApplyJobId && userRoleFallback === "candidate") {
      // Check if profile exists and is complete
      let profileComplete = false;
      try {
        const profileRes = await api.get("/profile/user");
        if (profileRes?.data?.success && profileRes.data.user) {
          const profile = profileRes.data.user;
          const sessionRes = await api.get("/auth/session");
          const userEmail = sessionRes?.data?.user?.email;
          // Check if profile has required fields: name, email, and resume
          profileComplete = !!(
            profile.full_name &&
            userEmail &&
            profile.resume_path
          );
        }
      } catch (err) {
        // Profile doesn't exist or incomplete
        profileComplete = false;
      }

      if (!profileComplete) {
        // Profile incomplete - redirect to complete profile
        // Keep the apply job ID and redirect path for after profile completion
        // Don't remove them yet - profile page will handle the apply and cleanup
        return "/dashboard/profile";
      }

      // Profile is complete - just redirect back to job page
      // User will need to click Apply Now button manually
      removeItem("postLoginApplyJobId");
      if (pendingRedirect) {
        removeItem("postLoginRedirect");
        return pendingRedirect;
      }
      // Fallback: redirect to jobs page if no redirect path
      return "/jobs";
    }

    removeItem("postLoginRedirect");

    const fallbackRedirect = await resolveRedirect(userRoleFallback);
    const next =
      pendingRedirect ||
      location.state?.from?.pathname ||
      fallbackRedirect ||
      "/dashboard";

    return next;
  }, [resolveRedirect, location.state?.from?.pathname, setMessage]);

  // GOOGLE LOGIN SUCCESS HANDLER
  const handleGoogleSuccess = useCallback(async (response) => {
    if (!termsAccepted) {
      setError("Please accept the Terms & Conditions and Privacy Policy to continue.");
      return;
    }

    setLoading(true);
    setError("");
    setMessage("");

    try {
      console.log("Google sign-in: Sending credential to backend...");
      const { data } = await api.post("/auth/google", {
        credential: response.credential,
        role: role,
      });

      console.log("Google sign-in: Backend response received", data);
      const userRole = data?.user?.role || role;

      // Determine redirect path
      let redirectPath = null;

      try {
        redirectPath = await consumePostLoginTasks(userRole);
        console.log("Google sign-in: Post-login tasks completed, redirect path:", redirectPath);
      } catch (redirectErr) {
        console.error("Google sign-in: Error in post-login tasks", redirectErr);
        // Continue with fallback even if post-login tasks fail
      }

      // Ensure we always have a redirect path
      if (!redirectPath) {
        redirectPath = userRole === "recruiter" ? "/create-job" : "/dashboard";
        console.log("Google sign-in: Using fallback redirect path", redirectPath);
      }

      // Perform redirect - use replace to avoid adding to history
      console.log("Google sign-in: Redirecting to", redirectPath);
      // Use replace instead of href to avoid back button issues
      window.location.replace(redirectPath);
    } catch (err) {
      console.error("Google sign-in: Error", err);
      setError(err?.response?.data?.message || "Google login failed");
      setLoading(false);
    }
  }, [termsAccepted, role, consumePostLoginTasks]);

  // Keep ref updated
  useEffect(() => {
    handleGoogleSuccessRef.current = handleGoogleSuccess;
  }, [handleGoogleSuccess]);

  // LOAD GOOGLE BUTTON
  useEffect(() => {
    const clientId = import.meta.env.VITE_GOOGLE_CLIENT_ID;

    if (!clientId) {
      console.error("VITE_GOOGLE_CLIENT_ID is missing. Please set it in your .env file.");
      return;
    }

    // Wait for Google script to load
    let retryCount = 0;
    const maxRetries = 50; // 5 seconds max wait time
    const initializeGoogleAuth = () => {
      if (typeof window === "undefined" || !window.google || !window.google.accounts?.id) {
        retryCount++;
        if (retryCount < maxRetries) {
          // Retry after a short delay if script not loaded yet
          setTimeout(initializeGoogleAuth, 100);
        } else {
          console.error("Google Identity script failed to load after multiple retries.");
        }
        return;
      }

      try {
        window.google.accounts.id.initialize({
          client_id: clientId,
          callback: (response) => {
            if (handleGoogleSuccessRef.current) {
              handleGoogleSuccessRef.current(response);
            }
          },
        });

        const buttonContainer = document.getElementById("google-login-btn");
        if (buttonContainer) {
          // Clear previous button if exists
          buttonContainer.innerHTML = "";
          window.google.accounts.id.renderButton(buttonContainer, {
            theme: "outline",
            size: "large",
            width: "100%",
            disabled: !termsAccepted,
          });
        }
      } catch (err) {
        console.error("Error initializing Google auth:", err);
      }
    };

    // Start initialization
    initializeGoogleAuth();
  }, [role, termsAccepted]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-bg px-4 py-8 sm:py-12">
      <div className="w-full max-w-6xl">
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center">
          <div className="px-4 lg:px-8 text-center lg:text-left">
            <h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold leading-tight text-text-dark">
              Talk to HR directly & get a job with better salary!
            </h1>
            <p className="mt-4 sm:mt-6 text-base sm:text-lg text-text-muted">
              Get local jobs in your city!
            </p>
          </div>

          <div className="flex justify-center">
            <div className="w-full max-w-md card shadow-medium">
              <div className="px-6 sm:px-8 pt-6 sm:pt-8 border-b border-border pb-4 sm:pb-6">
                <h2 className="text-xl sm:text-2xl font-semibold text-text-dark">Sign in to HireSpark</h2>
                <p className="mt-1.5 text-sm text-text-muted">Welcome back! Sign in with Google</p>
              </div>

              <div className="px-4 sm:px-6 lg:px-8 pb-6 sm:pb-8 space-y-4 sm:space-y-5 pt-6">
                {/* Role Selection */}
                <div className="space-y-3">
                  <label className="label text-text-dark">
                    I want to sign in as:
                  </label>
                  <div className="grid grid-cols-2 gap-3">
                    <label className={`flex items-center gap-2.5 p-3 sm:p-4 border-2 rounded-card cursor-pointer transition-all ${role === "candidate"
                        ? "border-primary-500 bg-primary-50 shadow-soft"
                        : "border-border hover:border-primary-300 hover:bg-gray-50"
                      }`}>
                      <input
                        type="radio"
                        name="role"
                        value="candidate"
                        checked={role === "candidate"}
                        onChange={() => setRole("candidate")}
                        className="w-4 h-4 text-primary-600 focus:ring-primary-500 cursor-pointer"
                      />
                      <span className="font-semibold text-sm sm:text-base text-text-dark">Candidate</span>
                    </label>

                    <label className={`flex items-center gap-2.5 p-3 sm:p-4 border-2 rounded-card cursor-pointer transition-all ${role === "recruiter"
                        ? "border-primary-500 bg-primary-50 shadow-soft"
                        : "border-border hover:border-primary-300 hover:bg-gray-50"
                      }`}>
                      <input
                        type="radio"
                        name="role"
                        value="recruiter"
                        checked={role === "recruiter"}
                        onChange={() => setRole("recruiter")}
                        className="w-4 h-4 text-primary-600 focus:ring-primary-500 cursor-pointer"
                      />
                      <span className="font-semibold text-sm sm:text-base text-text-dark">Recruiter</span>
                    </label>
                  </div>
                </div>

                <div id="google-login-btn" className="flex justify-center"></div>

                {/* Terms & Conditions Checkbox */}
                <div className="flex items-start gap-2.5 pt-2">
                  <input
                    type="checkbox"
                    id="terms-checkbox"
                    checked={termsAccepted}
                    onChange={(e) => setTermsAccepted(e.target.checked)}
                    className="mt-0.5 h-4 w-4 text-primary-600 focus:ring-primary-500 border-border rounded cursor-pointer"
                    required
                  />
                  <label htmlFor="terms-checkbox" className="text-xs sm:text-sm text-text-muted cursor-pointer leading-relaxed">
                    I agree to the{" "}
                    <Link to="/terms" target="_blank" className="text-primary-600 hover:text-primary-700 hover:underline font-medium">
                      Terms & Conditions
                    </Link>{" "}
                    and{" "}
                    <Link to="/privacy" target="_blank" className="text-primary-600 hover:text-primary-700 hover:underline font-medium">
                      Privacy Policy
                    </Link>{" "}
                    of HireSpark.
                  </label>
                </div>

                {message && (
                  <div className="text-success-600 text-sm text-center bg-success-light border border-success-300 rounded-lg px-4 py-2.5">
                    {message}
                  </div>
                )}
                {error && (
                  <div className="text-error-600 text-sm text-center bg-error-light border border-error-300 rounded-lg px-4 py-2.5">
                    {error}
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\auth\candidate-recruiter\SignInModal.jsx ===
import React, { useState, useEffect, useCallback, useRef } from "react";
import { Link } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig.jsx";

export default function SignInModal({ role = "candidate", onClose, redirectTo = null }) {
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState("");
  const [error, setError] = useState("");
  const [termsAccepted, setTermsAccepted] = useState(false);
  const handleGoogleSuccessRef = useRef(null);

  // Decide where to send based on role + profile existence
  const resolveRedirect = useCallback(async (resolvedRole) => {
    try {
      if (resolvedRole === "recruiter") {
        await api.get("/recruiter-profile/recruiter");
        // Profile exists - redirect to Post Job page (default dashboard view)
        return "/create-job";
      }

      await api.get("/profile/user");
      return "/dashboard";
    } catch (err) {
      const status = err?.response?.status;
      if (status === 404) {
        // If coming from "post a job" flow and profile doesn't exist, go to profile form
        if (resolvedRole === "recruiter" && redirectTo === "post-job") {
          return "/recruiter-profile-form";
        }
        return resolvedRole === "recruiter"
          ? "/recruiter-profile-form"
          : "/dashboard/profile";
      }
      return resolvedRole === "recruiter" ? "/create-job" : "/dashboard";
    }
  }, [redirectTo]);

  // GOOGLE LOGIN SUCCESS HANDLER
  const handleGoogleSuccess = useCallback(async (response) => {
    if (!termsAccepted) {
      setError("Please accept the Terms & Conditions and Privacy Policy to continue.");
      return;
    }

    setLoading(true);
    setError("");
    setMessage("");

    try {
      // Map role prop: "user" -> "candidate" for backend, "recruiter" -> "recruiter"
      const roleToSend = role === "recruiter" ? "recruiter" : "candidate";

      console.log("Google sign-in (modal): Sending credential to backend...");
      const { data } = await api.post("/auth/google", {
        credential: response.credential,
        role: roleToSend
      });

      console.log("Google sign-in (modal): Backend response received", data);
      const userRole = data?.user?.role || role;

      let redirectPath = null;
      try {
        redirectPath = await resolveRedirect(userRole);
        console.log("Google sign-in (modal): Redirect path determined:", redirectPath);
      } catch (redirectErr) {
        console.error("Google sign-in (modal): Error determining redirect", redirectErr);
        // Use fallback
        redirectPath = userRole === "recruiter" ? "/create-job" : "/dashboard";
      }

      if (!redirectPath) {
        redirectPath = userRole === "recruiter" ? "/create-job" : "/dashboard";
      }

      console.log("Google sign-in (modal): Redirecting to", redirectPath);
      window.location.replace(redirectPath);
    } catch (err) {
      console.error("Google sign-in (modal): Error", err);
      setError(err?.response?.data?.message || "Google login failed");
      setLoading(false);
    }
  }, [termsAccepted, role, resolveRedirect]);

  // Keep ref updated
  useEffect(() => {
    handleGoogleSuccessRef.current = handleGoogleSuccess;
  }, [handleGoogleSuccess]);

  // LOAD GOOGLE BUTTON (Google Identity Services)
  useEffect(() => {
    const clientId = import.meta.env.VITE_GOOGLE_CLIENT_ID;
    if (!clientId) {
      console.error("VITE_GOOGLE_CLIENT_ID is missing. Please set it in your client/.env file.");
      return;
    }

    // Wait for Google script to load
    let retryCount = 0;
    const maxRetries = 50; // 5 seconds max wait time
    const initializeGoogleAuth = () => {
      if (typeof window === "undefined" || !window.google || !window.google.accounts?.id) {
        retryCount++;
        if (retryCount < maxRetries) {
          // Retry after a short delay if script not loaded yet
          setTimeout(initializeGoogleAuth, 100);
        } else {
          console.error("Google Identity script failed to load after multiple retries.");
        }
        return;
      }

      try {
        window.google.accounts.id.initialize({
          client_id: clientId,
          callback: handleGoogleSuccess,
        });

        const buttonContainer = document.getElementById("google-login-btn");
        if (buttonContainer) {
          // Clear previous button if exists
          buttonContainer.innerHTML = "";
          window.google.accounts.id.renderButton(buttonContainer, {
            theme: "outline",
            size: "large",
            // width must be a number (px) per GIS docs; we handle 100% with CSS on the container
            width: 320,
            type: "standard",
            text: "signin_with", // "Sign in with Google"
            disabled: !termsAccepted,
          });
        }
      } catch (err) {
        console.error("Error initializing Google auth:", err);
      }
    };

    // Start initialization
    initializeGoogleAuth();
  }, [role, termsAccepted]);

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60">
      <div className="w-full max-w-lg">
        <div className="w-full rounded-2xl shadow-lg bg-white border border-gray-200">
          <div className="px-6 pt-6 flex items-center justify-between border-b border-gray-200 pb-4">
            <div>
              <h2 className="text-2xl font-semibold">
                {role === "recruiter"
                  ? "Sign in as Recruiter"
                  : "Sign in as Candidate"}
              </h2>
              <p className="mt-1 text-sm text-slate-500">
                Sign in with your Google account
              </p>
            </div>
            <button
              onClick={onClose}
              className="text-slate-500 hover:text-slate-800 text-xl leading-none"
            >
              Ã
            </button>
          </div>

          <div className="px-6 pb-6 space-y-4">
            <div className="flex flex-col items-center gap-4">
              <div id="google-login-btn" className="flex justify-center w-full" />

              {/* Terms & Conditions Checkbox */}
              <div className="flex items-start gap-2 w-full pt-2">
                <input
                  type="checkbox"
                  id="terms-checkbox-modal"
                  checked={termsAccepted}
                  onChange={(e) => setTermsAccepted(e.target.checked)}
                  className="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                  required
                />
                <label htmlFor="terms-checkbox-modal" className="text-xs text-gray-700 cursor-pointer">
                  I agree to the{" "}
                  <Link to="/terms" target="_blank" className="text-blue-600 hover:underline">
                    Terms & Conditions
                  </Link>{" "}
                  and{" "}
                  <Link to="/privacy" target="_blank" className="text-blue-600 hover:underline">
                    Privacy Policy
                  </Link>{" "}
                  of HireSpark.
                </label>
              </div>

              {loading && (
                <p className="text-sm text-slate-500 text-center">
                  Please wait...
                </p>
              )}

              {message && (
                <p className="text-green-600 text-sm text-center">{message}</p>
              )}
              {error && (
                <p className="text-red-600 text-sm text-center">{error}</p>
              )}

              <p className="text-xs text-center text-slate-500">
                Currently signing in as{" "}
                <b>{role === "recruiter" ? "Recruiter" : "Candidate"}</b>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\auth\candidate-recruiter\SignUp.jsx ===
import { useState, useEffect, useCallback, useRef } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function SignUp() {
  // Use "candidate" as the default/normal user role
  const [role, setRole] = useState("candidate");
  const [loading, setLoading] = useState(false);
  const [message, setMessage] = useState("");
  const [error, setError] = useState("");
  const handleGoogleSuccessRef = useRef(null);

  // GOOGLE SIGNUP
  const handleGoogleSuccess = useCallback(async (response) => {
    setLoading(true);
    setError("");
    setMessage("");

    try {
      // Map role: "user" -> "candidate" for backend, "recruiter" -> "recruiter"
      const roleToSend = role === "recruiter" ? "recruiter" : "candidate";

      const { data } = await api.post("/auth/google", {
        credential: response.credential,
        role: roleToSend
      });

      const userRole = data?.user?.role || roleToSend;

      window.location.href = userRole === "recruiter"
        ? "/recruiter-profile"
        : "/dashboard";

    } catch (err) {
      setError(err?.response?.data?.message || "Google signup failed");
    } finally {
      setLoading(false);
    }
  }, [role]);

  // Keep ref updated
  useEffect(() => {
    handleGoogleSuccessRef.current = handleGoogleSuccess;
  }, [handleGoogleSuccess]);

  useEffect(() => {
    const clientId = import.meta.env.VITE_GOOGLE_CLIENT_ID;

    if (!clientId) {
      console.error("VITE_GOOGLE_CLIENT_ID is missing. Please set it in your .env file.");
      return;
    }

    // Wait for Google script to load
    let retryCount = 0;
    const maxRetries = 50; // 5 seconds max wait time
    const initializeGoogleAuth = () => {
      if (typeof window === "undefined" || !window.google || !window.google.accounts?.id) {
        retryCount++;
        if (retryCount < maxRetries) {
          // Retry after a short delay if script not loaded yet
          setTimeout(initializeGoogleAuth, 100);
        } else {
          console.error("Google Identity script failed to load after multiple retries.");
        }
        return;
      }

      try {
        window.google.accounts.id.initialize({
          client_id: clientId,
          callback: (response) => {
            if (handleGoogleSuccessRef.current) {
              handleGoogleSuccessRef.current(response);
            }
          },
        });

        const buttonContainer = document.getElementById("google-signup-btn");
        if (buttonContainer) {
          buttonContainer.innerHTML = "";
          window.google.accounts.id.renderButton(buttonContainer, {
            theme: "outline",
            size: "large",
            width: "100%",
          });
        }
      } catch (err) {
        console.error("Error initializing Google auth:", err);
      }
    };

    // Start initialization
    initializeGoogleAuth();
  }, [role]);

  return (
    <div className="min-h-screen flex items-center justify-center bg-white px-4 py-12">
      <div className="w-full max-w-6xl rounded-2xl bg-[#eefcfb] p-8 md:p-12">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">

          <div className="px-4 md:px-8">
            <h1 className="text-4xl md:text-5xl font-extrabold leading-tight text-slate-800">
              Talk to HR directly & get a job with better salary!
            </h1>
          </div>

          <div className="flex justify-center">
            <div className="w-full max-w-md rounded-2xl shadow-lg bg-white border border-gray-200">
              <div className="px-8 pt-8 border-b border-gray-200 pb-4">
                <h2 className="text-2xl font-semibold">Create Your Account</h2>
                <p className="mt-1 text-sm text-slate-500">Sign up with Google</p>
              </div>

              <div className="px-8 pb-8 space-y-4 pt-6">
                {/* Role Selection */}
                <div className="space-y-3">
                  <label className="block text-sm font-medium text-gray-700">
                    I want to sign up as:
                  </label>
                  <div className="grid grid-cols-2 gap-3 text-sm">
                    <label className={`flex gap-2 p-3 border-2 rounded-xl cursor-pointer transition-colors ${role === "candidate" ? "border-blue-500 bg-blue-50" : "border-gray-200 hover:border-gray-300"
                      }`}>
                      <input
                        type="radio"
                        name="role"
                        value="candidate"
                        checked={role === "candidate"}
                        onChange={() => setRole("candidate")}
                        className="mt-0.5"
                      />
                      <span className="font-medium">Candidate</span>
                    </label>

                    <label className={`flex gap-2 p-3 border-2 rounded-xl cursor-pointer transition-colors ${role === "recruiter" ? "border-blue-500 bg-blue-50" : "border-gray-200 hover:border-gray-300"
                      }`}>
                      <input
                        type="radio"
                        name="role"
                        value="recruiter"
                        checked={role === "recruiter"}
                        onChange={() => setRole("recruiter")}
                        className="mt-0.5"
                      />
                      <span className="font-medium">Recruiter</span>
                    </label>
                  </div>
                </div>

                <div id="google-signup-btn" className="flex justify-center"></div>

                {message && <p className="text-green-600 text-sm text-center">{message}</p>}
                {error && <p className="text-red-600 text-sm text-center">{error}</p>}

                <p className="text-sm text-center">
                  Already have an account? <a className="text-slate-800 hover:underline" href="/sign-in">Sign In</a>
                </p>

              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\candidate\dashboard\profile.jsx ===
import React, { useEffect, useState } from "react";
import { User, Mail, Phone, MapPin, Briefcase, GraduationCap, FileText, Edit2, Save, X } from 'lucide-react';
import api from "../../../components/apiconfig/apiconfig.jsx";

export default function ProfilePage() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(false);
  const [saving, setSaving] = useState(false);
  const [error, setError] = useState(null);
  const [isEditing, setIsEditing] = useState(false);
  const [creatingResume, setCreatingResume] = useState(false);

  const [form, setForm] = useState({
    user_id: "",
    full_name: "",
    phone: "",
    date_of_birth: "",
    gender: "",
    city: "",
    state: "",
    country: "India",
    highest_qualification: "",
    trade_stream: "",
    key_skills: [],
    skill_level: "",
    experience_type: "",
    job_type: "",
    preferred_work_type: "",
    availability: "",
    expected_salary: "",
    id_proof_available: "",
    preferred_contact_method: "",
    willing_to_relocate: false,
    experience_years: "",
    linkedin_url: "",
    github_url: "",
    resume_path: "",
  });

  const [selectedResumeFile, setSelectedResumeFile] = useState(null);
  const [resumeOption, setResumeOption] = useState("have_resume");

  const genderOptions = ["Select", "Male", "Female", "Other"];
  const qualificationOptions = ["Select", "High School", "Diploma", "Bachelor's Degree", "Master's Degree", "PhD", "Other"];
  const skillOptions = ["Computer Basics", "Excel / Data Entry", "Software / IT", "Electrical", "Mechanical", "Plumbing", "Carpentry", "Welding", "Driving", "Communication", "Customer Service"];
  const skillLevelOptions = ["Select", "Beginner", "Intermediate", "Advanced"];
  const experienceTypeOptions = ["Select", "Fresher", "Internship", "1-2 Years", "2+ Years"];
  const jobTypeOptions = ["Select", "Full-Time", "Part-Time", "Internship", "Contract"];
  const workTypeOptions = ["Select", "Office", "Field", "Factory", "Work from Home"];
  const availabilityOptions = ["Select", "Immediately", "Within 7 Days", "Within 15 Days"];
  const idProofOptions = ["Select", "Aadhaar", "PAN", "Driving License", "None"];
  const contactMethodOptions = ["Select", "Call", "WhatsApp"];
  const relocateOptions = ["Select", "Yes", "No"];

  useEffect(() => {
    loadProfile();
  }, []);

  async function loadProfile() {
    setLoading(true);
    setError(null);
    try {
      const res = await api.get("/profile/user");
      if (res?.data?.success && res.data.user) {
        setUser(res.data.user);
        setForm(mapUserToForm(res.data.user));
      }
    } catch (err) {
      // Error loading profile
    } finally {
      try {
        const auth = await api.get('/auth/session');
        const authUser = auth?.data?.user;
        if (authUser) {
          setForm((s) => (s.user_id ? s : { ...s, user_id: authUser.id || authUser.sub || s.user_id }));
        }
      } catch (ignore) { }
      setLoading(false);
    }
  }

  function mapUserToForm(u) {
    let keySkillsArray = [];
    if (u.key_skills) {
      if (Array.isArray(u.key_skills)) {
        keySkillsArray = u.key_skills;
      } else if (typeof u.key_skills === 'string') {
        try {
          const parsed = JSON.parse(u.key_skills);
          keySkillsArray = Array.isArray(parsed) ? parsed : [];
        } catch (e) {
          keySkillsArray = u.key_skills.split(",").map(s => s.trim()).filter(s => s);
        }
      }
    }

    let willingToRelocateValue = false;
    if (u.willing_to_relocate !== undefined && u.willing_to_relocate !== null) {
      if (typeof u.willing_to_relocate === 'boolean') {
        willingToRelocateValue = u.willing_to_relocate;
      } else if (typeof u.willing_to_relocate === 'number') {
        willingToRelocateValue = u.willing_to_relocate === 1;
      } else if (typeof u.willing_to_relocate === 'string') {
        const lower = u.willing_to_relocate.toLowerCase();
        willingToRelocateValue = lower === 'yes' || lower === 'true' || lower === '1';
      }
    }

    return {
      user_id: u.user_id || u.id || "",
      full_name: u.full_name || "",
      phone: u.phone || "",
      date_of_birth: u.date_of_birth || "",
      gender: u.gender || "",
      city: u.city || "",
      state: u.state || "",
      country: u.country || "India",
      highest_qualification: u.highest_qualification || "",
      trade_stream: u.trade_stream || "",
      key_skills: keySkillsArray,
      skill_level: u.skill_level || "",
      experience_type: u.experience_type || "",
      job_type: u.job_type || "",
      preferred_work_type: u.preferred_work_type || "",
      availability: u.availability || "",
      expected_salary: u.expected_salary || "",
      id_proof_available: u.id_proof_available || "",
      preferred_contact_method: u.preferred_contact_method || "",
      willing_to_relocate: willingToRelocateValue,
      experience_years: u.experience_years !== undefined && u.experience_years !== null ? String(u.experience_years) : "",
      linkedin_url: u.linkedin_url || "",
      github_url: u.github_url || "",
      resume_path: u.resume_path || "",
    };
  }

  function handleChange(e) {
    const { name, value } = e.target;
    setForm((s) => ({ ...s, [name]: value }));
  }

  function handleSkillsChange(e) {
    const selectedOptions = Array.from(e.target.selectedOptions, option => option.value);
    setForm((s) => ({ ...s, key_skills: selectedOptions }));
  }

  async function handleCreateResume() {
    setCreatingResume(true);
    setError(null);
    try {
      const res = await api.post("/profile/create-resume", {
        user_id: form.user_id || user?.user_id || user?.id,
        profile_data: form
      });
      if (res?.data?.success) {
        setForm((s) => ({ ...s, resume_path: res.data.resume_path }));
        setUser((u) => ({ ...u, resume_path: res.data.resume_path }));
        alert("Resume created successfully!");
      } else {
        setError(res?.data?.message || "Failed to create resume");
      }
    } catch (err) {
      setError(err?.response?.data?.message || err.message || "Failed to create resume");
    } finally {
      setCreatingResume(false);
    }
  }

  function handleFileSelect(e) {
    const file = e.target.files?.[0] || null;
    setSelectedResumeFile(file);
    setForm((s) => ({ ...s, resume_path: file ? file.name : s.resume_path }));
  }

  async function uploadResume(file) {
    return file ? file.name : null;
  }

  async function handleSave(e) {
    e?.preventDefault();
    setSaving(true);
    setError(null);

    try {
      let payloadUserId = form.user_id;
      if (!payloadUserId) {
        try {
          const auth = await api.get('/auth/session');
          const authUser = auth?.data?.user;
          if (authUser) {
            payloadUserId = authUser.id || authUser.sub || payloadUserId;
            setForm((s) => ({ ...s, user_id: payloadUserId }));
          } else {
            setError('Cannot save profile: missing user session. Please sign in again.');
            setSaving(false);
            return;
          }
        } catch (err) {
          setError('Cannot save profile: missing user session. Please sign in again.');
          setSaving(false);
          return;
        }
      }

      let resumePathToSend = form.resume_path;
      if (selectedResumeFile && resumeOption === "have_resume") {
        resumePathToSend = await uploadResume(selectedResumeFile);
      } else if (resumeOption === "create_for_me" && !form.resume_path) {
        try {
          const createResumeRes = await api.post("/profile/create-resume", {
            user_id: payloadUserId,
            profile_data: form
          });
          if (createResumeRes?.data?.success) {
            resumePathToSend = createResumeRes.data.resume_path;
          }
        } catch (err) {
          // Could not create resume
        }
      }

      let willingToRelocateBool = false;
      if (form.willing_to_relocate !== undefined && form.willing_to_relocate !== null) {
        if (typeof form.willing_to_relocate === 'boolean') {
          willingToRelocateBool = form.willing_to_relocate;
        } else if (typeof form.willing_to_relocate === 'string') {
          const lower = form.willing_to_relocate.toLowerCase();
          willingToRelocateBool = lower === 'yes' || lower === 'true' || lower === '1';
        } else {
          willingToRelocateBool = Boolean(form.willing_to_relocate);
        }
      }

      const toNullIfEmpty = (value) => {
        if (value === undefined || value === null || value === '') return null;
        return value;
      };

      const payload = {
        user_id: payloadUserId || undefined,
        full_name: form.full_name || null,
        phone: toNullIfEmpty(form.phone),
        date_of_birth: toNullIfEmpty(form.date_of_birth),
        gender: toNullIfEmpty(form.gender),
        city: toNullIfEmpty(form.city),
        state: toNullIfEmpty(form.state),
        country: form.country || "India",
        highest_qualification: toNullIfEmpty(form.highest_qualification),
        trade_stream: toNullIfEmpty(form.trade_stream),
        key_skills: Array.isArray(form.key_skills) && form.key_skills.length > 0 ? form.key_skills : (form.key_skills && !Array.isArray(form.key_skills) ? [form.key_skills] : []),
        skill_level: toNullIfEmpty(form.skill_level),
        experience_type: toNullIfEmpty(form.experience_type),
        job_type: toNullIfEmpty(form.job_type),
        preferred_work_type: toNullIfEmpty(form.preferred_work_type),
        availability: toNullIfEmpty(form.availability),
        expected_salary: toNullIfEmpty(form.expected_salary),
        id_proof_available: toNullIfEmpty(form.id_proof_available),
        preferred_contact_method: toNullIfEmpty(form.preferred_contact_method),
        willing_to_relocate: willingToRelocateBool,
        experience_years: form.experience_years && form.experience_years !== '' ? parseFloat(form.experience_years) : null,
        resume_path: toNullIfEmpty(resumePathToSend),
        linkedin_url: toNullIfEmpty(form.linkedin_url),
        github_url: toNullIfEmpty(form.github_url),
      };

      const res = await api.put("/profile/user", payload);

      if (res?.data?.success) {
        setUser(res.data.user || payload);
        setForm(mapUserToForm(res.data.user || payload));
        setIsEditing(false);
        setSelectedResumeFile(null);

        const applyJobId = localStorage.getItem("postLoginApplyJobId");
        const redirectPath = localStorage.getItem("postLoginRedirect");

        if (applyJobId && redirectPath) {
          localStorage.removeItem("postLoginApplyJobId");
          localStorage.removeItem("postLoginRedirect");
          alert("Profile saved successfully! You can now apply for the job.");
          window.location.href = redirectPath;
          return;
        } else {
          alert("Profile saved successfully!");
        }
      } else {
        const errorMsg = res?.data?.message || res?.data?.error || "Unknown server response";
        setError(errorMsg);
      }
    } catch (err) {
      const errorMsg = err?.response?.data?.message || err?.response?.data?.error || err.message || "Failed to save profile";
      setError(errorMsg);
    } finally {
      setSaving(false);
    }
  }

  function handleEditClick() {
    setIsEditing(true);
  }

  function handleCancel() {
    setIsEditing(false);
    if (user) setForm(mapUserToForm(user));
    setSelectedResumeFile(null);
    setResumeOption("have_resume");
  }

  if (loading) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="flex items-center justify-center h-64">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"></div>
        </div>
      </div>
    );
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-gray-900">Profile</h1>
            <p className="text-gray-600 mt-1">Manage your professional information</p>
          </div>
          {!isEditing && user && (
            <button onClick={handleEditClick} className="btn btn-primary px-4 py-2 inline-flex items-center gap-2">
              <Edit2 size={18} />
              Edit Profile
            </button>
          )}
        </div>

        {!isEditing ? (
          <ProfileView user={user} onEdit={handleEditClick} />
        ) : (
          <form onSubmit={handleSave} className="space-y-6">
            {error && (
              <div className="p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
                {error}
              </div>
            )}

            {/* Personal Information */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                  <User size={20} />
                  Personal Information
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Full Name *</label>
                    <input
                      name="full_name"
                      value={form.full_name}
                      onChange={handleChange}
                      required
                      placeholder="Enter your full name"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Phone Number *</label>
                    <input
                      name="phone"
                      value={form.phone}
                      onChange={handleChange}
                      required
                      placeholder="Enter your phone number"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Date of Birth *</label>
                    <input
                      name="date_of_birth"
                      type="date"
                      value={form.date_of_birth}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Gender *</label>
                    <select
                      name="gender"
                      value={form.gender}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {genderOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                </div>
              </div>
            </div>

            {/* Location */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                  <MapPin size={20} />
                  Location
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">City *</label>
                    <input
                      name="city"
                      value={form.city}
                      onChange={handleChange}
                      required
                      placeholder="Enter your city"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">State *</label>
                    <input
                      name="state"
                      value={form.state}
                      onChange={handleChange}
                      required
                      placeholder="Enter your state"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Country *</label>
                    <input
                      name="country"
                      value={form.country}
                      onChange={handleChange}
                      required
                      placeholder="Enter your country"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                </div>
              </div>
            </div>

            {/* Education & Skills */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                  <GraduationCap size={20} />
                  Education & Skills
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Highest Qualification *</label>
                    <select
                      name="highest_qualification"
                      value={form.highest_qualification}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {qualificationOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Trade / Stream *</label>
                    <input
                      name="trade_stream"
                      value={form.trade_stream}
                      onChange={handleChange}
                      required
                      placeholder="e.g. Electrician, Computer"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Key Skills *</label>
                    <select
                      name="key_skills"
                      multiple
                      value={form.key_skills}
                      onChange={handleSkillsChange}
                      required
                      size="4"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {skillOptions.map(skill => (
                        <option key={skill} value={skill}>{skill}</option>
                      ))}
                    </select>
                    <p className="text-xs text-gray-500 mt-1">Hold Ctrl/Cmd to select multiple</p>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Skill Level *</label>
                    <select
                      name="skill_level"
                      value={form.skill_level}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {skillLevelOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                </div>
              </div>
            </div>

            {/* Experience */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                  <Briefcase size={20} />
                  Experience
                </h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Experience Type *</label>
                    <select
                      name="experience_type"
                      value={form.experience_type}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {experienceTypeOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Experience Years</label>
                    <input
                      name="experience_years"
                      type="number"
                      step="0.1"
                      min="0"
                      max="99.9"
                      value={form.experience_years}
                      onChange={handleChange}
                      placeholder="e.g., 2.5"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                </div>
              </div>
            </div>

            {/* Job Preferences */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4">Job Preferences</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Job Type *</label>
                    <select
                      name="job_type"
                      value={form.job_type}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {jobTypeOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Preferred Work Type *</label>
                    <select
                      name="preferred_work_type"
                      value={form.preferred_work_type}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {workTypeOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Availability *</label>
                    <select
                      name="availability"
                      value={form.availability}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {availabilityOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Expected Salary</label>
                    <select
                      name="expected_salary"
                      value={form.expected_salary}
                      onChange={handleChange}
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      <option value="">Optional</option>
                      <option value="0-20000">â¹0 - â¹20,000</option>
                      <option value="20000-40000">â¹20,000 - â¹40,000</option>
                      <option value="40000-60000">â¹40,000 - â¹60,000</option>
                      <option value="60000-80000">â¹60,000 - â¹80,000</option>
                      <option value="80000+">â¹80,000+</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            {/* Documents */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                  <FileText size={20} />
                  Documents
                </h3>

                <div className="mb-4">
                  <label className="block text-sm font-medium text-gray-700 mb-2">Resume Option</label>
                  <div className="flex gap-4">
                    <label className="flex items-center cursor-pointer">
                      <input
                        type="radio"
                        name="resume_option"
                        value="have_resume"
                        checked={resumeOption === "have_resume"}
                        onChange={(e) => setResumeOption(e.target.value)}
                        className="mr-2 w-4 h-4"
                      />
                      <span className="text-sm">I have a resume</span>
                    </label>
                    <label className="flex items-center cursor-pointer">
                      <input
                        type="radio"
                        name="resume_option"
                        value="create_for_me"
                        checked={resumeOption === "create_for_me"}
                        onChange={(e) => setResumeOption(e.target.value)}
                        className="mr-2 w-4 h-4"
                      />
                      <span className="text-sm">Create for me</span>
                    </label>
                  </div>
                </div>

                {resumeOption === "have_resume" && (
                  <div className="mb-4">
                    <label className="block text-sm font-medium text-gray-700 mb-2">Upload Resume</label>
                    <div className="border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-400 transition-colors">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-3">
                          <FileText size={24} className="text-blue-600" />
                          <div>
                            <p className="text-sm font-medium text-gray-900">
                              {selectedResumeFile ? selectedResumeFile.name : (form.resume_path || 'No file chosen')}
                            </p>
                            <p className="text-xs text-gray-500">PDF, DOC, DOCX up to 10MB</p>
                          </div>
                        </div>
                        <label className="cursor-pointer">
                          <span className="btn btn-primary btn-sm">Choose File</span>
                          <input type="file" accept=".pdf,.doc,.docx" onChange={handleFileSelect} className="hidden" />
                        </label>
                      </div>
                    </div>
                  </div>
                )}

                {resumeOption === "create_for_me" && (
                  <div className="mb-4">
                    <button
                      type="button"
                      onClick={handleCreateResume}
                      disabled={creatingResume}
                      className="btn btn-primary"
                    >
                      {creatingResume ? "Creating Resume..." : "Create Resume"}
                    </button>
                    {form.resume_path && (
                      <p className="text-xs text-green-600 mt-2">Resume created: {form.resume_path}</p>
                    )}
                  </div>
                )}

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1.5">ID Proof Available *</label>
                  <select
                    name="id_proof_available"
                    value={form.id_proof_available}
                    onChange={handleChange}
                    required
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    {idProofOptions.map(opt => (
                      <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                    ))}
                  </select>
                </div>
              </div>
            </div>

            {/* Contact Preference */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4">Contact Preference</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Preferred Contact Method *</label>
                    <select
                      name="preferred_contact_method"
                      value={form.preferred_contact_method}
                      onChange={handleChange}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {contactMethodOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">Willing to Relocate *</label>
                    <select
                      name="willing_to_relocate"
                      value={form.willing_to_relocate === true || form.willing_to_relocate === "Yes" ? "Yes" : form.willing_to_relocate === false || form.willing_to_relocate === "No" ? "No" : ""}
                      onChange={(e) => {
                        const value = e.target.value;
                        setForm((s) => ({ ...s, willing_to_relocate: value === "Yes" }));
                      }}
                      required
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                      {relocateOptions.map(opt => (
                        <option key={opt} value={opt === "Select" ? "" : opt}>{opt}</option>
                      ))}
                    </select>
                  </div>
                </div>
              </div>
            </div>

            {/* Professional Links */}
            <div className="card">
              <div className="p-6">
                <h3 className="text-lg font-semibold text-gray-900 mb-4">Professional Links</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">LinkedIn URL</label>
                    <input
                      name="linkedin_url"
                      value={form.linkedin_url}
                      onChange={handleChange}
                      placeholder="https://linkedin.com/in/yourprofile"
                      type="url"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-1.5">GitHub URL</label>
                    <input
                      name="github_url"
                      value={form.github_url}
                      onChange={handleChange}
                      placeholder="https://github.com/yourusername"
                      type="url"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    />
                  </div>
                </div>
              </div>
            </div>

            {/* Action Buttons */}
            <div className="flex gap-3 pt-4">
              <button
                type="submit"
                disabled={saving}
                className="btn btn-primary px-4 py-2 inline-flex items-center gap-2"
              >
                <Save size={18} />
                {saving ? "Saving..." : "Save Profile"}
              </button>
              <button
                type="button"
                onClick={handleCancel}
                className="btn btn-outline px-4 py-2 inline-flex items-center gap-2"
              >
                <X size={18} />
                Cancel
              </button>
            </div>
          </form>
        )}
      </div>
    </div>
  );
}

function ProfileView({ user, onEdit }) {
  if (!user) {
    return (
      <div className="card">
        <div className="p-12 text-center">
          <div className="w-20 h-20 rounded-full bg-blue-50 flex items-center justify-center mx-auto mb-4">
            <User size={40} className="text-blue-600" />
          </div>
          <h3 className="text-xl font-semibold text-gray-900 mb-2">No Profile Found</h3>
          <p className="text-gray-600 mb-6">Create your professional profile to get started</p>
          <button onClick={onEdit} className="btn btn-primary">
            Create Profile
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* User Header Card */}
      <div className="card bg-gradient-to-br from-blue-50 to-blue-100">
        <div className="p-6">
          <div className="flex items-center gap-4">
            <div className="w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 flex items-center justify-center text-white font-bold text-2xl">
              {user.full_name ? user.full_name.charAt(0).toUpperCase() : "U"}
            </div>
            <div>
              <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
              <p className="text-gray-700">{user.highest_qualification || "Add education"}</p>
              <div className="flex items-center gap-4 text-sm text-gray-600 mt-1">
                <span>{user.experience_years ?? 0} years experience</span>
                <span>â¢</span>
                <span>{user.phone || "No phone"}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Info Grid */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div className="card">
          <div className="p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
              <User size={20} />
              Personal Information
            </h3>
            <div className="space-y-3">
              <InfoItem label="Full Name" value={user.full_name} />
              <InfoItem label="Phone" value={user.phone} />
              <InfoItem label="Date of Birth" value={user.date_of_birth} />
              <InfoItem label="Gender" value={user.gender} />
            </div>
          </div>
        </div>

        <div className="card">
          <div className="p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
              <MapPin size={20} />
              Location
            </h3>
            <div className="space-y-3">
              <InfoItem label="City" value={user.city} />
              <InfoItem label="State" value={user.state} />
              <InfoItem label="Country" value={user.country} />
              <InfoItem label="Willing to Relocate" value={user.willing_to_relocate === 1 || user.willing_to_relocate === true || user.willing_to_relocate === "Yes" ? "Yes" : "No"} />
            </div>
          </div>
        </div>

        <div className="card">
          <div className="p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
              <GraduationCap size={20} />
              Education & Skills
            </h3>
            <div className="space-y-3">
              <InfoItem label="Qualification" value={user.highest_qualification} />
              <InfoItem label="Trade/Stream" value={user.trade_stream} />
              <InfoItem label="Key Skills" value={Array.isArray(user.key_skills) ? user.key_skills.join(", ") : user.key_skills} />
              <InfoItem label="Skill Level" value={user.skill_level} />
            </div>
          </div>
        </div>

        <div className="card">
          <div className="p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
              <Briefcase size={20} />
              Job Preferences
            </h3>
            <div className="space-y-3">
              <InfoItem label="Experience Type" value={user.experience_type} />
              <InfoItem label="Experience Years" value={user.experience_years !== undefined && user.experience_years !== null ? `${user.experience_years} years` : "â"} />
              <InfoItem label="Job Type" value={user.job_type} />
              <InfoItem label="Expected Salary" value={user.expected_salary} />
            </div>
          </div>
        </div>
      </div>

      {/* Professional Links */}
      {(user.linkedin_url || user.github_url) && (
        <div className="card">
          <div className="p-6">
            <h3 className="text-lg font-semibold text-gray-900 mb-4">Professional Links</h3>
            <div className="space-y-3">
              {user.linkedin_url && <LinkItem label="LinkedIn" url={user.linkedin_url} />}
              {user.github_url && <LinkItem label="GitHub" url={user.github_url} />}
            </div>
          </div>
        </div>
      )}

      {/* Resume */}
      {user.resume_path && (() => {
        let resumeUrl = user.resume_path;
        if (!resumeUrl.startsWith('http')) {
          const apiBase = import.meta.env.VITE_API_BASE || "http://localhost:5000/api";
          const serverBase = apiBase.replace('/api', '');
          const resumePath = resumeUrl.startsWith('/') ? resumeUrl : `/${resumeUrl}`;
          resumeUrl = `${serverBase}${resumePath}`;
        }

        return (
          <div className="card">
            <div className="p-6">
              <a
                href={resumeUrl}
                target="_blank"
                rel="noopener noreferrer"
                className="inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium"
              >
                <FileText size={18} />
                View Resume
              </a>
            </div>
          </div>
        );
      })()}
    </div>
  );
}

function InfoItem({ label, value }) {
  return (
    <div className="flex justify-between items-center py-2 border-b border-gray-100 last:border-0">
      <span className="text-sm text-gray-600">{label}</span>
      <span className="text-sm font-semibold text-gray-900">{value || "â"}</span>
    </div>
  );
}

function LinkItem({ label, url }) {
  if (!url) return null;

  return (
    <div className="flex justify-between items-center py-2 border-b border-gray-100">
      <span className="text-sm text-gray-600">{label}</span>
      <a
        href={url}
        target="_blank"
        rel="noreferrer"
        className="text-sm text-blue-600 hover:text-blue-700 font-medium truncate max-w-xs"
      >
        {url}
      </a>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\candidate\jobs\applied-list.jsx ===
import { useEffect, useState } from "react";
import { Link } from 'react-router-dom';
import { Building2, MapPin, Briefcase, Clock } from 'lucide-react';
import api from '../../../components/apiconfig/apiconfig';

const statusColors = {
  applied: "bg-blue-50 text-blue-700 border-blue-200",
  reviewed: "bg-purple-50 text-purple-700 border-purple-200",
  shortlisted: "bg-amber-50 text-amber-700 border-amber-200",
  rejected: "bg-red-50 text-red-700 border-red-200",
  hired: "bg-emerald-50 text-emerald-700 border-emerald-200"
};

const statusLabels = {
  applied: "Applied",
  reviewed: "Under Review",
  shortlisted: "Shortlisted",
  rejected: "Rejected",
  hired: "Hired"
};

export default function Applied() {
  const [applications, setApplications] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  const fetchAppliedJobs = async () => {
    try {
      setLoading(true);
      setError(null);
      const response = await api.get('/jobs/applied-jobs');

      if (response.data.ok) {
        setApplications(response.data.applications || []);
      } else {
        throw new Error(response.data.error || 'Failed to load applications');
      }
    } catch (err) {
      console.error('Fetch error:', err);
      setError(err?.response?.data?.error || err?.response?.data?.message || err.message || 'Failed to load applications');
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchAppliedJobs();
  }, []);

  const formatDate = (dateString) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  const getLocation = (application) => {
    if (application.city && application.locality) {
      return `${application.city}, ${application.locality}`;
    }
    return application.city || application.locality || 'Location not specified';
  };

  if (loading) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-4">
          {[1, 2, 3].map((i) => (
            <div key={i} className="card animate-pulse">
              <div className="p-6">
                <div className="flex gap-4">
                  <div className="w-16 h-16 bg-gray-200 rounded-lg"></div>
                  <div className="flex-1 space-y-3">
                    <div className="h-5 bg-gray-200 rounded w-1/3"></div>
                    <div className="h-4 bg-gray-200 rounded w-1/4"></div>
                    <div className="flex gap-2">
                      <div className="h-6 bg-gray-200 rounded w-20"></div>
                      <div className="h-6 bg-gray-200 rounded w-24"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="card">
          <div className="card-padding text-center py-12">
            <div className="text-5xl mb-4">â ï¸</div>
            <h3 className="text-xl font-semibold text-text-dark mb-2">Unable to Load Applications</h3>
            <p className="text-red-600 mb-6 text-sm">{error}</p>
            <button onClick={fetchAppliedJobs} className="btn btn-primary">
              Try Again
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-text-dark">My Applications</h1>
            <p className="text-text-muted mt-1">Track your job applications</p>
          </div>
          <div className="badge badge-primary">
            {applications.length} Total
          </div>
        </div>

        {applications.length === 0 ? (
          <div className="card">
            <div className="card-padding text-center py-16">
              <div className="text-6xl mb-4">ð</div>
              <h3 className="text-xl font-semibold text-text-dark mb-2">No Applications Yet</h3>
              <p className="text-text-muted mb-6">
                Start your job search journey! Apply to positions that match your skills.
              </p>
              <div className="flex gap-3 justify-center">
                <Link to="/jobs" className="btn btn-primary">
                  Browse Jobs
                </Link>
                <Link to="/dashboard/profile" className="btn btn-outline">
                  Update Profile
                </Link>
              </div>
            </div>
          </div>
        ) : (
          <div className="space-y-4">
            {applications.map((application) => (
              <div key={application.id} className="card hover:shadow-lg transition-shadow">
                <div className="p-6">
                  <div className="flex flex-col lg:flex-row gap-4 lg:gap-6">
                    {/* Company Logo */}
                    {application.logo_path ? (
                      <img
                        src={application.logo_path}
                        alt={application.company}
                        className="w-16 h-16 rounded-lg object-cover border"
                      />
                    ) : (
                      <div className="w-16 h-16 rounded-lg bg-primary-50 border border-primary-200 flex items-center justify-center">
                        <Building2 size={28} className="text-primary-600" />
                      </div>
                    )}

                    {/* Job Info */}
                    <div className="flex-1">
                      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-3">
                        <div>
                          <h3 className="text-xl font-bold text-text-dark mb-1">
                            {application.title}
                          </h3>
                          <p className="text-base font-semibold text-gray-700">{application.company}</p>
                        </div>
                        <span className={`px-3 py-1.5 rounded-lg border text-sm font-medium ${statusColors[application.status] || 'bg-gray-50 text-gray-700 border-gray-200'}`}>
                          {statusLabels[application.status] || application.status}
                        </span>
                      </div>

                      {/* Job Details */}
                      <div className="flex flex-wrap gap-2 mb-3">
                        <span className="inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-700 rounded-lg text-sm border border-blue-200">
                          <Briefcase size={14} />
                          {application.job_type}
                        </span>
                        <span className="inline-flex items-center gap-1 px-3 py-1 bg-gray-50 text-gray-700 rounded-lg text-sm border border-gray-200">
                          <MapPin size={14} />
                          {getLocation(application)}
                        </span>
                        {application.salary && (
                          <span className="px-3 py-1 bg-emerald-50 text-emerald-700 rounded-lg text-sm border border-emerald-200">
                            ð° {application.salary}
                          </span>
                        )}
                      </div>

                      {/* Applied Date */}
                      <div className="flex items-center gap-2 text-sm text-gray-600">
                        <Clock size={16} />
                        <span>Applied on {formatDate(application.applied_at)}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\candidate\jobs\saved-list.jsx ===
import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Building2, MapPin, Briefcase, GraduationCap, Star, Trash2, Eye, Clock } from 'lucide-react';
import api from '../../../components/apiconfig/apiconfig';

export default function Saved() {
  const [savedJobs, setSavedJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState('');
  const navigate = useNavigate();

  const fetchSavedJobs = async () => {
    try {
      setLoading(true);
      setError('');
      const response = await api.get('/jobs/saved-jobs');

      if (response.data.success) {
        setSavedJobs(response.data.data);
      } else {
        setError(response.data.message || 'Failed to fetch saved jobs');
      }
    } catch (err) {
      console.error('Error fetching saved jobs:', err);
      if (err.response?.data?.message) {
        setError(err.response.data.message);
      } else if (err.message) {
        setError(err.message);
      } else {
        setError('Error fetching saved jobs. Please try again.');
      }
    } finally {
      setLoading(false);
    }
  };

  const removeSavedJob = async (jobId) => {
    try {
      const response = await api.delete(`/jobs/save/${jobId}`);

      if (response.data.success) {
        setSavedJobs(prev => prev.filter(job => job.job_id !== jobId));
      } else {
        alert(response.data.message || 'Failed to remove job');
      }
    } catch (err) {
      console.error('Error removing job:', err);
      alert(err.message || 'Error removing job. Please try again.');
    }
  };

  const handleViewJob = (jobId) => {
    navigate(`/jobs/${jobId}`);
  };

  const formatDate = (dateString) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  useEffect(() => {
    fetchSavedJobs();
  }, []);

  if (loading) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="space-y-4">
          {[1, 2, 3].map((i) => (
            <div key={i} className="card animate-pulse">
              <div className="p-6">
                <div className="flex gap-4">
                  <div className="w-16 h-16 bg-gray-200 rounded-lg"></div>
                  <div className="flex-1 space-y-3">
                    <div className="h-5 bg-gray-200 rounded w-1/3"></div>
                    <div className="h-4 bg-gray-200 rounded w-1/4"></div>
                    <div className="flex gap-2">
                      <div className="h-6 bg-gray-200 rounded w-20"></div>
                      <div className="h-6 bg-gray-200 rounded w-24"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="card">
          <div className="card-padding text-center py-12">
            <div className="text-5xl mb-4">â ï¸</div>
            <h3 className="text-xl font-semibold text-text-dark mb-2">Unable to Load Saved Jobs</h3>
            <p className="text-red-600 mb-6 text-sm">{error}</p>
            <div className="flex gap-3 justify-center">
              <button onClick={fetchSavedJobs} className="btn btn-primary">
                Try Again
              </button>
              <button onClick={() => navigate('/jobs')} className="btn btn-outline">
                Browse Jobs
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-text-dark">Saved Jobs</h1>
            <p className="text-text-muted mt-1">Your favorite job opportunities</p>
          </div>
          <div className="badge badge-primary">
            {savedJobs.length} Saved
          </div>
        </div>

        {savedJobs.length === 0 ? (
          <div className="card">
            <div className="card-padding text-center py-16">
              <div className="text-6xl mb-4">â­</div>
              <h3 className="text-xl font-semibold text-text-dark mb-2">No Saved Jobs Yet</h3>
              <p className="text-text-muted mb-6">
                Start building your job collection! Save positions that interest you to review and apply later.
              </p>
              <div className="flex gap-3 p-2 justify-center">
              <button
  onClick={() => navigate('/jobs')}
  className="btn btn-primary px-6 py-3"
>
  Browse Jobs
</button>

<button
  onClick={() => navigate('/dashboard')}
  className="btn btn-outline px-6 py-3"
>
  Back to Dashboard
</button>

              </div>
            </div>
          </div>
        ) : (
          <div className="space-y-4">
            {savedJobs.map((job) => (
              <div key={job.job_id} className="card hover:shadow-lg transition-shadow">
                <div className="p-6">
                  <div className="flex flex-col lg:flex-row gap-4 lg:gap-6">
                    {/* Job Logo/Icon */}
                    {job.logo_path ? (
                      <img
                        src={job.logo_path}
                        alt={job.company}
                        className="w-16 h-16 rounded-lg object-cover border"
                      />
                    ) : (
                      <div className="w-16 h-16 rounded-lg bg-amber-50 border border-amber-200 flex items-center justify-center">
                        <Star size={28} className="text-amber-600" />
                      </div>
                    )}

                    {/* Job Details */}
                    <div className="flex-1">
                      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-3">
                        <div>
                          <h3 className="text-xl font-bold text-text-dark mb-1">
                            {job.title}
                          </h3>
                          <p className="text-base font-semibold text-gray-700">{job.company}</p>
                        </div>
                        <span className="px-3 py-1.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-lg text-sm font-medium inline-flex items-center gap-1.5 self-start">
                          <Star size={14} />
                          Saved
                        </span>
                      </div>

                      {/* Job Info */}
                      <div className="flex flex-wrap gap-2 mb-3">
                        <span className="inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-700 rounded-lg text-sm border border-blue-200">
                          <Briefcase size={14} />
                          {job.type}
                        </span>
                        <span className="inline-flex items-center gap-1 px-3 py-1 bg-gray-50 text-gray-700 rounded-lg text-sm border border-gray-200">
                          <MapPin size={14} />
                          {job.location}
                        </span>
                        {job.experience && (
                          <span className="inline-flex items-center gap-1 px-3 py-1 bg-purple-50 text-purple-700 rounded-lg text-sm border border-purple-200">
                            <GraduationCap size={14} />
                            {job.experience}
                          </span>
                        )}
                        {job.salary && (
                          <span className="px-3 py-1 bg-emerald-50 text-emerald-700 rounded-lg text-sm border border-emerald-200">
                            ð° {job.salary}
                          </span>
                        )}
                      </div>

                      {/* Saved Date */}
                      <div className="flex items-center gap-2 text-sm text-gray-600">
                        <Clock size={16} />
                        <span>Saved on {formatDate(job.saved_at)}</span>
                      </div>
                    </div>

                    {/* Action Buttons */}
                    <div className="flex gap-2 lg:flex-col">
                      <button
                        onClick={() => handleViewJob(job.id)}
                        className="btn btn-primary btn-sm flex items-center gap-1.5 flex-1 lg:flex-none"
                      >
                        <Eye size={16} />
                        View Job
                      </button>
                      <button
                        onClick={() => removeSavedJob(job.job_id)}
                        className="btn btn-outline btn-sm text-red-600 hover:bg-red-50 border-red-200 flex items-center gap-1.5 flex-1 lg:flex-none"
                      >
                        <Trash2 size={16} />
                        Remove
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\companies\companies.jsx ===


export default function Companies() {
  const data = [
    { name: "CloudMints", roles: 8, tags: ["Software", "Data"] },
    { name: "PixelPath", roles: 3, tags: ["Design", "Product"] },
  ];
  return (

    <div className="max-w-6xl mx-auto px-4 py-10">
      <h1 className="text-3xl font-extrabold mb-6">Companies</h1>
      <div className="grid md:grid-cols-3 gap-5">
        {data.map((c) => (
          <div key={c.name} className="rounded-2xl bg-white border border-gray-200 shadow-sm">
            <div className="p-6">
              <h3 className="text-xl font-semibold mb-4">{c.name}</h3>
              <div className="mb-3 flex flex-wrap gap-2">
                {c.tags.map((t) => (
                  <span key={t} className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border border-gray-300 text-gray-700 bg-white">
                    {t}
                  </span>
                ))}
              </div>
              <p className="text-sm text-slate-600 mb-4">
                Open roles: <b>{c.roles}</b>
              </p>
              <div className="flex gap-2">
                <button className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-lg transition-colors">View roles</button>
                <button className="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-4 py-2 rounded-lg transition-colors">
                  Follow
                </button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\guide\career-guide.jsx ===
import { Download, Play, BookOpen, Rocket, Award, TrendingUp } from "lucide-react";

export default function CareerKit() {
  const resources = [
    {
      title: "Professional Resume Templates",
      desc: "ATS-friendly resume templates designed specifically for freshers and 0â2 years experience",
      cta: "Download Template",
      icon: Download,
      color: "bg-blue-100 text-blue-600 border border-blue-200",
      stats: "5000+ Downloads"
    },
    {
      title: "Interview Preparation Kit",
      desc: "Top 50 most asked questions with model answers for internships and entry-level roles",
      cta: "Start Practicing",
      icon: Play,
      color: "bg-blue-100 text-blue-600 border border-blue-200",
      stats: "200+ Success Stories"
    },
    {
      title: "Career Skill Guides",
      desc: "Comprehensive roadmaps for Software Development, Data Science, UI/UX Design, and Digital Marketing",
      cta: "Explore Guides",
      icon: BookOpen,
      color: "bg-blue-100 text-blue-600 border border-blue-200",
      stats: "15+ Career Paths"
    },
    {
      title: "Cover Letter Builder",
      desc: "Create professional cover letters tailored to specific job applications in minutes",
      cta: "Build Now",
      icon: TrendingUp,
      color: "bg-blue-100 text-blue-600 border border-blue-200",
      stats: "3000+ Created"
    },
    {
      title: "Portfolio Guide",
      desc: "Learn how to build an impressive portfolio even without professional experience",
      cta: "Get Started",
      icon: Award,
      color: "bg-blue-100 text-blue-600 border border-blue-200",
      stats: "Expert Approved"
    },
    {
      title: "Career Strategy Session",
      desc: "Personalized guidance to plan your career path and job search strategy",
      cta: "Book Session",
      icon: Rocket,
      color: "bg-blue-100 text-blue-600 border border-blue-200",
      stats: "Free Consultation"
    }
  ];

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 py-8">
      <div className="max-w-6xl mx-auto px-6">
        {/* Header Section */}
        <div className="text-center mb-12">
          <div className="w-20 h-20 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-blue-200">
            <Rocket className="w-10 h-10 text-blue-600" />
          </div>
          <h1 className="text-4xl font-bold text-gray-900 mb-4">Career Success Kit</h1>
          <p className="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
            Everything you need to launch and grow your career. Professional resources designed for students and freshers.
          </p>
        </div>

        {/* Resources Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {resources.map((resource, index) => {
            const IconComponent = resource.icon;
            return (
              <div 
                key={resource.title} 
                className="rounded-2xl border border-blue-200 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 bg-white"
              >
                <div className="p-6 pb-4">
                  <div className="flex items-center justify-between mb-3">
                    <div className={`w-12 h-12 rounded-xl ${resource.color} flex items-center justify-center`}>
                      <IconComponent className="w-6 h-6" />
                    </div>
                    <span className="text-xs font-medium text-gray-500 bg-blue-50 px-2 py-1 rounded-full border border-blue-200">
                      {resource.stats}
                    </span>
                  </div>
                  <h3 className="text-lg font-bold text-gray-900 leading-tight">
                    {resource.title}
                  </h3>
                </div>
                
                <div className="px-6 pt-0 pb-6">
                  <p className="text-gray-600 mb-6 leading-relaxed">
                    {resource.desc}
                  </p>
                  <button className="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition-colors">
                    {resource.cta}
                  </button>
                </div>
              </div>
            );
          })}
        </div>

        {/* Call to Action Section */}
        <div className="rounded-2xl border border-blue-200 shadow-lg mt-12 bg-gradient-to-r from-blue-600 to-blue-700">
          <div className="p-8 text-center">
            <h2 className="text-2xl font-bold text-white mb-3">Ready to Accelerate Your Career?</h2>
            <p className="text-blue-100 text-lg mb-6 max-w-2xl mx-auto">
              Join thousands of students and freshers who have successfully launched their careers using our resources.
            </p>
            <div className="flex flex-col sm:flex-row gap-4 justify-center">
              <button className="bg-white text-blue-600 hover:bg-blue-50 font-semibold px-8 py-3 rounded-xl transition-colors">
                Explore All Resources
              </button>
              <button className="border border-white text-white hover:bg-blue-500 font-semibold px-8 py-3 rounded-xl transition-colors">
                Get Career Advice
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\home\Categories.jsx ===
import React, { useEffect, useRef, useState } from "react";
import { useNavigate } from "react-router-dom";
import { ChevronRight, MapPin, Clock, Users, UserPlus, Send, Building2, Briefcase, ArrowRight } from "lucide-react";
import { jobCategories } from "./data";

function useFadeInOnScroll() {
  const ref = useRef(null);
  const [visible, setVisible] = useState(false);

  useEffect(() => {
    const node = ref.current;
    if (!node) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setVisible(true);
          observer.disconnect();
        }
      },
      { threshold: 0.15 }
    );

    observer.observe(node);
    return () => observer.disconnect();
  }, []);

  return [ref, visible];
}

const iconMap = {
  home: MapPin,
  clock: Clock,
  users: Users,
  userPlus: UserPlus,
  send: Send,
  building: Building2,
  briefcase: Briefcase,
  arrowRight: ArrowRight,
};

export default function Categories() {
  const [sectionRef, sectionVisible] = useFadeInOnScroll();
  const navigate = useNavigate();

  const handleClick = (categoryId) => {
    navigate(`/jobs?category=${encodeURIComponent(categoryId)}`);
  };

  return (
    <section
      ref={sectionRef}
      className={`transition-all duration-1000 ease-out section-padding ${sectionVisible ? "opacity-100 translate-y-0" : "opacity-0 translate-y-4"
        }`}
      style={{ backgroundColor: '#F7FAFF' }}
    >
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 md:py-12">
        <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8 sm:mb-10">
          <div>
            <h2 className="text-2xl sm:text-3xl md:text-4xl font-bold leading-tight text-text-dark">
              Browse by category
            </h2>
            <p className="text-sm sm:text-base leading-relaxed mt-2 text-text-muted">
              Tap a card to see jobs only from that category.
            </p>
          </div>
        </div>

        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5">
          {jobCategories.map((cat) => (
            <button
              key={cat.id}
              type="button"
              onClick={() => handleClick(cat.id)}
              className="group text-left"
            >
              <div className="h-full card card-hover group-hover:-translate-y-1 transition-all duration-200">
                <div className="p-4 sm:p-5 flex items-center gap-4">
                  <div className="w-12 h-12 sm:w-14 sm:h-14 rounded-button bg-primary-50 flex items-center justify-center border-2 border-primary-100 flex-shrink-0">
                    {iconMap[cat.icon] ? (
                      React.createElement(iconMap[cat.icon], {
                        size: 24,
                        className: "text-primary-600",
                        strokeWidth: 2
                      })
                    ) : (
                      <Briefcase size={24} className="text-primary-600" strokeWidth={2} />
                    )}
                  </div>
                  <div className="flex-1 min-w-0">
                    <p className="text-base sm:text-lg font-semibold leading-snug text-text-dark">
                      {cat.label}
                    </p>
                    <p className="text-sm text-text-muted mt-1">
                      {cat.count.toLocaleString()} open roles
                    </p>
                  </div>
                  <ChevronRight size={20} className="text-primary-500 transition-transform group-hover:translate-x-1 flex-shrink-0" strokeWidth={2} />
                </div>
              </div>
            </button>
          ))}
        </div>
      </div>
    </section>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\home\data.js ===
// Shared constants and data for the guest home page
// Design System Colors
export const PRIMARY = "#1769E0";
export const PRIMARY_LIGHT = "#2E8CFF";
export const CHIP_BG = "#E8F1FF";
export const BG = "#F5F7FA";
export const WHITE = "#FFFFFF";
export const TEXT_DARK = "#111111";
export const TEXT_MUTED = "#555555";
export const BORDER = "#E5E7EB";
export const HIGHLIGHT = "#F7C948";

// Legacy constants (for backward compatibility)
export const PRIMARY_BLUE = PRIMARY;
export const LIGHT_GREY_BG = BG;
export const CTA_GREEN = PRIMARY;



export const jobCategories = [
  {
    id: "fresher",
    label: "Fresher Jobs",
    count: 1170000,
    icon: "userPlus",
    headline: "11,70,000+ Vacancies",
    description: "No / less experience required",
  },
  {
    id: "full-time",
    label: "Full-time Jobs",
    count: 2500000,
    icon: "briefcase",
    headline: "25,00,000+ Vacancies",
    description: "Full-time employment opportunities",
  },
  {
    id: "part-time",
    label: "Part-time Jobs",
    count: 1960000,
    icon: "clock",
    headline: "19,60,000+ Vacancies",
    description: "Part time jobs for flexible hours",
  },
  {
    id: "internship",
    label: "Internship",
    count: 370000,
    icon: "arrowRight",
    headline: "3,70,000+ Vacancies",
    description: "Internship opportunities for students",
  },
  {
    id: "remote",
    label: "Remote Jobs",
    count: 260000,
    icon: "home",
    headline: "2,60,000+ Vacancies",
    description: "Work from home jobs",
  },
  {
    id: "office-data-entry",
    label: "Office / Data Entry Jobs",
    count: 380000,
    icon: "building",
    headline: "3,80,000+ Vacancies",
    description: "Backâoffice, computer & data work",
  },
  {
    id: "it-jobs",
    label: "IT Jobs",
    count: 890000,
    icon: "briefcase",
    headline: "8,90,000+ Vacancies",
    description: "Information technology positions",
  },
  {
    id: "noida",
    label: "Jobs in Noida",
    count: 450000,
    icon: "home",
    headline: "4,50,000+ Vacancies",
    description: "Job opportunities in Noida",
  },
  {
    id: "delivery",
    label: "Delivery Jobs",
    count: 540000,
    icon: "send",
    headline: "5,40,000+ Vacancies",
    description: "Delivery partner roles",
  },
  {
    id: "customer-care-telecaller",
    label: "Customer Care / Telecaller Jobs",
    count: 290000,
    icon: "briefcase",
    headline: "2,90,000+ Vacancies",
    description: "Customer service and calling jobs",
  },
];

// Category â filters mapping (used to prefill Jobs filters via category query)
export const CATEGORY_FILTER_MAPPING = {
  fresher: {
    label: "Fresher Jobs",
    filters: {
      experience: "0", // matches EXPERIENCE_OPTIONS value
    },
  },
  "full-time": {
    label: "Full-time Jobs",
    filters: {
      jobTypes: ["full-time"], // matches JOB_TYPE_OPTIONS value
    },
  },
  "part-time": {
    label: "Part-time Jobs",
    filters: {
      jobTypes: ["part-time"],
    },
  },
  internship: {
    label: "Internship",
    filters: {
      jobTypes: ["internship"],
    },
  },
  remote: {
    label: "Remote Jobs",
    filters: {
      workModes: ["remote"], // matches WORK_MODE_OPTIONS value
    },
  },
  "office-data-entry": {
    label: "Office / Data Entry Jobs",
    filters: {
      workModes: ["office"],
      roles: ["Data Entry", "Back Office"],
    },
  },
  "it-jobs": {
    label: "IT Jobs",
    filters: {
      roles: ["Developer", "Engineer", "IT"],
    },
  },
  noida: {
    label: "Jobs in Noida",
    filters: {
      cities: ["Noida"],
    },
  },
  delivery: {
    label: "Delivery Jobs",
    filters: {
      roles: ["Delivery"],
    },
  },
  "customer-care-telecaller": {
    label: "Customer Care / Telecaller Jobs",
    filters: {
      roles: ["Customer Care", "Telecaller", "Call Center"],
    },
  },
};


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\home\Hero.jsx ===
import React, { useMemo, useState, useEffect, useRef } from "react";
import { Link, useNavigate } from "react-router-dom";
import { Search, MapPin, ChevronRight } from "lucide-react";
import { PRIMARY, jobCategories } from "./data";

function useFadeInOnScroll() {
  const ref = useRef(null);
  const [visible, setVisible] = useState(false);

  useEffect(() => {
    const node = ref.current;
    if (!node) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setVisible(true);
          observer.disconnect();
        }
      },
      { threshold: 0.15 }
    );

    observer.observe(node);
    return () => observer.disconnect();
  }, []);

  return [ref, visible];
}

export default function Hero() {
  const [sectionRef, sectionVisible] = useFadeInOnScroll();
  const [searchTerm, setSearchTerm] = useState("");
  const [location, setLocation] = useState("");
  const [category, setCategory] = useState("");
  const [experience, setExperience] = useState("");
  const [chips, setChips] = useState([]);
  const [activeField, setActiveField] = useState("title");
  const [showSuggestions, setShowSuggestions] = useState(false);

  const navigate = useNavigate();

  const suggestions = useMemo(
    () => [
      "Frontend Developer",
      "Backend Developer",
      "Full Stack Engineer",
      "Product Manager",
      "Marketing Manager",
      "Data Analyst",
      "UI/UX Designer",
    ],
    []
  );

  const filteredSuggestions = useMemo(() => {
    if (!searchTerm.trim()) return [];
    const lower = searchTerm.toLowerCase();
    return suggestions.filter((s) => s.toLowerCase().includes(lower)).slice(0, 5);
  }, [searchTerm, suggestions]);

  const addChip = (label, field) => {
    if (!label) return;
    const value = label.trim();
    if (!value) return;
    const key = `${field}:${value}`;
    if (chips.some((c) => c.key === key)) return;
    setChips((prev) => [...prev, { key, field, value }]);
  };

  const removeChip = (key) => {
    setChips((prev) => prev.filter((c) => c.key !== key));
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    const params = new URLSearchParams();
    if (searchTerm) params.set("q", searchTerm);
    if (location) params.set("location", location);
    if (category) params.set("category", category);
    if (experience) params.set("experience", experience);
    chips.forEach((chip) => {
      params.append(`chip_${chip.field}`, chip.value);
    });
    navigate(`/jobs?${params.toString()}`);
  };

  const handleSuggestionClick = (value) => {
    setSearchTerm(value);
    addChip(value, "title");
    setShowSuggestions(false);
  };

  return (
    <section
      ref={sectionRef}
      className={`relative bg-white transition-all duration-1000 ease-out min-h-[85vh] sm:min-h-screen flex items-center justify-center ${sectionVisible ? "opacity-100 translate-y-0" : "opacity-0 translate-y-4"
        }`}
    >
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 md:py-12 section-padding">
        <div className="max-w-5xl mx-auto w-full flex flex-col items-center justify-center text-center gap-6 sm:gap-8">
          <div className="space-y-4 sm:space-y-6 w-full flex flex-col items-center">
            <h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight leading-tight text-text-dark">
              Trusted Opportunities for{" "}
              <span className="text-primary-500">Fresh Talent</span>
            </h1>
            
            {/* Advanced search */}
            <div className="w-full bg-gray-100 rounded-card border border-border">
              <div className="p-4 sm:p-5 md:p-6">
                <form onSubmit={handleSubmit} className="space-y-6 sm:space-y-8">
                  <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4">
                    <div className="relative sm:col-span-2 lg:col-span-1">
                      <label className="label text-text-muted">
                        Job title or skill
                      </label>
                      <div className="relative flex items-center gap-2.5 rounded-input px-3.5 py-2.5 sm:py-3 bg-white border border-border focus-within:border-primary-500 focus-within:ring-2 focus-within:ring-primary-500/20 transition-all">
                        <Search size={18} className="text-primary-500 flex-shrink-0" strokeWidth={2} />
                        <input
                          type="text"
                          value={searchTerm}
                          onChange={(e) => {
                            setSearchTerm(e.target.value);
                            setActiveField("title");
                            setShowSuggestions(true);
                          }}
                          onFocus={() => {
                            setActiveField("title");
                            setShowSuggestions(true);
                          }}
                          placeholder="e.g. Delivery, Telecaller"
                          className="flex-1 bg-transparent text-sm sm:text-base outline-none border-none text-text-dark placeholder:text-text-muted"
                        />
                      </div>
                      {showSuggestions && filteredSuggestions.length > 0 && (
                        <div className="absolute z-20 mt-1 w-full bg-white rounded-lg shadow-large text-sm sm:text-base max-h-52 overflow-auto border border-border">
                          {filteredSuggestions.map((s) => (
                            <button
                              key={s}
                              type="button"
                              onMouseDown={(e) => {
                                e.preventDefault();
                                handleSuggestionClick(s);
                              }}
                              className="w-full text-left px-3 py-2 hover:bg-primary-50 transition-colors text-text-dark"
                            >
                              {s}
                            </button>
                          ))}
                        </div>
                      )}
                    </div>

                    <div>
                      <label className="label text-text-muted">
                        City / area
                      </label>
                      <div className="relative flex items-center gap-2.5 rounded-input px-3.5 py-2.5 sm:py-3 bg-white border border-border focus-within:border-primary-500 focus-within:ring-2 focus-within:ring-primary-500/20 transition-all">
                        <MapPin size={18} className="text-primary-500 flex-shrink-0" strokeWidth={2} />
                        <input
                          type="text"
                          value={location}
                          onChange={(e) => setLocation(e.target.value)}
                          onFocus={() => setActiveField("location")}
                          placeholder="e.g. Delhi, Remote"
                          className="flex-1 bg-transparent text-sm sm:text-base outline-none border-none text-text-dark placeholder:text-text-muted"
                        />
                      </div>
                    </div>

                    <div>
                      <label className="label text-text-muted">
                        Category
                      </label>
                      <select
                        value={category}
                        onChange={(e) => setCategory(e.target.value)}
                        onFocus={() => setActiveField("category")}
                        className="w-full rounded-input px-3.5 py-2.5 sm:py-3 bg-white border border-border text-sm sm:text-base outline-none text-text-dark focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all cursor-pointer"
                      >
                        <option value="">All categories</option>
                        {jobCategories.map((c) => (
                          <option key={c.id} value={c.id}>
                            {c.label}
                          </option>
                        ))}
                      </select>
                    </div>

                    <div>
                      <label className="label text-text-muted">
                        Experience
                      </label>
                      <select
                        value={experience}
                        onChange={(e) => setExperience(e.target.value)}
                        onFocus={() => setActiveField("experience")}
                        className="w-full rounded-input px-3.5 py-2.5 sm:py-3 bg-white border border-border text-sm sm:text-base outline-none text-text-dark focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all cursor-pointer"
                      >
                        <option value="">Any</option>
                        <option value="fresher">Fresher / Entry</option>
                        <option value="mid">0â2 years</option>
                        <option value="senior">2+ years</option>
                      </select>
                    </div>
                  </div>

                  {/* Filter chips */}
                  {chips.length > 0 && (
                    <div className="flex flex-wrap gap-2 justify-center">
                      {chips.map((chip) => (
                        <button
                          key={chip.key}
                          type="button"
                          onClick={() => removeChip(chip.key)}
                          className="inline-flex items-center gap-1.5 rounded-chip px-3 sm:px-4 py-1.5 text-xs sm:text-sm font-medium transition-colors bg-primary-50 text-primary-700 hover:bg-primary-100"
                        >
                          <span>{chip.value}</span>
                          <span className="text-xs">â</span>
                        </button>
                      ))}
                    </div>
                  )}

                  <div className="flex flex-col items-center gap-3">
                    <button
                      type="submit"
                      className="btn btn-primary btn-md sm:btn-lg px-8 sm:px-10"
                    >
                      Search Jobs
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\home\HowItWorks.jsx ===
import React, { useEffect, useRef, useState } from "react";
import { BG } from "./data";

function useFadeInOnScroll() {
  const ref = useRef(null);
  const [visible, setVisible] = useState(false);

  useEffect(() => {
    const node = ref.current;
    if (!node) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setVisible(true);
          observer.disconnect();
        }
      },
      { threshold: 0.15 }
    );

    observer.observe(node);
    return () => observer.disconnect();
  }, []);

  return [ref, visible];
}

export default function HowItWorks() {
  const [sectionRef, sectionVisible] = useFadeInOnScroll();
  const [tab, setTab] = useState("seekers");
  const seekerSteps = [
    { title: "Search", desc: "Find jobs by city, role or skill." },
    { title: "Apply", desc: "Send your details in a few taps." },
    { title: "Interview", desc: "Talk to the recruiter or company." },
    { title: "Get hired", desc: "Join and start earning faster." },
  ];
  const recruiterSteps = [
    { title: "Post job", desc: "Share your opening with basic details." },
    { title: "Review", desc: "See matching candidates in one list." },
    { title: "Interview", desc: "Call or message shortlisted profiles." },
    { title: "Hire", desc: "Close the role and grow your team." },
  ];
  const steps = tab === "seekers" ? seekerSteps : recruiterSteps;

  return (
    <section
      ref={sectionRef}
      style={{ backgroundColor: '#FFFFFF' }}
      className={`transition-all duration-1000 ease-out section-padding ${sectionVisible ? "opacity-100 translate-y-0" : "opacity-0 translate-y-4"
        }`}
    >
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-10 md:py-12">
        <div className="max-w-2xl mb-8 sm:mb-10">
          <h2 className="text-2xl sm:text-3xl md:text-4xl font-bold leading-tight text-text-dark mb-2">
            How it works
          </h2>
          <p className="text-sm sm:text-base leading-relaxed text-text-muted">
            Same simple flow for job seekers and recruiters. No confusing steps.
          </p>
        </div>

        <div className="mb-6 sm:mb-8 inline-flex rounded-full bg-white border-2 border-border p-1 shadow-soft">
          <button
            type="button"
            onClick={() => setTab("seekers")}
            className={`px-4 sm:px-6 py-2 text-sm sm:text-base font-semibold rounded-full transition-all ${tab === "seekers"
                ? "text-white shadow-soft bg-primary-500"
                : "text-text-muted hover:text-primary-600"
              }`}
          >
            For Job Seekers
          </button>
          <button
            type="button"
            onClick={() => setTab("recruiters")}
            className={`px-4 sm:px-6 py-2 text-sm sm:text-base font-semibold rounded-full transition-all ${tab === "recruiters"
                ? "text-white shadow-soft bg-primary-500"
                : "text-text-muted hover:text-primary-600"
              }`}
          >
            For Recruiters
          </button>
        </div>

        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5">
          {steps.map((step, index) => (
            <div
              key={step.title}
              className="card card-hover"
            >
              <div className="p-4 sm:p-5 space-y-3">
                <div className="inline-flex items-center justify-center w-10 h-10 rounded-full text-sm font-bold bg-primary-50 text-primary-700 border-2 border-primary-100">
                  {index + 1}
                </div>
                <h3 className="text-lg sm:text-xl font-semibold leading-snug text-text-dark">
                  {step.title}
                </h3>
                <p className="text-sm sm:text-base leading-relaxed text-text-muted">{step.desc}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\Home.jsx ===
import React from "react";
import Hero from "./home/Hero";
import Categories from "./home/Categories";

import HowItWorks from "./home/HowItWorks";


export default function Home() {
  return (
    <div className="min-h-screen flex flex-col bg-white text-slate-900">
      <main className="flex-1">
        <Hero />
        <Categories />
      
        <HowItWorks />
      
      
      </main>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\jobs\job-list-details.jsx ===
import { Building2, MapPin, Clock, Briefcase, GraduationCap, Bookmark, BookmarkCheck } from "lucide-react";
import { useParams, useNavigate } from "react-router-dom";
import { useEffect, useState } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function JobDetail() {
  const { id } = useParams();
  const navigate = useNavigate();
  const [job, setJob] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [isSaved, setIsSaved] = useState(false); // Track if job is saved
  const [isApplied, setIsApplied] = useState(false); // Track if job is already applied
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [authChecked, setAuthChecked] = useState(false);
  const [candidateProfile, setCandidateProfile] = useState(null);
  const [profileLoading, setProfileLoading] = useState(false);
  const [userEmail, setUserEmail] = useState(null);

  // Application form state (only for non-logged-in users)
  const [applicantName, setApplicantName] = useState("");
  const [applicantEmail, setApplicantEmail] = useState("");
  const [resumeFile, setResumeFile] = useState(null);
  const [resumeLink, setResumeLink] = useState("");
  const [coverLetter, setCoverLetter] = useState("");

  // For logged-in users: optional resume update
  const [updateResumeFile, setUpdateResumeFile] = useState(null);

  const [applying, setApplying] = useState(false);
  const [applyError, setApplyError] = useState(null);
  const [applySuccess, setApplySuccess] = useState(null);
  const [applied, setApplied] = useState(false); // set true after success

  // Check if job is already applied
  const checkAppliedStatus = async (jobId) => {
    try {
      const response = await api.get("/jobs/applied-jobs");
      if (response.data?.ok && response.data.applications) {
        const applied = response.data.applications.some(app => app.job_id === Number(jobId));
        setIsApplied(applied);
        // If applied, also set isSaved to false (since applied jobs can't be saved)
        if (applied) {
          setIsSaved(false);
        }
      }
    } catch (error) {
      console.error('Error checking applied status:', error);
      setIsApplied(false);
    }
  };

  useEffect(() => {
    let alive = true;
    (async () => {
      try {
        setLoading(true);
        const { data } = await api.get(`/jobs/${id}`);
        if (!alive) return;
        if (data.ok && data.job) {
          setJob(data.job);

          // Check if job is saved
          await checkSavedStatus(id);
        } else {
          setError(data.message || "Job not found");
        }
      } catch (err) {
        console.error("Failed to fetch job:", err);
        setError(err?.response?.data?.message || err.message || "Failed to load job");
      } finally {
        if (alive) setLoading(false);
      }
    })();
    return () => { alive = false; };
  }, [id]);

  useEffect(() => {
    let alive = true;
    (async () => {
      try {
        const { data } = await api.get("/auth/session");
        if (alive) {
          setIsAuthenticated(Boolean(data?.user));
          if (data?.user) {
            setUserEmail(data.user.email);
            // Fetch candidate profile if authenticated
            await loadCandidateProfile();
            // Check if job is already applied
            await checkAppliedStatus(id);
          }
        }
      } catch (err) {
        if (alive) setIsAuthenticated(false);
      } finally {
        if (alive) setAuthChecked(true);
      }
    })();

    return () => {
      alive = false;
    };
  }, [id]);

  // Load candidate profile for logged-in users
  const loadCandidateProfile = async () => {
    setProfileLoading(true);
    try {
      const res = await api.get("/profile/user");
      if (res?.data?.success && res.data.user) {
        setCandidateProfile(res.data.user);
      }
    } catch (err) {
      // Profile doesn't exist or error - that's okay, user will need to complete it
      setCandidateProfile(null);
    } finally {
      setProfileLoading(false);
    }
  };

  // Check if profile is complete (has name, email, and resume)
  const isProfileComplete = () => {
    if (!candidateProfile) return false;
    return !!(
      candidateProfile.full_name &&
      userEmail &&
      candidateProfile.resume_path
    );
  };

  // Check if job is saved
  const checkSavedStatus = async (jobId) => {
    try {
      const response = await api.get(`/jobs/save/${jobId}`);
      setIsSaved(response.data.isSaved);
    } catch (error) {
      console.error('Error checking saved status:', error);
      setIsSaved(false);
    }
  };

  const redirectToLoginForSave = () => {
    try {
      const currentPath = window.location.pathname + window.location.search;
      localStorage.setItem("postLoginSaveJobId", id);
      localStorage.setItem("postLoginRedirect", currentPath || `/jobs/${id}`);
    } catch (err) {
      // ignore storage failures
    }
    navigate("/sign-in");
  };

  const toggleSave = async () => {
    if (!isAuthenticated) {
      if (!authChecked) {
        try {
          const { data } = await api.get("/auth/session");
          if (data?.user) {
            setIsAuthenticated(true);
          } else {
            redirectToLoginForSave();
            return;
          }
        } catch (err) {
          redirectToLoginForSave();
          return;
        }
      } else {
        redirectToLoginForSave();
        return;
      }
    }

    try {
      if (isSaved) {
        // Unsave the job
        await api.delete(`/jobs/save/${id}`);
        setIsSaved(false);
      } else {
        // Save the job
        await api.post(`/jobs/save/${id}`);
        setIsSaved(true);
      }
    } catch (error) {
      console.error('Error toggling save:', error);
      const errorMessage = error.response?.data?.message || error.message;
      // Show specific message if trying to save an applied job
      if (errorMessage.includes('already applied')) {
        alert('Cannot save a job you have already applied to');
        setIsApplied(true);
      } else {
        alert('Error: ' + errorMessage);
      }
    }
  };

  const skills = job?.tags || [];
  const responsibilities = job?.responsibilities || [];
  const qualifications = job?.qualifications || [];

  // Format salary (monthly) with rupee symbol
  const formatSalaryMonthly = () => {
    if (!job) return 'NA';

    // Use minSalary and maxSalary if available (preferred)
    const minSalary = job.minSalary;
    const maxSalary = job.maxSalary;

    if (minSalary != null && maxSalary != null) {
      // Format monthly salary with rupee symbol
      return `â¹ ${Number(minSalary).toLocaleString('en-IN')} - ${Number(maxSalary).toLocaleString('en-IN')} /Month`;
    } else if (minSalary != null) {
      return `â¹ ${Number(minSalary).toLocaleString('en-IN')}+ /Month`;
    } else if (maxSalary != null) {
      return `Up to â¹ ${Number(maxSalary).toLocaleString('en-IN')} /Month`;
    }

    // Fallback: try to parse from salary string if min/max not available
    if (job.salary && typeof job.salary === 'string') {
      const match = job.salary.match(/(\d+)-(\d+)\s*(?:per month|\/Month)/i);
      if (match) {
        const min = parseInt(match[1]);
        const max = parseInt(match[2]);
        return `â¹ ${min.toLocaleString('en-IN')} - ${max.toLocaleString('en-IN')} /Month`;
      }
      const singleMatch = job.salary.match(/(\d+)\+\s*(?:per month|\/Month)/i);
      if (singleMatch) {
        const min = parseInt(singleMatch[1]);
        return `â¹ ${min.toLocaleString('en-IN')}+ /Month`;
      }
      // Also handle old LPA format for backward compatibility
      const lpaMatch = job.salary.match(/(\d+)-(\d+)\s*LPA/i);
      if (lpaMatch) {
        const min = parseInt(lpaMatch[1]);
        const max = parseInt(lpaMatch[2]);
        return `â¹ ${min.toLocaleString('en-IN')} - ${max.toLocaleString('en-IN')} /Month`;
      }
    }

    return 'NA';
  };

  // Basic client-side validation for file type/size
  const onFileChange = (e) => {
    const f = e.target.files?.[0] || null;
    if (!f) {
      setResumeFile(null);
      return;
    }
    const allowed = [".pdf", ".doc", ".docx"];
    const ext = f.name.substring(f.name.lastIndexOf(".")).toLowerCase();
    if (!allowed.includes(ext)) {
      setApplyError("Only PDF / DOC / DOCX files are allowed for resume.");
      setResumeFile(null);
      return;
    }
    const maxSize = 5 * 1024 * 1024; // 5 MB
    if (f.size > maxSize) {
      setApplyError("Resume must be smaller than 5 MB.");
      setResumeFile(null);
      return;
    }
    setApplyError(null);
    setResumeFile(f);
  };

  // Redirect to login for non-logged-in users
  const redirectToLoginForApply = () => {
    try {
      const currentPath = window.location.pathname + window.location.search;
      localStorage.setItem("postLoginApplyJobId", id);
      localStorage.setItem("postLoginRedirect", currentPath || `/jobs/${id}`);
    } catch (err) {
      // ignore storage failures
    }
    navigate("/sign-in?role=candidate");
  };

  const submitApplication = async () => {
    setApplyError(null);
    setApplySuccess(null);

    // Check authentication first
    if (!isAuthenticated) {
      redirectToLoginForApply();
      return;
    }

    // For logged-in users: check if profile is complete
    if (isAuthenticated && !isProfileComplete()) {
      // Redirect to complete profile, then come back to apply
      try {
        localStorage.setItem("postLoginApplyJobId", id);
        localStorage.setItem("postLoginRedirect", window.location.pathname + window.location.search);
      } catch (err) {
        // ignore storage failures
      }
      navigate("/dashboard/profile");
      return;
    }

    if (!id) {
      setApplyError("Job ID missing.");
      return;
    }

    try {
      setApplying(true);

      const formData = new FormData();
      formData.append("job_id", id);

      if (isAuthenticated && candidateProfile) {
        // For logged-in users: use profile data
        // Only send cover letter and optional resume update
        if (coverLetter) formData.append("cover_letter", coverLetter);

        // If user wants to update resume, use the new file
        if (updateResumeFile) {
          formData.append("resume", updateResumeFile);
        }
        // Otherwise, backend should use resume_path from profile
        // We'll send it in the body if backend supports it
        if (!updateResumeFile && candidateProfile.resume_path) {
          formData.append("resume_path", candidateProfile.resume_path);
        }
      } else {
        // For non-logged-in users: use form data
        if (coverLetter) formData.append("cover_letter", coverLetter);
        if (applicantName) formData.append("applicant_name", applicantName);
        if (applicantEmail) formData.append("applicant_email", applicantEmail);
        if (resumeFile) formData.append("resume", resumeFile);
        if (!resumeFile && resumeLink) formData.append("resume_link", resumeLink);
      }

      const res = await api.post("/jobs/apply", formData, {
        headers: { "Content-Type": "multipart/form-data" },
      });

      if (res.data && res.data.ok) {
        setApplySuccess("You have successfully applied for this job");
        setApplied(true);
        setIsApplied(true); // Mark as applied
        // Remove from saved jobs (if it was saved) - backend handles this automatically
        setIsSaved(false);
        // Clear form
        setCoverLetter("");
        setResumeFile(null);
        setResumeLink("");
        setUpdateResumeFile(null);
      } else {
        setApplyError(res.data?.error || res.data?.message || "Failed to submit application");
      }
    } catch (err) {
      console.error("Apply error:", err);
      setApplyError(err?.response?.data?.error || err?.response?.data?.message || err.message || "Server error while applying");
    } finally {
      setApplying(false);
    }
  };

  // Render
  if (loading) return <div className="p-6 text-gray-600">Loading job...</div>;
  if (error) return <div className="p-6 text-red-600">{error}</div>;
  if (!job) return <div className="p-6 text-gray-600">Job not found</div>;

  return (
    <div className="min-h-screen bg-bg">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
          <div className="lg:col-span-2 space-y-6">
            <div>
              <div className="mb-3 text-sm text-text-muted">
                <a href="/jobs" className="hover:underline text-primary-600 font-medium">Jobs</a> / <span className="text-text-dark">{job.title}</span>
              </div>
              <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold text-text-dark mb-3">{job.title}</h1>
              <div className="flex flex-wrap items-center gap-2 sm:gap-3">
                <span className="badge badge-gray inline-flex items-center gap-1.5">
                  <Building2 size={14} className="text-primary-500" /> {job.company}
                </span>
                <span className="badge badge-gray inline-flex items-center gap-1.5">
                  <MapPin size={14} className="text-primary-500" /> {job.location}
                </span>
                <span className="badge badge-primary">
                  <Clock size={14} className="inline mr-1" /> {job.type}
                </span>
                <span className="badge badge-primary">
                  <Briefcase size={14} className="inline mr-1" /> {job.type}
                </span>
                {job.experiance && (
                  <span className="badge badge-primary">
                    <GraduationCap size={14} className="inline mr-1" /> {job.experiance}
                  </span>
                )}
              </div>
            </div>

            <div className="card">
              <div className="border-b border-border p-4 sm:p-6">
                <h2 className="text-lg sm:text-xl font-semibold text-text-dark">About the role</h2>
              </div>
              <div className="space-y-5 text-text-dark p-4 sm:p-6">
                <p className="text-sm sm:text-base leading-relaxed">{job.description}</p>
                <div>
                  <p className="font-semibold mb-2 text-text-dark text-base">Responsibilities</p>
                  <ul className="list-disc pl-5 sm:pl-6 space-y-1.5 text-sm sm:text-base text-text-muted">
                    {responsibilities.length ? responsibilities.map((r) => <li key={r}>{r}</li>) : <li>Responsibilities not provided</li>}
                  </ul>
                </div>
                <div>
                  <p className="font-semibold mb-2 text-text-dark text-base">Qualifications</p>
                  <ul className="list-disc pl-5 sm:pl-6 space-y-1.5 text-sm sm:text-base text-text-muted">
                    {qualifications.length ? qualifications.map((q) => <li key={q}>{q}</li>) : <li>Qualifications not provided</li>}
                  </ul>
                </div>
                <div className="flex flex-wrap gap-2 pt-2">
                  {skills.map((s) => (
                    <span
                      key={s}
                      className="badge badge-primary"
                    >
                      {s}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>

          <aside className="lg:sticky lg:top-4 lg:self-start">
            <div className="card">
              <div className="border-b border-border p-4 sm:p-6">
                <div className="flex justify-between items-center">
                  <h2 className="text-lg sm:text-xl font-semibold text-text-dark">Apply to this job</h2>
                  {!isApplied && (
                    <button
                      onClick={toggleSave}
                      className="flex items-center gap-1.5 border-2 border-primary-300 text-primary-700 hover:bg-primary-50 hover:text-primary-800 text-xs px-3 py-1.5 rounded-button transition-colors"
                    >
                      {isSaved ? (
                        <>
                          <BookmarkCheck size={14} className="text-primary-600" />
                          Saved
                        </>
                      ) : (
                        <>
                          <Bookmark size={14} />
                          Save
                        </>
                      )}
                    </button>
                  )}
                </div>
              </div>
              <div className="p-4 sm:p-6">
                <div className="space-y-3 text-sm text-text-dark mb-5 sm:mb-6 pb-4 border-b border-border">
                  <div className="flex justify-between items-center">
                    <span className="text-text-muted">Compensation</span>
                    <span className="font-semibold text-primary-600">{formatSalaryMonthly()}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-text-muted">Work Mode</span>
                    <span className="font-semibold text-primary-600">{job.workMode || job.mode || 'Office'}</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <span className="text-text-muted">Experience</span>
                    <span className="font-semibold text-primary-600">{job.experiance || job.experience || 'Not specified'}</span>
                  </div>
                </div>

                {isAuthenticated && candidateProfile ? (
                  // Logged-in user: Simplified form
                  <div className="space-y-4">
                    {/* Show profile info */}
                    <div className="bg-primary-50 border border-primary-200 rounded-lg p-3 sm:p-4 text-sm">
                      <div className="font-semibold text-primary-900 mb-1.5">Applying as:</div>
                      <div className="text-text-dark font-medium">{candidateProfile.full_name || "Your name"}</div>
                      <div className="text-text-muted text-xs mt-1">{userEmail}</div>
                      {candidateProfile.resume_path && (
                        <div className="text-success-600 text-xs mt-1.5 font-medium">â Resume on file</div>
                      )}
                    </div>

                    {/* Optional resume update */}
                    {candidateProfile.resume_path && (
                      <div>
                        <div className="flex items-center justify-between mb-2">
                          <label className="label text-sm">Resume</label>
                          <button
                            type="button"
                            onClick={() => document.getElementById('update-resume-input')?.click()}
                            className="text-xs text-primary-600 hover:text-primary-700 underline font-medium"
                          >
                            Update Resume
                          </button>
                        </div>
                        <input
                          id="update-resume-input"
                          type="file"
                          accept=".pdf,.doc,.docx"
                          onChange={(e) => {
                            const f = e.target.files?.[0] || null;
                            if (!f) {
                              setUpdateResumeFile(null);
                              return;
                            }
                            const allowed = [".pdf", ".doc", ".docx"];
                            const ext = f.name.substring(f.name.lastIndexOf(".")).toLowerCase();
                            if (!allowed.includes(ext)) {
                              setApplyError("Only PDF / DOC / DOCX files are allowed for resume.");
                              setUpdateResumeFile(null);
                              return;
                            }
                            const maxSize = 5 * 1024 * 1024; // 5 MB
                            if (f.size > maxSize) {
                              setApplyError("Resume must be smaller than 5 MB.");
                              setUpdateResumeFile(null);
                              return;
                            }
                            setApplyError(null);
                            setUpdateResumeFile(f);
                          }}
                          className="hidden"
                        />
                        {updateResumeFile && (
                          <div className="text-xs mt-1.5 text-primary-600 font-medium">New file: {updateResumeFile.name}</div>
                        )}
                      </div>
                    )}

                    {/* Cover letter */}
                    <div>
                      <label className="label text-sm">Cover letter (optional)</label>
                      <textarea
                        rows={4}
                        value={coverLetter}
                        onChange={(e) => setCoverLetter(e.target.value)}
                        className="textarea"
                        placeholder="Tell us why you're a good fit for this role..."
                      />
                    </div>

                    {applyError && (
                      <div className="text-error-600 text-sm bg-error-light border border-error-300 p-3 rounded-lg">
                        {applyError}
                      </div>
                    )}
                    {applySuccess && (
                      <div className="text-success-600 text-sm bg-success-light border border-success-300 p-3 rounded-lg">
                        {applySuccess}
                      </div>
                    )}

                    <button
                      className="btn btn-primary btn-md w-full"
                      onClick={submitApplication}
                      disabled={applying || applied || profileLoading}
                    >
                      {applied ? "Applied" : applying ? "Applying..." : "Apply Now"}
                    </button>
                  </div>
                ) : (
                  // Non-logged-in user: Just Sign in to Apply Now button (no form fields)
                  <div className="space-y-3">
                    <button
                      className="btn btn-primary btn-md w-full"
                      onClick={submitApplication}
                    >
                      Sign in to Apply Now
                    </button>
                  </div>
                )}
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\jobs\job-list.jsx ===
import { useState, useEffect, useCallback, useMemo } from "react";
import { useLocation, useNavigate } from "react-router-dom";
import {
  Building2,
  MapPin,
  Briefcase,
  GraduationCap,
  Bookmark,
  BookmarkCheck,
  Clock,
  Search,
  ArrowUpRight,
} from "lucide-react";
import api from "../../../components/apiconfig/apiconfig";

// Static filter options (frontend constants)
const SALARY_OPTIONS = [
  { label: "More than â¹ 5000", value: 5000 },
  { label: "More than â¹ 10000", value: 10000 },
  { label: "More than â¹ 20000", value: 20000 },
  { label: "More than â¹ 30000", value: 30000 },
  { label: "More than â¹ 40000", value: 40000 },
  { label: "More than â¹ 50000", value: 50000 },
];

// Static job type filter options (from jobs.job_type enum)
const JOB_TYPE_OPTIONS = [
  { label: "Full-time", value: "full-time" },
  { label: "Part-time", value: "part-time" },
  { label: "Internship", value: "internship" },
  { label: "Contract", value: "contract" },
];

// Static work mode filter options (from jobs.work_mode enum)
const WORK_MODE_OPTIONS = [
  { label: "Remote", value: "remote" },
  { label: "Hybrid", value: "hybrid" },
  { label: "Office", value: "office" },
];

// Static experience filter ranges
const EXPERIENCE_OPTIONS = [
  { label: "Fresher (0 years)", value: "0" },
  { label: "0-2 years", value: "0-2" },
  { label: "2-5 years", value: "2-5" },
  { label: "5-10 years", value: "5-10" },
  { label: "10+ years", value: "10+" },
];

const OTHER_CATEGORIES = [
  "Event Management (304)",
  "Back Office / Data Entry (12258)",
  "Content Writer (419)",
  "Receptionist (2481)",
  "Accountant (7733)",
];

const pageSize = 6;

const parseSalaryValue = (salary) => {
  if (!salary) return null;
  const numeric = `${salary}`.replace(/[^0-9]/g, "");
  if (!numeric) return null;
  return Number(numeric);
};

const formatSalary = (salary, minSalary, maxSalary) => {
  // Use minSalary and maxSalary if available (preferred)
  if (minSalary != null && maxSalary != null) {
    return `â¹ ${Number(minSalary).toLocaleString('en-IN')} - ${Number(maxSalary).toLocaleString('en-IN')}`;
  } else if (minSalary != null) {
    return `â¹ ${Number(minSalary).toLocaleString('en-IN')}+`;
  } else if (maxSalary != null) {
    return `Up to â¹ ${Number(maxSalary).toLocaleString('en-IN')}`;
  }

  // Fallback: try to parse from salary string if min/max not available
  const numeric = parseSalaryValue(salary);
  if (!numeric) return salary || "";
  return `â¹ ${numeric.toLocaleString("en-IN")}`;
};

export default function Jobs() {
  const [jobList, setJobList] = useState([]);
  const [searchTerm, setSearchTerm] = useState("");
  const [selectedCities, setSelectedCities] = useState([]);
  const [selectedRoles, setSelectedRoles] = useState([]);
  const [selectedJobTypes, setSelectedJobTypes] = useState([]);
  const [selectedWorkModes, setSelectedWorkModes] = useState([]);
  const [selectedExperience, setSelectedExperience] = useState("");
  const [salaryFilter, setSalaryFilter] = useState("");
  const [filtered, setFiltered] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [savedStatus, setSavedStatus] = useState({});
  const [page, setPage] = useState(1);
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [authChecked, setAuthChecked] = useState(false);

  // Dynamic filter options (from backend)
  const [cityOptions, setCityOptions] = useState([]);
  const [titleOptions, setTitleOptions] = useState([]);
  const [tagOptions, setTagOptions] = useState([]);

  const locationHook = useLocation();
  const navigate = useNavigate();

  useEffect(() => {
    let alive = true;
    (async () => {
      try {
        const { data } = await api.get("/auth/session");
        if (alive) setIsAuthenticated(Boolean(data?.user));
      } catch (err) {
        if (alive) setIsAuthenticated(false);
      } finally {
        if (alive) setAuthChecked(true);
      }
    })();

    return () => {
      alive = false;
    };
  }, []);

  useEffect(() => {
    const searchParams = new URLSearchParams(locationHook.search);
    const searchQuery = searchParams.get("search") || "";
    if (searchQuery) {
      setSearchTerm(searchQuery);
    }
  }, [locationHook]);

  // Fetch filter options from backend
  useEffect(() => {
    let alive = true;

    (async () => {
      try {
        const { data } = await api.get("/jobs/filters");
        if (!alive) return;

        if (data.ok && data.filters) {
          setCityOptions(data.filters.cities || []);
          setTitleOptions(data.filters.titles || []);
          setTagOptions(data.filters.tags || []);
        }
      } catch (err) {
        console.error("Error fetching filters:", err);
        // Continue without filters if endpoint fails
      }
    })();

    return () => {
      alive = false;
    };
  }, []);

  useEffect(() => {
    let alive = true;

    (async () => {
      try {
        setLoading(true);
        const { data } = await api.get("/jobs", { params: { limit: 100 } });

        if (!alive) return;

        if (data.ok && Array.isArray(data.jobs)) {
          const mapped = data.jobs.map((j) => ({
            id: j._id || j.id,
            title: j.title || j.jobTitle || "",
            company: j.company || j.companyName || "",
            location: j.location || j.jobLocation || "",
            city: j.city || "", // Store city separately for filtering (from backend)
            type: j.type || j.jobType || "Full Time",
            // Normalize job type for filtering (handle variations like "Full-time", "Full Time", "full-time")
            jobType: (j.type || j.jobType || "full-time").toLowerCase().replace(/\s+/g, "-"),
            workMode: j.workMode || j.mode || j.workType || "Office",
            // Normalize work mode for filtering (handle variations like "Office", "office", "Remote", "remote")
            workModeValue: (j.workMode || j.mode || j.workType || "office").toLowerCase(),
            experience: j.experience || j.experiance || j.exp || "",
            minExperience: j.minExperience != null ? j.minExperience : j.min_experience != null ? j.min_experience : null,
            maxExperience: j.maxExperience != null ? j.maxExperience : j.max_experience != null ? j.max_experience : null,
            skills: j.skills || j.tags || [],
            salary: j.salary || "",
            minSalary: j.minSalary != null ? j.minSalary : j.min_salary != null ? j.min_salary : null,
            maxSalary: j.maxSalary != null ? j.maxSalary : j.max_salary != null ? j.max_salary : null,
            vacancies: j.vacancies || "",
            description: j.description || "",
          }));
          setJobList(mapped);
          setFiltered(mapped);

          await checkSavedStatusForJobs(mapped);
        }
      } catch (err) {
        setError((err && err.message) || "Something went wrong");
      } finally {
        setLoading(false);
      }
    })();

    return () => {
      alive = false;
    };
  }, []);

  const checkSavedStatusForJobs = async (jobs) => {
    const status = {};
    for (const job of jobs) {
      try {
        const response = await api.get(`/jobs/save/${job.id}`);
        status[job.id] = response.data.isSaved;
      } catch (error) {
        status[job.id] = false;
      }
    }
    setSavedStatus(status);
  };

  const redirectToLoginForSave = (jobId) => {
    try {
      const currentPath = window.location.pathname + window.location.search;
      localStorage.setItem("postLoginSaveJobId", jobId);
      localStorage.setItem("postLoginRedirect", currentPath || "/jobs");
    } catch (err) {
      // fail silently if storage not available
    }
    navigate("/sign-in");
  };

  const toggleSaveJob = async (jobId, isCurrentlySaved) => {
    if (!isAuthenticated) {
      // If auth status is still being checked, try one more quick check
      if (!authChecked) {
        try {
          const { data } = await api.get("/auth/session");
          if (data?.user) {
            setIsAuthenticated(true);
          } else {
            redirectToLoginForSave(jobId);
            return;
          }
        } catch (err) {
          redirectToLoginForSave(jobId);
          return;
        }
      } else {
        redirectToLoginForSave(jobId);
        return;
      }
    }

    try {
      if (isCurrentlySaved) {
        await api.delete(`/jobs/save/${jobId}`);
        setSavedStatus((prev) => ({ ...prev, [jobId]: false }));
      } else {
        await api.post(`/jobs/save/${jobId}`);
        setSavedStatus((prev) => ({ ...prev, [jobId]: true }));
      }
    } catch (error) {
      alert(
        "Error saving job: " +
        (error.response?.data?.message || error.message || "Try again")
      );
    }
  };

  const applyFilters = useCallback(() => {
    if (jobList.length === 0) return;

    let data = [...jobList];
    const query = searchTerm.trim().toLowerCase();

    if (query) {
      data = data.filter((job) => {
        const textBucket = [
          job.title,
          job.company,
          job.location,
          job.description,
          ...(job.skills || []),
        ]
          .join(" ")
          .toLowerCase();
        return textBucket.includes(query);
      });
    }

    if (selectedCities.length) {
      data = data.filter((job) =>
        selectedCities.some((city) => {
          // Match against city field or location string
          const jobCity = (job.city || "").toLowerCase();
          const jobLocation = (job.location || "").toLowerCase();
          return jobCity === city.toLowerCase() || jobLocation.includes(city.toLowerCase());
        })
      );
    }

    if (selectedRoles.length) {
      data = data.filter((job) =>
        selectedRoles.some((role) =>
          job.title.toLowerCase().includes(role.toLowerCase())
        )
      );
    }

    if (selectedJobTypes.length) {
      data = data.filter((job) => {
        // Normalize job type for comparison
        const normalizedJobType = job.jobType.toLowerCase().replace(/\s+/g, "-");
        return selectedJobTypes.some((type) => {
          const normalizedType = type.toLowerCase().replace(/\s+/g, "-");
          return normalizedJobType === normalizedType || normalizedJobType.includes(normalizedType);
        });
      });
    }

    if (selectedWorkModes.length) {
      data = data.filter((job) => {
        // Normalize work mode for comparison
        const normalizedWorkMode = job.workModeValue.toLowerCase();
        return selectedWorkModes.some((mode) => {
          const normalizedMode = mode.toLowerCase();
          return normalizedWorkMode === normalizedMode;
        });
      });
    }

    if (selectedExperience) {
      data = data.filter((job) => {
        const minExp = job.minExperience != null ? job.minExperience : 0;
        const maxExp = job.maxExperience != null ? job.maxExperience : 100;

        switch (selectedExperience) {
          case "0":
            return minExp === 0 && (maxExp === 0 || maxExp === null);
          case "0-2":
            return minExp >= 0 && maxExp <= 2;
          case "2-5":
            return minExp >= 2 && maxExp <= 5;
          case "5-10":
            return minExp >= 5 && maxExp <= 10;
          case "10+":
            return minExp >= 10;
          default:
            return true;
        }
      });
    }

    if (salaryFilter) {
      const threshold = Number(salaryFilter);
      data = data.filter((job) => {
        // Check min_salary first, then fallback to parsing salary string
        if (job.minSalary != null) {
          return job.minSalary >= threshold;
        }
        const numeric = parseSalaryValue(job.salary);
        if (!numeric) return true; // keep jobs without salary info
        return numeric >= threshold;
      });
    }

    setFiltered(data);
    setPage(1);

    const params = new URLSearchParams();
    if (query) params.set("search", query);
    const newUrl = params.toString() ? `/jobs?${params.toString()}` : "/jobs";
    window.history.replaceState({}, "", newUrl);
  }, [jobList, searchTerm, selectedCities, selectedRoles, selectedJobTypes, selectedWorkModes, selectedExperience, salaryFilter]);

  useEffect(() => {
    applyFilters();
  }, [applyFilters]);

  // Filter out saved jobs from the list
  const filteredWithoutSaved = useMemo(
    () => filtered.filter((job) => !savedStatus[job.id]),
    [filtered, savedStatus]
  );

  const totalPages = useMemo(
    () => Math.max(1, Math.ceil(filteredWithoutSaved.length / pageSize)),
    [filteredWithoutSaved.length]
  );

  useEffect(() => {
    if (page > totalPages) {
      setPage(totalPages);
    }
  }, [page, totalPages]);

  const paginated = useMemo(
    () => filteredWithoutSaved.slice((page - 1) * pageSize, page * pageSize),
    [filteredWithoutSaved, page]
  );

  const startIdx = filteredWithoutSaved.length === 0 ? 0 : (page - 1) * pageSize + 1;
  const endIdx = (page - 1) * pageSize + paginated.length;

  const hasSidebarFilters =
    selectedCities.length > 0 ||
    selectedRoles.length > 0 ||
    selectedJobTypes.length > 0 ||
    selectedWorkModes.length > 0 ||
    Boolean(selectedExperience) ||
    Boolean(salaryFilter);

  const toggleValue = (value, setFn) => {
    setFn((prev) =>
      prev.includes(value) ? prev.filter((item) => item !== value) : [...prev, value]
    );
  };

  const clearFilters = () => {
    setSelectedCities([]);
    setSelectedRoles([]);
    setSelectedJobTypes([]);
    setSelectedWorkModes([]);
    setSelectedExperience("");
    setSalaryFilter("");
  };

  // Helper to count jobs for each filter option
  const getJobCountForCity = (city) => {
    return jobList.filter((job) => {
      const jobCity = (job.city || "").toLowerCase();
      const jobLocation = (job.location || "").toLowerCase();
      return jobCity === city.toLowerCase() || jobLocation.includes(city.toLowerCase());
    }).length;
  };

  const getJobCountForTitle = (title) => {
    return jobList.filter((job) =>
      job.title.toLowerCase().includes(title.toLowerCase())
    ).length;
  };

  return (
    <div className="min-h-screen bg-bg">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div className="flex flex-col gap-4 sm:gap-6 mb-6 sm:mb-8">
          <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
            <div>
              <p className="text-sm text-text-muted mb-1">
                {filteredWithoutSaved.length || jobList.length} jobs near you
              </p>
              <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold text-text-dark">
                Find Jobs
              </h1>
            </div>
            <div className="w-full sm:w-auto sm:min-w-[320px] md:min-w-[420px]">
              <div className="flex items-center gap-2 card px-3 sm:px-4 py-2.5">
                <Search size={18} className="text-text-muted flex-shrink-0" />
                <input
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  onKeyDown={(e) => e.key === "Enter" && applyFilters()}
                  className="flex-1 text-sm sm:text-base outline-none bg-transparent text-text-dark placeholder:text-text-muted"
                  placeholder="Search jobs here"
                />
                <button
                  onClick={applyFilters}
                  className="btn btn-primary btn-sm flex-shrink-0"
                >
                  Search
                </button>
              </div>
            </div>
          </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-[280px,1fr] gap-4 sm:gap-6 lg:gap-8">
          <aside className="card card-padding lg:sticky lg:top-4 lg:self-start">
            <div className="flex items-center justify-between mb-5">
              <h2 className="text-base font-semibold text-text-dark">Filters</h2>
              {hasSidebarFilters && (
                <button
                  onClick={clearFilters}
                  className="text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors"
                >
                  Clear All
                </button>
              )}
            </div>

            <div className="space-y-6">
              {/* Dynamic City Filter */}
              {cityOptions.length > 0 && (
                <div>
                  <p className="text-sm font-semibold text-text-dark mb-3">City</p>
                  <div className="flex flex-wrap gap-2">
                    {cityOptions.map((city) => {
                      const active = selectedCities.includes(city);
                      const jobCount = getJobCountForCity(city);
                      if (jobCount === 0) return null; // Hide filters with zero jobs
                      return (
                        <button
                          key={city}
                          onClick={() => toggleValue(city, setSelectedCities)}
                          className={`rounded-chip px-3 py-1.5 text-xs font-medium transition-colors ${active
                            ? "bg-primary-50 border-2 border-primary-200 text-primary-700"
                            : "bg-white border-2 border-border text-text-muted hover:bg-gray-50"
                            }`}
                        >
                          {city}
                        </button>
                      );
                    })}
                  </div>
                </div>
              )}

              {/* Dynamic Job Title/Role Filter */}
              {titleOptions.length > 0 && (
                <div>
                  <p className="text-sm font-semibold text-text-dark mb-3">
                    Job Role(s)
                  </p>
                  <div className="flex flex-wrap gap-2">
                    {titleOptions.map((title) => {
                      const active = selectedRoles.includes(title);
                      const jobCount = getJobCountForTitle(title);
                      if (jobCount === 0) return null; // Hide filters with zero jobs
                      return (
                        <button
                          key={title}
                          onClick={() => toggleValue(title, setSelectedRoles)}
                          className={`rounded-chip px-3 py-1.5 text-xs font-medium transition-colors ${active
                            ? "bg-primary-50 border-2 border-primary-200 text-primary-700"
                            : "bg-white border-2 border-border text-text-muted hover:bg-gray-50"
                            }`}
                        >
                          {title}
                        </button>
                      );
                    })}
                  </div>
                </div>
              )}

              {/* Static Job Type Filter */}
              <div>
                <p className="text-sm font-semibold text-text-dark mb-3">
                  Job Type
                </p>
                <div className="flex flex-wrap gap-2">
                  {JOB_TYPE_OPTIONS.map((option) => {
                    const active = selectedJobTypes.includes(option.value);
                    return (
                      <button
                        key={option.value}
                        onClick={() => toggleValue(option.value, setSelectedJobTypes)}
                        className={`rounded-chip px-3 py-1.5 text-xs font-medium transition-colors ${active
                          ? "bg-primary-50 border-2 border-primary-200 text-primary-700"
                          : "bg-white border-2 border-border text-text-muted hover:bg-gray-50"
                          }`}
                      >
                        {option.label}
                      </button>
                    );
                  })}
                </div>
              </div>

              {/* Static Work Mode Filter */}
              <div>
                <p className="text-sm font-semibold text-text-dark mb-3">
                  Work Mode
                </p>
                <div className="flex flex-wrap gap-2">
                  {WORK_MODE_OPTIONS.map((option) => {
                    const active = selectedWorkModes.includes(option.value);
                    return (
                      <button
                        key={option.value}
                        onClick={() => toggleValue(option.value, setSelectedWorkModes)}
                        className={`rounded-chip px-3 py-1.5 text-xs font-medium transition-colors ${active
                          ? "bg-primary-50 border-2 border-primary-200 text-primary-700"
                          : "bg-white border-2 border-border text-text-muted hover:bg-gray-50"
                          }`}
                      >
                        {option.label}
                      </button>
                    );
                  })}
                </div>
              </div>

              {/* Static Experience Filter */}
              <div>
                <p className="text-sm font-semibold text-text-dark mb-3">Experience</p>
                <div className="space-y-2">
                  {EXPERIENCE_OPTIONS.map((opt) => (
                    <label
                      key={opt.value}
                      className="flex items-center gap-2.5 text-sm text-text-dark cursor-pointer hover:text-primary-600 transition-colors"
                    >
                      <input
                        type="radio"
                        name="experience"
                        value={opt.value}
                        checked={selectedExperience === opt.value}
                        onChange={(e) => setSelectedExperience(e.target.value)}
                        className="w-4 h-4 text-primary-600 focus:ring-primary-500 cursor-pointer"
                      />
                      <span>{opt.label}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Static Salary Filter */}
              <div>
                <p className="text-sm font-semibold text-text-dark mb-3">Salary</p>
                <div className="space-y-2">
                  {SALARY_OPTIONS.map((opt) => (
                    <label
                      key={opt.value}
                      className="flex items-center gap-2.5 text-sm text-text-dark cursor-pointer hover:text-primary-600 transition-colors"
                    >
                      <input
                        type="radio"
                        name="salary"
                        value={opt.value}
                        checked={String(salaryFilter) === String(opt.value)}
                        onChange={(e) => setSalaryFilter(e.target.value)}
                        className="w-4 h-4 text-primary-600 focus:ring-primary-500 cursor-pointer"
                      />
                      <span>{opt.label}</span>
                    </label>
                  ))}
                </div>
              </div>
            </div>
          </aside>

          <section className="space-y-4 sm:space-y-6">
            {error && (
              <div className="text-sm text-error-600 bg-error-light border border-error-300 rounded-lg px-4 py-3">
                {error}
              </div>
            )}

            <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm text-text-muted">
              <span>
                Showing {startIdx}â{endIdx} of {filteredWithoutSaved.length} roles
              </span>
              {hasSidebarFilters && (
                <span className="badge badge-primary">
                  Filters applied
                </span>
              )}
            </div>

            {loading ? (
              <div className="card card-padding text-center text-text-muted text-sm">
                <div className="animate-pulse">Loading rolesâ¦</div>
              </div>
            ) : paginated.length === 0 ? (
              <div className="card card-padding text-center text-text-muted text-sm">
                No roles match these filters.
              </div>
            ) : (
              <div className="space-y-4">
                {paginated.map((r) => (
                  <article
                    key={r.id}
                    className="relative card card-hover card-padding"
                  >
                    <button
                      onClick={() => toggleSaveJob(r.id, savedStatus[r.id])}
                      className="absolute right-4 sm:right-6 top-4 sm:top-6 text-text-muted hover:text-primary-600 transition-colors z-10"
                      aria-label={savedStatus[r.id] ? "Unsave job" : "Save job"}
                    >
                      {savedStatus[r.id] ? (
                        <BookmarkCheck size={18} className="text-primary-600" />
                      ) : (
                        <Bookmark size={18} />
                      )}
                    </button>

                    <div className="flex flex-col gap-3 sm:gap-4 pr-8 sm:pr-10">
                      <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
                        <div className="space-y-1.5 flex-1">
                          <p className="text-xs text-text-muted uppercase tracking-wider font-medium">
                            {r.workMode || "Work from home"}
                          </p>
                          <h3 className="text-lg sm:text-xl font-semibold text-text-dark">
                            {r.title || "Untitled role"}
                          </h3>
                          <div className="flex flex-wrap items-center gap-3 text-sm text-text-muted">
                            {r.company && (
                              <span className="inline-flex items-center gap-1.5">
                                <Building2 size={16} className="text-primary-500" /> {r.company}
                              </span>
                            )}
                            {r.location && (
                              <span className="inline-flex items-center gap-1.5">
                                <MapPin size={16} className="text-primary-500" /> {r.location}
                              </span>
                            )}
                          </div>
                        </div>

                        <div className="text-left sm:text-right">
                          {(r.minSalary != null || r.maxSalary != null || r.salary) && (
                            <p className="text-lg sm:text-xl font-semibold text-text-dark">
                              {formatSalary(r.salary, r.minSalary, r.maxSalary)} /Month
                            </p>
                          )}
                          {r.vacancies && (
                            <p className="text-xs text-text-muted mt-1">{r.vacancies} vacancies</p>
                          )}
                        </div>
                      </div>

                      <div className="flex flex-wrap gap-2">
                        {r.type && (
                          <span className="badge badge-gray inline-flex items-center gap-1">
                            <Briefcase size={14} /> {r.type}
                          </span>
                        )}
                        {r.workMode && (
                          <span className="badge badge-gray inline-flex items-center gap-1">
                            <Clock size={14} /> {r.workMode}
                          </span>
                        )}
                        {r.experience && (
                          <span className="badge badge-gray inline-flex items-center gap-1">
                            <GraduationCap size={14} /> {r.experience}
                          </span>
                        )}
                        {r.vacancies && (
                          <span className="badge badge-gray">
                            {r.vacancies} Vacancies
                          </span>
                        )}
                      </div>



                      <div className="flex flex-col gap-3 pt-2 border-t border-border sm:flex-row sm:items-center sm:justify-between">
                        <div className="flex flex-wrap gap-2">
                          <span className="badge badge-primary text-xs">
                            New
                          </span>

                          {r.skills && r.skills.length > 0 && (
                            r.skills.map((skill) => (
                              <span
                                key={skill}
                                className="inline-flex items-center px-2 py-0.5 rounded-full text-[10px] sm:text-xs border border-border text-text-muted bg-gray-50"
                              >
                                {skill}
                              </span>
                            ))
                          )}
                        </div>


                        <div className="flex items-center gap-2">
                          <a
                            href={`/jobs/${r.id}`}
                            className="inline-flex items-center gap-1.5 text-sm font-semibold text-primary-600 hover:text-primary-700 transition-colors"
                          >
                            View details
                            <ArrowUpRight size={16} />
                          </a>
                        </div>
                      </div>
                    </div>
                  </article>
                ))}
              </div>
            )}

            <div className="flex justify-center items-center gap-2 mt-6 sm:mt-8">
              <button
                className="btn btn-ghost btn-sm rounded-full"
                disabled={page === 1}
                onClick={() => setPage((p) => Math.max(1, p - 1))}
              >
                Previous
              </button>

              {Array.from({ length: totalPages }).map((_, i) => {
                const pageNum = i + 1;
                const active = page === pageNum;
                return (
                  <button
                    key={pageNum}
                    onClick={() => setPage(pageNum)}
                    className={`px-3 sm:px-4 py-1.5 text-xs sm:text-sm rounded-full border transition-colors ${active
                      ? "bg-primary-500 text-white border-primary-500 shadow-soft"
                      : "bg-white text-text-dark border-border hover:bg-primary-50"
                      }`}
                  >
                    {pageNum}
                  </button>
                );
              })}

              <button
                className="btn btn-ghost btn-sm rounded-full"
                disabled={page === totalPages || filteredWithoutSaved.length === 0}
                onClick={() => setPage((p) => Math.min(totalPages, p + 1))}
              >
                Next
              </button>
            </div>

            <div className="mt-6 card card-padding">
              <p className="flex items-center gap-2 text-sm font-semibold text-text-dark mb-4">
                Explore jobs in other categories
              </p>
              <div className="flex flex-wrap gap-2">
                {OTHER_CATEGORIES.map((cat) => (
                  <span
                    key={cat}
                    className="badge badge-gray"
                  >
                    {cat}
                  </span>
                ))}
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\legal\PrivacyPolicy.jsx ===
import { Link } from "react-router-dom";
import { Sparkles } from "lucide-react";

export default function PrivacyPolicy() {
  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {/* Header */}
        <div className="mb-8">
          <div className="flex items-center gap-2 mb-4">
            <div className="h-9 w-9 rounded-xl bg-blue-600 text-white grid place-items-center">
              <Sparkles size={18} />
            </div>
            <span className="text-lg font-extrabold tracking-tight text-slate-900">
              Hire<span className="text-blue-600">Spark</span>
            </span>
          </div>
          <h1 className="text-4xl font-bold text-slate-900 mb-2">ð Privacy Policy</h1>
          <p className="text-slate-600">
            <strong>Effective Date:</strong> {new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
          </p>
        </div>

        {/* Content */}
        <div className="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 md:p-12 space-y-8">
          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Introduction</h2>
            <p className="text-slate-700 leading-relaxed">
              At HireSpark, we are committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our platform.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Information We Collect</h2>
            <h3 className="text-xl font-semibold text-slate-800 mb-3">Personal Information</h3>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Name, email address, phone number</li>
              <li>Profile information (education, experience, skills)</li>
              <li>Resume and documents uploaded</li>
              <li>Company information (for recruiters)</li>
            </ul>
            <h3 className="text-xl font-semibold text-slate-800 mb-3 mt-4">Usage Data</h3>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>IP address, browser type, device information</li>
              <li>Pages visited, time spent, interactions</li>
              <li>Job applications and saved jobs</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">How We Use Your Information</h2>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>To provide and improve our services</li>
              <li>To match candidates with job opportunities</li>
              <li>To communicate with you about your account and job opportunities</li>
              <li>To verify recruiter and job posting authenticity</li>
              <li>To analyze platform usage and improve user experience</li>
              <li>To comply with legal obligations</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Data Sharing</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              We share your information only in the following circumstances:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li><strong>With Recruiters:</strong> Candidate contact details are shared only after a job application is submitted</li>
              <li><strong>Service Providers:</strong> With trusted third-party services that help us operate the platform</li>
              <li><strong>Legal Requirements:</strong> When required by law or to protect our rights</li>
            </ul>
            <p className="text-slate-700 leading-relaxed mt-4">
              <strong>We do not sell your personal data to third parties.</strong>
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Data Security</h2>
            <p className="text-slate-700 leading-relaxed">
              We implement appropriate technical and organizational measures to protect your personal information. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Your Rights</h2>
            <p className="text-slate-700 leading-relaxed mb-4">You have the right to:</p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Access and update your personal information</li>
              <li>Delete your account and data</li>
              <li>Opt-out of marketing communications</li>
              <li>Request a copy of your data</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Cookies</h2>
            <p className="text-slate-700 leading-relaxed">
              We use cookies and similar technologies to enhance your experience, analyze usage, and assist with authentication. You can control cookie preferences through your browser settings.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Third-Party Links</h2>
            <p className="text-slate-700 leading-relaxed">
              Our platform may contain links to third-party websites. We are not responsible for the privacy practices of these external sites. We encourage you to review their privacy policies.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Children's Privacy</h2>
            <p className="text-slate-700 leading-relaxed">
              Our platform is not intended for users under 18 years of age. We do not knowingly collect personal information from children.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Changes to This Policy</h2>
            <p className="text-slate-700 leading-relaxed">
              We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the effective date.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Contact Us</h2>
            <p className="text-slate-700 leading-relaxed mb-2">
              If you have questions about this Privacy Policy, please contact us:
            </p>
            <ul className="list-none space-y-2 text-slate-700">
              <li>ð§ <a href="mailto:support@hirespark.com" className="text-blue-600 hover:underline">support@hirespark.com</a></li>
              <li>ð B-30, Block-B, Sector-72, Noida</li>
            </ul>
          </section>
        </div>

        {/* Footer Links */}
        <div className="mt-8 text-center">
          <Link to="/terms" className="text-blue-600 hover:underline mr-4">
            Terms & Conditions
          </Link>
          <Link to="/home" className="text-blue-600 hover:underline">
            Back to Home
          </Link>
        </div>
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\legal\RefundCancellation.jsx ===
import { Link } from "react-router-dom";
import { Sparkles } from "lucide-react";

export default function RefundCancellation() {
  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {/* Header */}
        <div className="mb-8">
          <div className="flex items-center gap-2 mb-4">
            <div className="h-9 w-9 rounded-xl bg-blue-600 text-white grid place-items-center">
              <Sparkles size={18} />
            </div>
            <span className="text-lg font-extrabold tracking-tight text-slate-900">
              Hire<span className="text-blue-600">Spark</span>
            </span>
          </div>
          <h1 className="text-4xl font-bold text-slate-900 mb-2">ð° Refund & Cancellation Policy</h1>
          <p className="text-slate-600">
            <strong>Effective Date:</strong> {new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
          </p>
        </div>

        {/* Content */}
        <div className="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 md:p-12 space-y-8">
          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">General Policy</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              HireSpark is currently a <strong>free platform</strong> for both candidates and recruiters. We do not charge any fees for:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Creating an account</li>
              <li>Posting job listings</li>
              <li>Applying to jobs</li>
              <li>Viewing candidate profiles</li>
              <li>Using basic platform features</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Future Paid Services</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              If HireSpark introduces paid services in the future (such as premium job postings, featured listings, or premium candidate access), the following refund policy will apply:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li><strong>Refund Requests:</strong> Must be submitted within 7 days of purchase</li>
              <li><strong>Processing Time:</strong> Refunds will be processed within 14 business days</li>
              <li><strong>Eligibility:</strong> Refunds are only available for unused services that have not been activated</li>
              <li><strong>Partial Refunds:</strong> May be provided on a pro-rata basis for partially used services</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Cancellation Policy</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              Users may cancel their accounts at any time through their account settings. Upon cancellation:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Your account and profile will be deactivated</li>
              <li>Active job postings will be removed</li>
              <li>Your data will be retained for 30 days before permanent deletion</li>
              <li>You may request immediate data deletion by contacting support</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Non-Refundable Items</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              The following are not eligible for refunds:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Services that have been fully utilized or activated</li>
              <li>Featured job listings that have already been published</li>
              <li>Premium subscriptions that have been active for more than 7 days</li>
              <li>Any services used in violation of our Terms & Conditions</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Dispute Resolution</h2>
            <p className="text-slate-700 leading-relaxed">
              If you have any concerns about charges or require assistance with refunds, please contact our support team. We are committed to resolving all disputes fairly and promptly.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">Contact Information</h2>
            <p className="text-slate-700 leading-relaxed mb-2">
              For refund or cancellation requests, please contact us:
            </p>
            <ul className="list-none space-y-2 text-slate-700">
              <li>ð§ <a href="mailto:support@hirespark.com" className="text-blue-600 hover:underline">support@hirespark.com</a></li>
              <li>ð B-30, Block-B, Sector-72, Noida</li>
            </ul>
          </section>
        </div>

        {/* Footer Links */}
        <div className="mt-8 text-center">
          <Link to="/terms" className="text-blue-600 hover:underline mr-4">
            Terms & Conditions
          </Link>
          <Link to="/privacy" className="text-blue-600 hover:underline mr-4">
            Privacy Policy
          </Link>
          <Link to="/home" className="text-blue-600 hover:underline">
            Back to Home
          </Link>
        </div>
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\guest\legal\TermsAndConditions.jsx ===
import { Link } from "react-router-dom";
import { Sparkles } from "lucide-react";

export default function TermsAndConditions() {
  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        {/* Header */}
        <div className="mb-8">
          <div className="flex items-center gap-2 mb-4">
            <div className="h-9 w-9 rounded-xl bg-blue-600 text-white grid place-items-center">
              <Sparkles size={18} />
            </div>
            <span className="text-lg font-extrabold tracking-tight text-slate-900">
              Hire<span className="text-blue-600">Spark</span>
            </span>
          </div>
          <h1 className="text-4xl font-bold text-slate-900 mb-2">ð Terms & Conditions</h1>
          <p className="text-slate-600">
            <strong>Effective Date:</strong> {new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
          </p>
        </div>

        {/* Content */}
        <div className="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 md:p-12 space-y-8">
          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">1ï¸â£ General Terms of Use</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              By accessing or using this platform ("HireSpark"), you agree to comply with and be bound by these Terms & Conditions. If you do not agree, please do not use the platform.
            </p>
            <p className="text-slate-700 leading-relaxed">
              HireSpark is a job discovery and hiring facilitation platform connecting candidates, recruiters, and employers. We do not guarantee job placement or hiring outcomes.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">2ï¸â£ User Eligibility</h2>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>You must be <strong>18 years or older</strong> to use this platform.</li>
              <li>You agree to provide <strong>accurate, complete, and truthful information</strong>.</li>
              <li>One user is allowed <strong>one account only</strong>.</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">3ï¸â£ Candidate Terms</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              By registering as a <strong>candidate</strong>, you agree that:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>All personal, educational, and professional details provided are correct.</li>
              <li>You will not submit fake documents, false experience, or misleading information.</li>
              <li>Job applications are sent at your own discretion and responsibility.</li>
              <li>HireSpark is <strong>not responsible</strong> for employer responses, interview outcomes, salary offers, or employment disputes.</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">4ï¸â£ Recruiter / Employer Terms</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              By registering as a <strong>recruiter/employer</strong>, you agree that:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>You represent a legitimate company or hiring authority.</li>
              <li>Job postings must be <strong>genuine, legal, and non-discriminatory</strong>.</li>
              <li>You will not post fraudulent, misleading, or fee-based job offers.</li>
              <li>You agree that <strong>HireSpark may review, approve, reject, or remove job posts</strong> at its discretion.</li>
              <li>You will not misuse candidate data or contact details.</li>
            </ul>
            <p className="text-slate-700 leading-relaxed mt-4">
              Violation may result in <strong>account suspension or permanent ban</strong>.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">5ï¸â£ Job Posting & Verification</h2>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>All recruiter profiles and job postings are subject to <strong>internal verification</strong>.</li>
              <li>HireSpark reserves the right to request additional documents.</li>
              <li>Verified badges do <strong>not guarantee</strong> legitimacy of hiring outcomes.</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">6ï¸â£ Data Usage & Privacy</h2>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>By using the platform, you consent to the collection and processing of your data as per our <Link to="/privacy" className="text-blue-600 hover:underline">Privacy Policy</Link>.</li>
              <li>Candidate contact details may be shared with recruiters <strong>only after application</strong>.</li>
              <li>We do not sell personal data to third parties.</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">7ï¸â£ Prohibited Activities</h2>
            <p className="text-slate-700 leading-relaxed mb-4">Users must NOT:</p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Post fake jobs or profiles</li>
              <li>Harass or spam other users</li>
              <li>Attempt to bypass platform security</li>
              <li>Scrape or misuse platform data</li>
              <li>Use the platform for unlawful purposes</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">8ï¸â£ Limitation of Liability</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              HireSpark is <strong>not liable</strong> for:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Hiring decisions</li>
              <li>Employment disputes</li>
              <li>Financial losses</li>
              <li>Employer or candidate conduct</li>
              <li>External links or third-party services</li>
            </ul>
            <p className="text-slate-700 leading-relaxed mt-4">
              Use of the platform is <strong>at your own risk</strong>.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">9ï¸â£ Account Termination</h2>
            <p className="text-slate-700 leading-relaxed mb-4">
              HireSpark reserves the right to:
            </p>
            <ul className="list-disc list-inside space-y-2 text-slate-700">
              <li>Suspend or terminate accounts without prior notice</li>
              <li>Remove content violating policies</li>
              <li>Restrict access to services</li>
            </ul>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">ð Changes to Terms</h2>
            <p className="text-slate-700 leading-relaxed">
              We may update these Terms & Conditions at any time. Continued use of the platform implies acceptance of revised terms.
            </p>
          </section>

          <section>
            <h2 className="text-2xl font-bold text-slate-900 mb-4">1ï¸â£1ï¸â£ Contact Information</h2>
            <p className="text-slate-700 leading-relaxed mb-2">
              For queries or concerns:
            </p>
            <ul className="list-none space-y-2 text-slate-700">
              <li>ð§ <a href="mailto:support@hirespark.com" className="text-blue-600 hover:underline">support@hirespark.com</a></li>
              <li>ð B-30, Block-B, Sector-72, Noida</li>
            </ul>
          </section>
        </div>

        {/* Footer Links */}
        <div className="mt-8 text-center">
          <Link to="/privacy" className="text-blue-600 hover:underline mr-4">
            Privacy Policy
          </Link>
          <Link to="/home" className="text-blue-600 hover:underline">
            Back to Home
          </Link>
        </div>
      </div>
    </div>
  );
}

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\recruiter\home\home.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";

export default function RecruiterDashboard() {
  const [stats, setStats] = useState({
    totalJobs: 0,
    recentApplications: 0,
    recentActivity: [],
    shortlisted: 0
  });
  const [recentJobs, setRecentJobs] = useState([]);
  const [recentApplicants, setRecentApplicants] = useState([]);
  const [loading, setLoading] = useState(true);

  // Fetch dashboard stats on component mount
  useEffect(() => {
    fetchDashboardData();
  }, []);

  const fetchDashboardData = async () => {
    try {
      setLoading(true);
      
      // Fetch stats
      const statsResponse = await api.get("/recruiter/stats");
      if (statsResponse.data.ok) {
        setStats(statsResponse.data.stats);
      }

      // Fetch recent jobs
      const jobsResponse = await api.get("/recruiter/jobs?limit=3");
      if (jobsResponse.data.ok) {
        setRecentJobs(jobsResponse.data.jobs || []);
      }

      // Fetch recent applicants
      const applicantsResponse = await api.get("/recruiter/recent-applicants");
      if (applicantsResponse.data.ok) {
        setRecentApplicants(applicantsResponse.data.applicants || []);
      }

    } catch (err) {
      console.error("Error fetching dashboard data:", err);
    } finally {
      setLoading(false);
    }
  };

  // Format time ago utility
  const formatTimeAgo = (timestamp) => {
    const now = new Date();
    const time = new Date(timestamp);
    const diffInHours = Math.floor((now - time) / (1000 * 60 * 60));
    
    if (diffInHours < 1) return 'Just now';
    if (diffInHours < 24) return `${diffInHours}h ago`;
    if (diffInHours < 168) return `${Math.floor(diffInHours / 24)}d ago`;
    return `${Math.floor(diffInHours / 168)}w ago`;
  };

  // Format date
  const formatDate = (dateString) => {
    if (!dateString) return '';
    return new Date(dateString).toLocaleDateString('en-US', {
      month: 'short',
      day: 'numeric',
      year: 'numeric'
    });
  };                              

  return (
    <section className="p-4 md:p-8 space-y-6">
      {/* Mobile Header */}
      <div className="md:hidden mb-8">
        <h1 className="text-3xl font-bold text-gray-900 mb-2">Recruiter Dashboard</h1>
        <p className="text-gray-600">Welcome back! Here's your hiring overview</p>
      </div>

      {/* Stats Grid - Matching your HTML design */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div className="bg-white rounded-xl border border-slate-200 p-4">
          <p className="text-xs text-slate-500">Active jobs</p>
          <p className="mt-2 text-2xl font-semibold">
            {loading ? '...' : stats.totalJobs}
          </p>
          <p className="mt-1 text-xs text-slate-500">Currently live on platform</p>
        </div>

        <div className="bg-white rounded-xl border border-slate-200 p-4">
          <p className="text-xs text-slate-500">New applicants (7 days)</p>
          <p className="mt-2 text-2xl font-semibold">
            {loading ? '...' : stats.recentApplications}
          </p>
          <p className="mt-1 text-xs text-slate-500">Across all open roles</p>
        </div>

        <div className="bg-white rounded-xl border border-slate-200 p-4">
          <p className="text-xs text-slate-500">Shortlisted</p>
          <p className="mt-2 text-2xl font-semibold">
            {loading ? '...' : stats.shortlisted}
          </p>
          <p className="mt-1 text-xs text-slate-500">Waiting for next step</p>
        </div>
      </div>

      {/* Recent jobs */}
      <div className="bg-white rounded-xl border border-slate-200 p-4">
        <div className="flex items-center justify-between mb-3">
          <h3 className="text-sm font-semibold">Recent job posts</h3>
          <a href="/job-posted" className="text-xs text-slate-500 hover:underline">Manage all jobs</a>
        </div>
        <div className="space-y-3 text-sm">
          {loading ? (
            <div className="text-center py-4">
              <p className="text-gray-500">Loading jobs...</p>
            </div>
          ) : recentJobs.length > 0 ? (
            recentJobs.map((job) => (
              <div key={job.id} className="flex items-center justify-between border border-slate-100 rounded-lg p-3">
                <div>
                  <p className="font-medium">{job.title}</p>
                  <p className="text-xs text-slate-500">
                    {job.applicationCount || 0} applicants â¢ Posted {formatDate(job.createdAt)}
                  </p>
                </div>
                <a 
                  href={`/recruiter/jobs/${job.id}/applicants`}
                  className="text-xs px-3 py-1.5 rounded-full border border-slate-200 hover:bg-slate-50"
                >
                  View applicants
                </a>
              </div>
            ))
          ) : (
            <div className="text-center py-4">
              <p className="text-gray-500">No jobs posted yet</p>
            </div>
          )}
        </div>
      </div>

      {/* Recent applicants */}
      <div className="bg-white rounded-xl border border-slate-200 p-4">
        <div className="flex items-center justify-between mb-3">
          <h3 className="text-sm font-semibold">Recent applicants</h3>
          <a href="/applicants" className="text-xs text-slate-500 hover:underline">Go to Applicants</a>
        </div>
        <div className="space-y-3 text-xs">
          {loading ? (
            <div className="text-center py-2">
              <p className="text-gray-500">Loading applicants...</p>
            </div>
          ) : recentApplicants.length > 0 ? (
            recentApplicants.map((applicant, index) => (
              <div key={index} className="flex items-center justify-between">
                <div>
                  <p className="font-medium text-sm">
                    {applicant.user?.fullName || applicant.name || 'Anonymous'}
                  </p>
                  <p className="text-slate-500">
                    Applied for {applicant.jobTitle || 'a job'}
                  </p>
                </div>
                <p className="text-slate-400">
                  {formatTimeAgo(applicant.appliedAt || applicant.createdAt)}
                </p>
              </div>
            ))
          ) : (
            <div className="text-center py-2">
              <p className="text-gray-500">No recent applicants</p>
            </div>
          )}
        </div>
      </div>

      {/* Recent Activity Section */}
      <div className="bg-white rounded-xl border border-slate-200 p-4">
        <div className="flex items-center justify-between mb-3">
          <h3 className="text-sm font-semibold">Recent Activity</h3>
          <a href="/activity" className="text-xs text-slate-500 hover:underline">View all</a>
        </div>
        <div className="space-y-4">
          {loading ? (
            <div className="text-center py-4">
              <p className="text-gray-500">Loading activity...</p>
            </div>
          ) : stats.recentActivity && stats.recentActivity.length > 0 ? (
            stats.recentActivity.map((activity, index) => (
              <div key={index} className="flex items-center justify-between">
                <div className="flex items-center space-x-3">
                  <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                  <span className="text-sm text-gray-700">{activity.message}</span>
                </div>
                <span className="text-xs text-gray-500">
                  {formatTimeAgo(activity.timestamp)}
                </span>
              </div>
            ))
          ) : (
            <div className="text-center py-4">
              <p className="text-gray-500">No recent activity</p>
            </div>
          )}
        </div>
      </div>
    </section>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\recruiter\jobs\job-post.jsx ===
import { useState } from "react";
import { Link } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";
// Component for creating a new job posting
export default function AdminPostJob() {
  const [form, setForm] = useState({
    title: "",
    company: "",
    jobType: "Full-time",
    workMode: "Office",
    city: "",
    locality: "",
    skills: "",
    minExperience: "",
    maxExperience: "",
    minSalary: "",
    maxSalary: "",
    vacancies: 1,
    description: "",
    interviewAddress: "",
    contactEmail: "",
    contactPhone: "",
    logoFile: null,
  });

  const [errors, setErrors] = useState({});
  const [submitting, setSubmitting] = useState(false);
  const [success, setSuccess] = useState(null);
  const [termsAccepted, setTermsAccepted] = useState(false);
  // Update form field
  function updateField(name, value) {
    setForm((s) => ({ ...s, [name]: value }));
    setErrors((e) => ({ ...e, [name]: "" }));
  }
  // Handle logo file change
  function handleLogoChange(e) {
    const file = e.target.files?.[0] ?? null;
    updateField("logoFile", file);
  }

  function validate() {
    const err = {};
    if (!form.title.trim()) err.title = "Job title is required";
    if (!form.company.trim()) err.company = "Company name is required";
    if (!form.city.trim()) err.city = "City required";
    if (!form.description.trim()) err.description = "Job description required";
    if (!form.contactEmail.trim() && !form.contactPhone.trim()) err.contact = "Provide email or phone";
    if (form.vacancies <= 0) err.vacancies = "Vacancies must be >= 1";
    setErrors(err);
    return Object.keys(err).length === 0;
  }

  // Helper: capitalize first character and lowercase the rest
  function capitalizeFirst(str) {
    if (!str && str !== "") return "";
    const s = String(str).trim();
    if (!s) return "";
    return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
  }

  async function handleSubmit(e) {
    e.preventDefault();
    setSuccess(null);

    if (!termsAccepted) {
      setErrors((e) => ({ ...e, submit: "Please confirm that this is a genuine job opening and accept the Terms & Conditions." }));
      return;
    }

    if (!validate()) return;

    setSubmitting(true);

    try {
      // normalize title + company before sending
      const normalizedTitle = capitalizeFirst(form.title);
      const normalizedCompany = capitalizeFirst(form.company);

      // Create formData for file upload
      const payload = new FormData();

      // Append all form fields
      payload.append("title", normalizedTitle);
      payload.append("company", normalizedCompany);
      payload.append("jobType", form.jobType);
      payload.append("workMode", form.workMode);
      payload.append("city", form.city);
      payload.append("locality", form.locality);
      payload.append("skills", form.skills);
      payload.append("minExperience", form.minExperience);
      payload.append("maxExperience", form.maxExperience);
      payload.append("minSalary", form.minSalary);
      payload.append("maxSalary", form.maxSalary);
      payload.append("vacancies", form.vacancies.toString());
      payload.append("description", form.description);
      payload.append("interviewAddress", form.interviewAddress);
      payload.append("contactEmail", form.contactEmail);
      payload.append("contactPhone", form.contactPhone);

      if (form.logoFile) {
        payload.append("logo", form.logoFile);
      }

      // send to backend using axios instance
      const { data } = await api.post("/recruiter/jobs/create", payload, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
      });

      setSuccess(data?.message || "Job posted successfully.");

      // clear form
      setForm({
        title: "",
        company: "",
        jobType: "Full-time",
        workMode: "Office",
        city: "",
        locality: "",
        skills: "",
        minExperience: "",
        maxExperience: "",
        minSalary: "",
        maxSalary: "",
        vacancies: 1,
        description: "",
        interviewAddress: "",
        contactEmail: "",
        contactPhone: "",
        logoFile: null,
      });
      setErrors({});
    } catch (err) {
      setSuccess(null);
      const errorMessage = err?.response?.data?.message || err.message || "Submit failed";
      setErrors((e) => ({ ...e, submit: errorMessage }));
      console.error("Job creation error:", err);
    } finally {
      setSubmitting(false);
    }
  }

  // small helper: display a logo preview (client-side)
  const logoPreview = form.logoFile ? URL.createObjectURL(form.logoFile) : null;

  // For preview only: show capitalized-first display (does not modify form state)
  const previewTitle = form.title ? capitalizeFirst(form.title) : "";
  const previewCompany = form.company ? capitalizeFirst(form.company) : "";

  return (
    <div className="container-custom py-8 sm:py-10">
      <h1 className="text-2xl sm:text-3xl font-bold mb-6 sm:mb-8 text-text-dark">Post a Job</h1>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
        {/* Form column */}
        <div className="lg:col-span-2">
          <div className="card">
            <div className="p-4 sm:p-6 border-b border-border">
              <h2 className="text-lg sm:text-xl font-semibold text-text-dark">Create Job Posting</h2>
            </div>

            <form onSubmit={handleSubmit}>
              <div className="p-4 sm:p-6 space-y-5 sm:space-y-6">
                {success && (
                  <div className="rounded-lg bg-success-light border border-success-300 p-3 sm:p-4 text-success-700 text-sm">
                    {success}
                  </div>
                )}
                {errors.submit && (
                  <div className="rounded-lg bg-error-light border border-error-300 p-3 sm:p-4 text-error-700 text-sm">
                    {errors.submit}
                  </div>
                )}

                <div>
                  <label className="label">Job Title *</label>
                  <input
                    value={form.title}
                    onChange={(e) => updateField("title", e.target.value)}
                    placeholder="e.g., Frontend Developer"
                    className={`input ${errors.title ? 'input-error' : ''}`}
                  />
                  {errors.title && <p className="text-xs text-error-600 mt-1.5">{errors.title}</p>}
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                  <div>
                    <label className="label">Company *</label>
                    <input
                      value={form.company}
                      onChange={(e) => updateField("company", e.target.value)}
                      placeholder="Company name"
                      className={`input ${errors.company ? 'input-error' : ''}`}
                    />
                    {errors.company && <p className="text-xs text-error-600 mt-1.5">{errors.company}</p>}
                  </div>

                  <div>
                    <label className="label">Job Type</label>
                    <select
                      value={form.jobType}
                      onChange={(e) => updateField("jobType", e.target.value)}
                      className="select"
                    >
                      <option>Full-time</option>
                      <option>Part-time</option>
                      <option>Contract</option>
                      <option>Internship</option>
                      <option>Work from Home</option>
                    </select>
                  </div>

                  <div>
                    <label className="label">Work Mode</label>
                    <select
                      value={form.workMode}
                      onChange={(e) => updateField("workMode", e.target.value)}
                      className="select"
                    >
                      <option>Office</option>
                      <option>Remote</option>
                      <option>Hybrid</option>
                    </select>
                  </div>
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                  <div>
                    <label className="label">City *</label>
                    <input
                      value={form.city}
                      onChange={(e) => updateField("city", e.target.value)}
                      placeholder="City"
                      className={`input ${errors.city ? 'input-error' : ''}`}
                    />
                    {errors.city && <p className="text-xs text-error-600 mt-1.5">{errors.city}</p>}
                  </div>
                  <div>
                    <label className="label">Locality</label>
                    <input
                      value={form.locality}
                      onChange={(e) => updateField("locality", e.target.value)}
                      placeholder="Locality / area"
                      className="input"
                    />
                  </div>
                  <div>
                    <label className="label">Vacancies</label>
                    <input
                      type="number"
                      value={form.vacancies}
                      onChange={(e) => updateField("vacancies", Math.max(1, Number(e.target.value || 1)))}
                      className={`input ${errors.vacancies ? 'input-error' : ''}`}
                    />
                    {errors.vacancies && <p className="text-xs text-error-600 mt-1.5">{errors.vacancies}</p>}
                  </div>
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="label">Experience (min)</label>
                      <input
                        value={form.minExperience}
                        onChange={(e) => updateField("minExperience", e.target.value)}
                        placeholder="e.g., 0"
                        className="input"
                      />
                    </div>
                    <div>
                      <label className="label">Experience (max)</label>
                      <input
                        value={form.maxExperience}
                        onChange={(e) => updateField("maxExperience", e.target.value)}
                        placeholder="e.g., 3"
                        className="input"
                      />
                    </div>
                  </div>
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="label">Salary (min) /Month</label>
                      <input
                        type="number"
                        value={form.minSalary}
                        onChange={(e) => updateField("minSalary", e.target.value)}
                        placeholder="e.g., 20000"
                        className="input"
                      />
                    </div>
                    <div>
                      <label className="label">Salary (max) /Month</label>
                      <input
                        type="number"
                        value={form.maxSalary}
                        onChange={(e) => updateField("maxSalary", e.target.value)}
                        placeholder="e.g., 40000"
                        className="input"
                      />
                    </div>
                  </div>
                </div>

                <div>
                  <label className="label">Skills / Technologies (comma separated)</label>
                  <input
                    value={form.skills}
                    onChange={(e) => updateField("skills", e.target.value)}
                    placeholder="React, Node.js, SQL, Docker"
                    className="input"
                  />
                </div>

                <div>
                  <label className="label">Job Description *</label>
                  <textarea
                    value={form.description}
                    onChange={(e) => updateField("description", e.target.value)}
                    className={`textarea ${errors.description ? 'input-error' : ''}`}
                    placeholder="Describe responsibilities, requirements, benefits..."
                  />
                  {errors.description && <p className="text-xs text-error-600 mt-1.5">{errors.description}</p>}
                </div>

                <div>
                  <label className="label">Interview Address / Office Address</label>
                  <input
                    value={form.interviewAddress}
                    onChange={(e) => updateField("interviewAddress", e.target.value)}
                    placeholder="Full address"
                    className="input"
                  />
                </div>

                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <div>
                    <label className="label">Contact Email</label>
                    <input
                      value={form.contactEmail}
                      onChange={(e) => updateField("contactEmail", e.target.value)}
                      placeholder="hr@company.com"
                      className="input"
                    />
                  </div>
                  <div>
                    <label className="label">Contact Phone</label>
                    <input
                      value={form.contactPhone}
                      onChange={(e) => updateField("contactPhone", e.target.value)}
                      placeholder="+91 98xxxxxxxx"
                      className="input"
                    />
                  </div>
                </div>

                <div>
                  <label className="label">Company / Job Logo</label>
                  <input
                    type="file"
                    accept="image/*"
                    onChange={handleLogoChange}
                    className="text-sm file:mr-4 file:py-2 file:px-4 file:rounded-button file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 cursor-pointer"
                  />
                  {logoPreview && (
                    <img
                      src={logoPreview}
                      alt="logo preview"
                      className="mt-3 h-20 w-20 object-contain rounded-lg border border-border"
                    />
                  )}
                </div>

                {/* Terms & Conditions Acceptance */}
                <div className="p-4 sm:p-5 bg-gray-50 rounded-lg border border-border">
                  <div className="flex items-start gap-2.5">
                    <input
                      type="checkbox"
                      id="terms-checkbox-job"
                      checked={termsAccepted}
                      onChange={(e) => setTermsAccepted(e.target.checked)}
                      className="mt-0.5 h-4 w-4 text-primary-600 focus:ring-primary-500 border-border rounded cursor-pointer"
                      required
                    />
                    <label htmlFor="terms-checkbox-job" className="text-sm text-text-dark cursor-pointer leading-relaxed">
                      I confirm this is a genuine job opening and I agree to HireSpark's{" "}
                      <Link to="/terms" target="_blank" className="text-primary-600 hover:text-primary-700 hover:underline font-medium">
                        job posting policies
                      </Link>.
                    </label>
                  </div>
                </div>

                <div className="flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 pt-4 border-t border-border">
                  <button
                    type="button"
                    onClick={() => {
                      // reset
                      setForm({
                        title: "",
                        company: "",
                        jobType: "Full-time",
                        workMode: "Office",
                        city: "",
                        locality: "",
                        skills: "",
                        minExperience: "",
                        maxExperience: "",
                        minSalary: "",
                        maxSalary: "",
                        vacancies: 1,
                        description: "",
                        interviewAddress: "",
                        contactEmail: "",
                        contactPhone: "",
                        logoFile: null,
                      });
                      setErrors({});
                      setSuccess(null);
                      setTermsAccepted(false);
                    }}
                    className="btn btn-outline btn-md sm:w-auto w-full"
                  >
                    Reset
                  </button>

                  <button
                    type="submit"
                    className="btn btn-primary btn-md sm:w-auto w-full"
                    disabled={submitting || !termsAccepted}
                  >
                    {submitting ? "Publishing..." : "Publish Job"}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        {/* Preview column */}
        <div className="lg:sticky lg:top-4 lg:self-start">
          <div className="card">
            <div className="p-4 sm:p-5 border-b border-border">
              <h2 className="text-base sm:text-lg font-semibold text-text-dark">Preview</h2>
            </div>

            <div className="p-4 sm:p-5 space-y-4">
              <div className="flex items-start gap-3">
                {logoPreview ? (
                  <img src={logoPreview} alt="logo preview" className="h-16 w-16 object-cover rounded-lg border border-border flex-shrink-0" />
                ) : (
                  <div className="h-16 w-16 rounded-lg bg-gray-100 grid place-items-center text-text-light text-xs border border-border flex-shrink-0">Logo</div>
                )}
                <div className="min-w-0 flex-1">
                  <div className="font-semibold text-base sm:text-lg text-text-dark">{previewTitle || "Job title preview"}</div>
                  <div className="text-sm text-text-muted mt-0.5">{previewCompany || "Company name"}</div>
                </div>
              </div>

              <div className="text-sm text-text-dark space-y-2">
                <div>
                  <strong className="text-text-muted">Location:</strong>{" "}
                  <span className="text-text-dark">{form.city || "City"}{form.locality ? ` â ${form.locality}` : ""}</span>
                </div>
                <div>
                  <strong className="text-text-muted">Type:</strong> <span className="text-text-dark">{form.jobType}</span>
                </div>
                <div>
                  <strong className="text-text-muted">Work Mode:</strong> <span className="text-text-dark">{form.workMode}</span>
                </div>
                <div>
                  <strong className="text-text-muted">Experience:</strong>{" "}
                  <span className="text-text-dark">{(form.minExperience || "0") + (form.maxExperience ? ` - ${form.maxExperience} yrs` : " yrs")}</span>
                </div>
                <div>
                  <strong className="text-text-muted">Salary:</strong>{" "}
                  <span className="text-text-dark">
                    {form.minSalary && form.maxSalary
                      ? `â¹ ${Number(form.minSalary).toLocaleString('en-IN')} - ${Number(form.maxSalary).toLocaleString('en-IN')} /Month`
                      : form.minSalary
                        ? `â¹ ${Number(form.minSalary).toLocaleString('en-IN')}+ /Month`
                        : form.maxSalary
                          ? `Up to â¹ ${Number(form.maxSalary).toLocaleString('en-IN')} /Month`
                          : "NA"}
                  </span>
                </div>
                <div className="mt-2">
                  <strong className="text-text-muted">Skills:</strong> <span className="text-text-dark">{form.skills || "â"}</span>
                </div>
              </div>

              <div className="text-sm pt-2 border-t border-border">
                <div className="font-medium text-text-dark mb-1.5">Short description</div>
                <div className="text-text-muted text-sm leading-relaxed">
                  {form.description ? (form.description.length > 220 ? form.description.slice(0, 220) + "..." : form.description) : "Job description will appear here."}
                </div>
              </div>

              <div className="pt-3 border-t border-border">
                <div className="text-xs text-text-muted mb-1">Contact</div>
                <div className="text-sm text-text-dark">{form.contactEmail || form.contactPhone || "No contact provided"}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\recruiter\jobs\job-posted.jsx ===
import { useState, useEffect } from "react";
import api from "../../../components/apiconfig/apiconfig";
import { Link } from "react-router-dom";

export default function JobPosted() {
  const [jobs, setJobs] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");

  useEffect(() => {
    fetchPostedJobs();
  }, []);

  const fetchPostedJobs = async () => {
    try {
      setLoading(true);
      const { data } = await api.get("/recruiter/jobs");

      if (data.ok) {
        setJobs(data.jobs);
      } else {
        setError("Failed to fetch jobs");
      }
    } catch (err) {
      setError(err.response?.data?.message || "Failed to fetch jobs");
      console.error("Error fetching jobs:", err);
    } finally {
      setLoading(false);
    }
  };

  const formatDate = (dateString) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  };

  if (loading) {
    return (
      <div className="space-y-4">
        <div className="animate-pulse">
          <div className="h-8 bg-gray-200 rounded w-1/4 mb-4"></div>
          {[1, 2, 3].map((i) => (
            <div key={i} className="rounded-2xl bg-white border border-gray-200">
              <div className="py-4 px-6">
                <div className="h-4 bg-gray-200 rounded w-1/4 mb-2"></div>
                <div className="h-3 bg-gray-200 rounded w-1/3"></div>
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header - Remove max-w-6xl mx-auto */}
      <div className="flex justify-between items-center">
        <h1 className="text-2xl md:text-3xl font-bold text-gray-900">Posted Jobs</h1>
        <div className="text-sm text-gray-600">
          {jobs.length} job{jobs.length !== 1 ? 's' : ''} posted
        </div>
      </div>

      {error && (
        <div className="rounded-md bg-red-50 p-4">
          <p className="text-red-700">{error}</p>
        </div>
      )}

      {jobs.length === 0 ? (
        <div className="rounded-2xl text-center py-12 bg-white border border-gray-200">
          <div className="px-6">
            <div className="text-gray-500 mb-4">
              <svg className="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
            </div>
            <h3 className="text-lg font-semibold text-gray-900 mb-2">No jobs posted yet</h3>
            <p className="text-gray-600 mb-4">Start by creating your first job posting</p>
            <Link 
              to="/create-job"
              className="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors"
            >
              Post Your First Job
            </Link>
          </div>
        </div>
      ) : (
        <div className="space-y-4">
          {jobs.map((job) => (
            <div key={job.id} className="rounded-2xl hover:shadow-md transition-shadow bg-white border border-gray-200">
              <div className="py-6 px-6">
                <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                  <div className="flex-1">
                    <div className="flex items-start gap-4">
                      <div className="flex-1">
                        <h3 className="font-semibold text-lg text-gray-900">{job.title}</h3>
                        <p className="text-gray-600">
                          {job.company} â¢ {job.location} â¢ {job.type}
                        </p>
                        <div className="flex flex-wrap gap-2 mt-2">
                          <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                            {job.vacancies} vacancy{job.vacancies !== 1 ? 'ies' : ''}
                          </span>
                          <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                            {job.applicationCount} application{job.applicationCount !== 1 ? 's' : ''}
                          </span>
                        </div>
                        <p className="text-sm text-gray-500 mt-2">
                          Posted on {formatDate(job.createdAt)}
                        </p>
                      </div>
                    </div>
                  </div>
                  
                  <div className="flex gap-2 flex-shrink-0">
                    <Link 
                      to={`/recruiter/jobs/${job.id}/applicants`}
                      className="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
                    >
                      View Applicants
                    </Link>
                    <button className="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">
                      Edit Job
                    </button>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\recruiter\jobs\Job-response-list.jsx ===
import { useState, useEffect } from "react";
import { useParams, Link } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function JobApplicants() {
  const { jobId } = useParams();
  const [applicants, setApplicants] = useState([]);
  const [job, setJob] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState("");
  const [expandedDetails, setExpandedDetails] = useState({});
  const [showInterviewModal, setShowInterviewModal] = useState(null);
  const [interviewForm, setInterviewForm] = useState({
    date: "",
    time: "",
    message: ""
  });

  useEffect(() => {
    if (jobId) {
      fetchApplicants();
    }
  }, [jobId]);

  // Auto-close applications after 14 days if status is interview_called
  // Note: This is a simple client-side check. For production, this should be handled by a backend cron job
  const checkAndCloseStaleInterviews = async (applicantsList) => {
    const now = new Date();
    const staleInterviews = [];

    applicantsList.forEach(app => {
      if (app.status === 'interview_called' && app.updatedAt) {
        const updatedDate = new Date(app.updatedAt);
        const daysSinceUpdate = (now - updatedDate) / (1000 * 60 * 60 * 24);

        if (daysSinceUpdate >= 14) {
          staleInterviews.push(app.applicationId);
        }
      }
    });

    // Update all stale interviews
    if (staleInterviews.length > 0) {
      for (const applicationId of staleInterviews) {
        try {
          await updateApplicationStatus(applicationId, 'closed');
        } catch (err) {
          console.error('Error auto-closing stale interview:', err);
        }
      }
    }
  };

  const fetchApplicants = async () => {
    try {
      setLoading(true);
      const { data } = await api.get(`/recruiter/jobs/${jobId}/applicants`);
      if (data.ok) {
        const fetchedApplicants = data.applicants;
        setApplicants(fetchedApplicants);

        // Check for stale interviews and auto-close them
        await checkAndCloseStaleInterviews(fetchedApplicants);

        // Also fetch job details
        const jobData = await api.get("/recruiter/jobs");
        if (jobData.data.ok) {
          const currentJob = jobData.data.jobs.find(j => j.id === parseInt(jobId));
          setJob(currentJob);
        }
      } else {
        setError("Failed to fetch applicants");
      }
    } catch (err) {
      setError(err.response?.data?.message || "Failed to fetch applicants");
      console.error("Error fetching applicants:", err);
    } finally {
      setLoading(false);
    }
  };

  const formatDate = (dateString) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  const getStatusInfo = (status) => {
    const statusMap = {
      applied: {
        label: 'New Applicant',
        color: 'bg-blue-100 text-blue-800 border border-blue-200'
      },
      shortlisted: {
        label: 'Shortlisted',
        color: 'bg-green-100 text-green-800 border border-green-200'
      },
      interview_called: {
        label: 'Interview Called',
        color: 'bg-purple-100 text-purple-800 border border-purple-200'
      },
      closed: {
        label: 'Closed by System',
        color: 'bg-gray-100 text-gray-800 border border-gray-200'
      }
    };
    return statusMap[status] || {
      label: status.charAt(0).toUpperCase() + status.slice(1),
      color: 'bg-gray-100 text-gray-800 border border-gray-200'
    };
  };

  const getAvailabilityText = (availability) => {
    if (!availability) return "Availability not specified";

    const availabilityMap = {
      'Immediately': 'Can join immediately',
      'Within 7 Days': 'Can join in 7 days',
      'Within 15 Days': 'Can join in 15 days'
    };

    return availabilityMap[availability] || `Can join ${availability}`;
  };

  const toggleDetails = (applicationId) => {
    setExpandedDetails(prev => ({
      ...prev,
      [applicationId]: !prev[applicationId]
    }));
  };

  const handleCall = (applicant) => {
    if (applicant.user.phone) {
      window.location.href = `tel:${applicant.user.phone}`;
    }
  };

  const handleWhatsApp = (applicant) => {
    if (applicant.user.phone) {
      const phoneNumber = applicant.user.phone.replace(/\D/g, ''); // Remove non-digits
      const message = encodeURIComponent(`Hello ${applicant.user.fullName}, I'm calling regarding your job application.`);
      window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');
    }
  };

  const updateApplicationStatus = async (applicationId, newStatus, interviewData = null) => {
    try {
      const payload = { status: newStatus };
      if (interviewData) {
        payload.interviewDate = interviewData.date;
        payload.interviewTime = interviewData.time;
        payload.interviewMessage = interviewData.message;
      }

      const { data } = await api.put(
        `/recruiter/jobs/applications/${applicationId}/status`,
        payload
      );

      if (data.ok) {
        setApplicants(prev => prev.map(app =>
          app.applicationId === applicationId
            ? { ...app, status: newStatus, updatedAt: new Date().toISOString() }
            : app
        ));
        if (showInterviewModal) {
          setShowInterviewModal(null);
          setInterviewForm({ date: "", time: "", message: "" });
        }
        return true;
      }
      return false;
    } catch (err) {
      console.error("Error updating status:", err);
      alert(err.response?.data?.message || "Failed to update status. Please try again.");
      return false;
    }
  };

  const handleShortlist = async (applicationId) => {
    await updateApplicationStatus(applicationId, 'shortlisted');
  };

  const handleCallNowClick = (applicant) => {
    if (applicant.status === 'shortlisted') {
      // Show modal to mark as interview called
      setShowInterviewModal(applicant.applicationId);
    } else {
      // Just make the call
      handleCall(applicant);
    }
  };

  const handleMarkInterviewCalled = () => {
    if (!interviewForm.date || !interviewForm.time) {
      alert("Please fill in interview date and time");
      return;
    }

    updateApplicationStatus(showInterviewModal, 'interview_called', interviewForm);
  };

  const downloadResume = (resumePath, applicantName) => {
    if (resumePath) {
      const link = document.createElement('a');
      link.href = `/${resumePath}`;
      link.download = `${applicantName.replace(/\s+/g, '_')}_resume${resumePath.substring(resumePath.lastIndexOf('.'))}`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
  };

  if (loading) {
    return (
      <div className="animate-pulse space-y-4">
        <div className="h-8 bg-gray-200 rounded w-1/3 mb-4"></div>
        {[1, 2, 3].map((i) => (
          <div key={i} className="rounded-2xl bg-white border border-gray-200">
            <div className="py-4 px-6">
              <div className="h-4 bg-gray-200 rounded w-1/4 mb-2"></div>
              <div className="h-3 bg-gray-200 rounded w-1/3"></div>
            </div>
          </div>
        ))}
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="mb-6">
        <Link to="/job-posted" className="text-blue-600 hover:text-blue-800 mb-4 inline-block">
          â Back to Posted Jobs
        </Link>
        <div className="flex justify-between items-center">
          <div>
            <h1 className="text-2xl md:text-3xl font-bold text-gray-900">
              Applicants for {job?.title || 'Job'}
            </h1>
            {job && (
              <p className="text-gray-600 mt-2">
                {job.company} â¢ {job.location} â¢ {applicants.length} applicant{applicants.length !== 1 ? 's' : ''}
              </p>
            )}
          </div>
        </div>
      </div>

      {error && (
        <div className="rounded-md bg-red-50 p-4">
          <p className="text-red-700">{error}</p>
        </div>
      )}

      {/* Interview Modal */}
      {showInterviewModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 className="text-lg font-semibold mb-4">Mark Interview Called</h3>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  Interview Date *
                </label>
                <input
                  type="date"
                  value={interviewForm.date}
                  onChange={(e) => setInterviewForm({ ...interviewForm, date: e.target.value })}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  required
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  Interview Time *
                </label>
                <input
                  type="time"
                  value={interviewForm.time}
                  onChange={(e) => setInterviewForm({ ...interviewForm, time: e.target.value })}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  required
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">
                  Message/Instructions (Optional)
                </label>
                <textarea
                  value={interviewForm.message}
                  onChange={(e) => setInterviewForm({ ...interviewForm, message: e.target.value })}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                  rows="3"
                  placeholder="Add interview details or instructions..."
                />
              </div>
            </div>
            <div className="flex gap-3 mt-6">
              <button
                onClick={() => {
                  setShowInterviewModal(null);
                  setInterviewForm({ date: "", time: "", message: "" });
                }}
                className="flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
              >
                Cancel
              </button>
              <button
                onClick={handleMarkInterviewCalled}
                className="flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors"
              >
                Mark Interview Called
              </button>
            </div>
          </div>
        </div>
      )}

      {applicants.length === 0 ? (
        <div className="rounded-2xl text-center py-12 bg-white border border-gray-200">
          <div className="px-6">
            <div className="text-gray-500 mb-4">
              <svg className="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </div>
            <h3 className="text-lg font-semibold text-gray-900 mb-2">No applicants yet</h3>
            <p className="text-gray-600">No one has applied to this job yet.</p>
          </div>
        </div>
      ) : (
        <div className="space-y-4">
          {applicants.map((applicant) => {
            const statusInfo = getStatusInfo(applicant.status);
            const isExpanded = expandedDetails[applicant.applicationId];

            return (
              <div key={applicant.applicationId} className="rounded-2xl hover:shadow-md transition-shadow bg-white border border-gray-200">
                <div className="py-6 px-4 sm:px-6">
                  <div className="flex flex-col gap-4">
                    {/* Header Row: Avatar, Name, Status */}
                    <div className="flex items-start gap-4">
                      <div className="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0">
                        <span className="text-sm font-medium text-gray-600">
                          {applicant.user.fullName ? applicant.user.fullName.charAt(0).toUpperCase() : 'U'}
                        </span>
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-3 mb-2 flex-wrap">
                          <h3 className="font-semibold text-lg text-gray-900">
                            {applicant.user.fullName || 'Anonymous User'}
                          </h3>
                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusInfo.color}`}>
                            {statusInfo.label}
                          </span>
                        </div>

                        {/* Primary Info: Phone, Location, Availability, Experience */}
                        <div className="space-y-2 text-sm">
                          {applicant.user.phone && (
                            <div className="font-semibold text-gray-900">
                              Phone: {applicant.user.phone}
                            </div>
                          )}
                          <div className="flex flex-wrap items-center gap-4 text-gray-700">
                            {applicant.user.location && (
                              <div className="font-semibold">
                                Location: {applicant.user.location}
                              </div>
                            )}
                            {applicant.user.availability && (
                              <div className="text-green-600 font-medium">
                                {getAvailabilityText(applicant.user.availability)}
                              </div>
                            )}
                            {applicant.user.experienceYears && (
                              <div>
                                Experience: {applicant.user.experienceYears} years
                              </div>
                            )}
                          </div>
                        </div>

                        {/* More Details Toggle */}
                        <button
                          onClick={() => toggleDetails(applicant.applicationId)}
                          className="mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1"
                        >
                          {isExpanded ? (
                            <>
                              <span>Less details</span>
                              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 15l7-7 7 7" />
                              </svg>
                            </>
                          ) : (
                            <>
                              <span>More details</span>
                              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                              </svg>
                            </>
                          )}
                        </button>

                        {/* Expanded Details Section */}
                        {isExpanded && (
                          <div className="mt-4 pt-4 border-t border-gray-200 space-y-3">
                            {applicant.user.email && (
                              <div className="text-sm text-gray-700">
                                <strong>Email:</strong> {applicant.user.email}
                              </div>
                            )}
                            {applicant.user.highestEducation && (
                              <div className="text-sm text-gray-700">
                                <strong>Education:</strong> {applicant.user.highestEducation}
                              </div>
                            )}
                            {applicant.coverLetter && (
                              <div className="text-sm text-gray-700">
                                <strong>Cover Letter:</strong>
                                <p className="mt-1 bg-gray-50 p-3 rounded-lg">{applicant.coverLetter}</p>
                              </div>
                            )}
                            {applicant.user.linkedinUrl && (
                              <div>
                                <a
                                  href={applicant.user.linkedinUrl}
                                  target="_blank"
                                  rel="noopener noreferrer"
                                  className="text-blue-600 hover:text-blue-800 text-sm"
                                >
                                  LinkedIn Profile
                                </a>
                              </div>
                            )}
                            {applicant.resumePath && (
                              <button
                                onClick={() => downloadResume(applicant.resumePath, applicant.user.fullName || 'applicant')}
                                className="text-sm text-gray-600 hover:text-gray-800 underline"
                              >
                                Download Resume
                              </button>
                            )}
                          </div>
                        )}

                        <p className="text-xs text-gray-500 mt-3">
                          Applied on {formatDate(applicant.appliedAt)}
                        </p>
                      </div>
                    </div>

                    {/* Action Buttons Row */}
                    <div className="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
                      {/* Primary Actions: Call Now and WhatsApp */}
                      <div className="flex gap-3 flex-1">
                        {applicant.user.phone && (
                          <>
                            <button
                              onClick={() => handleCallNowClick(applicant)}
                              className="flex-1 sm:flex-none px-6 py-3 text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-sm"
                            >
                              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                              </svg>
                              Call Now
                            </button>
                            <button
                              onClick={() => handleWhatsApp(applicant)}
                              className="px-6 py-3 text-sm font-semibold text-white bg-[#25D366] hover:bg-[#20BA5A] rounded-lg transition-colors flex items-center justify-center gap-2 shadow-sm"
                            >
                              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z" />
                              </svg>
                              WhatsApp
                            </button>
                          </>
                        )}
                      </div>

                      {/* Secondary Actions: Shortlist */}
                      {applicant.status === 'applied' && (
                        <button
                          onClick={() => handleShortlist(applicant.applicationId)}
                          className="px-4 py-3 text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg transition-colors"
                        >
                          Shortlist
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      )}
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\recruiter\profile\recruiter-profile-form.jsx ===
import React, { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

/**
 * RecruiterProfileForm - Create/Edit recruiter profile
 * Handles both creation and update via PUT endpoint
 * Redirects to recruiter-profile after successful save
 */
export default function RecruiterProfileForm({ initialData = null, onSaved = null, onCancel = null }) {
  const [saving, setSaving] = useState(false);
  const [message, setMessage] = useState(null);
  const [termsAccepted, setTermsAccepted] = useState(false);

  const [form, setForm] = useState({
    company_name: "",
    company_website: "",
    company_type: "company",
    address_line1: "",
    address_line2: "",
    city: "",
    state: "",
    country: "",
    pincode: ""
  });

  // Prefill only from initialData
  useEffect(() => {
    if (initialData) {
      setForm(f => ({
        ...f,
        company_name: initialData.company_name ?? "",
        company_website: initialData.company_website ?? "",
        company_type: initialData.company_type ?? "company",
        address_line1: initialData.address_line1 ?? "",
        address_line2: initialData.address_line2 ?? "",
        city: initialData.city ?? "",
        state: initialData.state ?? "",
        country: initialData.country ?? "",
        pincode: initialData.pincode ?? ""
      }));
    }
  }, [initialData]);

  const handleChange = e => {
    const { name, value, type, checked } = e.target;
    setForm(f => ({
      ...f,
      [name]: type === "checkbox" ? (checked ? 1 : 0) : value
    }));
    setMessage(null);
  };

  const validate = () => {
    const errors = [];
    if (!form.company_name.trim()) errors.push("Company name is required.");
    if (!form.address_line1.trim()) errors.push("Address line 1 is required.");
    if (!form.city.trim()) errors.push("City is required.");
    if (form.pincode && !/^[0-9]{3,10}$/.test(form.pincode)) errors.push("Pincode must be 3-10 digits.");
    return errors;
  };

  const handleSubmit = async e => {
    e.preventDefault();
    setMessage(null);

    if (!termsAccepted) {
      setMessage({ type: "error", text: "Please confirm that all company details are accurate and accept the Terms & Conditions." });
      return;
    }

    const errors = validate();
    if (errors.length) {
      setMessage({ type: "error", text: errors.join(" ") });
      return;
    }

    setSaving(true);

    try {
      const res = await api.put("/recruiter-profile/recruiter", form);
      const payload = res.data || {};

      setMessage({ type: "success", text: payload.message || "Profile saved successfully." });

      // Call callback if provided
      if (typeof onSaved === "function") {
        onSaved(payload);
      }

      // Always redirect to recruiter-profile after successful save
      // Use window.location.href to force full page reload and ensure fresh data
      setTimeout(() => {
        window.location.href = "/recruiter-profile";
      }, 1500);
    } catch (err) {
      if (err.response) {
        const msg = err.response.data?.message || "Failed to save profile.";
        setMessage({ type: "error", text: msg });
      } else {
        setMessage({ type: "error", text: "Network error while saving." });
      }
    } finally {
      setSaving(false);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <div className="max-w-3xl mx-auto">
        <h2 className="text-2xl font-bold mb-2">Create Recruiter Profile</h2>
        <p className="text-sm text-gray-600 mb-6">
          Complete your company profile to start posting jobs and managing applications.
        </p>

        <form
          onSubmit={handleSubmit}
          className="bg-white rounded-xl shadow-md border border-gray-100 p-6"
        >
          {message && (
            <div
              className={`mb-4 px-4 py-2 rounded ${message.type === "success"
                ? "bg-green-50 border border-green-200 text-green-700"
                : "bg-red-50 border border-red-200 text-red-700"
                }`}
            >
              {message.text}
            </div>
          )}

          <div className="mb-4">
            <label className="block text-sm mb-2">Company Name *</label>
            <input
              name="company_name"
              value={form.company_name}
              onChange={handleChange}
              className="w-full px-4 py-3 rounded border"
            />
          </div>

          <div className="mb-4">
            <label className="block text-sm mb-2">Company Website</label>
            <input
              name="company_website"
              value={form.company_website}
              onChange={handleChange}
              className="w-full px-4 py-3 rounded border"
              placeholder="https://example.com"
            />
          </div>

          <div className="mb-4">
            <label className="block text-sm mb-2">Company Type</label>
            <select
              name="company_type"
              value={form.company_type}
              onChange={handleChange}
              className="w-full px-4 py-3 rounded border"
            >
              <option value="company">Company</option>
              <option value="consultancy">Consultancy</option>
              <option value="startup">Startup</option>
            </select>
          </div>

          <div className="mb-4">
            <label className="block text-sm mb-2">Address Line 1 *</label>
            <input
              name="address_line1"
              value={form.address_line1}
              onChange={handleChange}
              className="w-full px-4 py-3 rounded border"
            />
          </div>

          <div className="mb-4">
            <label className="block text-sm mb-2">Address Line 2</label>
            <input
              name="address_line2"
              value={form.address_line2}
              onChange={handleChange}
              className="w-full px-4 py-3 rounded border"
            />
          </div>

          <div className="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label className="block text-sm mb-2">City *</label>
              <input
                name="city"
                value={form.city}
                onChange={handleChange}
                className="w-full px-4 py-3 rounded border"
              />
            </div>

            <div>
              <label className="block text-sm mb-2">State</label>
              <input
                name="state"
                value={form.state}
                onChange={handleChange}
                className="w-full px-4 py-3 rounded border"
              />
            </div>
          </div>

          <div className="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label className="block text-sm mb-2">Country</label>
              <input
                name="country"
                value={form.country}
                onChange={handleChange}
                className="w-full px-4 py-3 rounded border"
              />
            </div>

            <div>
              <label className="block text-sm mb-2">Pincode</label>
              <input
                name="pincode"
                value={form.pincode}
                onChange={handleChange}
                className="w-full px-4 py-3 rounded border"
              />
            </div>
          </div>

          {/* Terms & Conditions Acceptance */}
          <div className="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
            <div className="flex items-start gap-2">
              <input
                type="checkbox"
                id="terms-checkbox-recruiter"
                checked={termsAccepted}
                onChange={(e) => setTermsAccepted(e.target.checked)}
                className="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                required
              />
              <label htmlFor="terms-checkbox-recruiter" className="text-sm text-gray-700 cursor-pointer">
                I confirm that all company details are accurate and I agree to HireSpark's{" "}
                <Link to="/terms" target="_blank" className="text-blue-600 hover:underline">
                  Terms & Conditions
                </Link>.
              </label>
            </div>
          </div>

          <div className="flex justify-end">
            <button
              type="button"
              onClick={() => (onCancel ? onCancel() : window.history.back())}
              className="px-4 py-2 border rounded mr-3"
            >
              Cancel
            </button>

            <button
              type="submit"
              disabled={saving || !termsAccepted}
              className={`px-6 py-2 rounded-full text-white ${saving || !termsAccepted ? "bg-gray-400 cursor-not-allowed" : "bg-blue-600 hover:brightness-95"
                }`}
            >
              {saving ? "Saving..." : "Save Profile"}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\modules\recruiter\profile\recruiter-profile.jsx ===
import React, { useEffect, useState } from "react";
import { Link } from "react-router-dom";
import api from "../../../components/apiconfig/apiconfig";

export default function RecruiterProfileView() {
  const [loading, setLoading] = useState(true);
  const [profile, setProfile] = useState(null);
  const [error, setError] = useState("");
  const [isEditing, setIsEditing] = useState(false);
  const [form, setForm] = useState({
    company_name: "",
    company_website: "",
    company_type: "",
    address_line1: "",
    address_line2: "",
    city: "",
    state: "",
    country: "",
    pincode: ""
  });

  useEffect(() => {
    let mounted = true;

    async function loadProfile() {
      try {
        const res = await api.get("/recruiter-profile/recruiter");
        if (!mounted) return;
        const profileData = res.data?.recruiter ?? null;
        setProfile(profileData);
        if (profileData) {
          setForm({
            company_name: profileData.company_name || "",
            company_website: profileData.company_website || "",
            company_type: profileData.company_type || "",
            address_line1: profileData.address_line1 || "",
            address_line2: profileData.address_line2 || "",
            city: profileData.city || "",
            state: profileData.state || "",
            country: profileData.country || "",
            pincode: profileData.pincode || ""
          });
        }
      } catch (err) {
        if (err.response) {
          if (err.response.status === 404) {
            setError("You don't have a recruiter profile yet.");
          } else if (err.response.status === 401) {
            setError("You must be logged in to view this page.");
          } else {
            console.error("Server error loading recruiter profile:", err.response.data || err);
            setError("Failed to load profile (server error).");
          }
        } else {
          console.error("Network error loading recruiter profile:", err);
          setError("Failed to load profile (network error).");
        }
      } finally {
        if (mounted) setLoading(false);
      }
    }

    loadProfile();
    return () => { mounted = false; };
  }, []);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setForm(prev => ({ ...prev, [name]: value }));
  };

  const handleSave = async (e) => {
    e.preventDefault();
    try {
      const res = await api.put("/recruiter-profile/recruiter", form);
      setProfile(res.data?.recruiter);
      setIsEditing(false);
    } catch (err) {
      console.error("Error saving profile:", err);
      setError("Failed to save profile. Please try again.");
    }
  };

  const handleCancel = () => {
    if (profile) {
      setForm({
        company_name: profile.company_name || "",
        company_website: profile.company_website || "",
        company_type: profile.company_type || "",
        address_line1: profile.address_line1 || "",
        address_line2: profile.address_line2 || "",
        city: profile.city || "",
        state: profile.state || "",
        country: profile.country || "",
        pincode: profile.pincode || ""
      });
    }
    setIsEditing(false);
  };

  if (loading) {
    return (
      <div className="space-y-4">
        <div className="animate-pulse">
          <div className="h-8 bg-gray-200 rounded w-1/4 mb-4"></div>
          <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <div className="lg:col-span-1">
              <div className="bg-gray-200 rounded-2xl h-64"></div>
            </div>
            <div className="lg:col-span-3">
              <div className="bg-gray-200 rounded-2xl h-96"></div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  if (error && !profile) {
    return (
      <div className="space-y-4">
        <div className="bg-red-50 border border-red-200 rounded-xl p-6 text-center">
          <div className="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg className="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 className="text-lg font-medium text-red-800 mb-2">Unable to load profile</h3>
          <p className="text-red-700 mb-4">{error}</p>
          <button
            onClick={() => setIsEditing(true)}
            className="inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"
          >
            Create Profile
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-2xl md:text-3xl font-bold text-gray-900">Recruiter Profile</h1>
          <p className="text-gray-600 mt-2">Manage your company information and recruitment details</p>
        </div>
        {!isEditing && profile && (
          <button
            onClick={() => setIsEditing(true)}
            className="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm"
          >
            <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
            Edit Profile
          </button>
        )}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
        {/* Sidebar - Company Overview */}
        <div className="lg:col-span-1">
          <div className="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 sticky top-8">
            {/* Company Badge */}
            <div className="text-center mb-6">
              <div className="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-2xl font-bold mx-auto mb-4">
                {form.company_name ? form.company_name.charAt(0).toUpperCase() : "C"}
              </div>
              <h2 className="font-bold text-lg text-gray-900 truncate">{form.company_name || "Your Company"}</h2>
              <p className="text-sm text-gray-600 mt-1">{form.company_type || "Company"}</p>

              {/* Verification Badge */}
              {profile && (
                <div className="mt-3">
                  {profile.verified === 1 ? (
                    <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                      <svg className="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                      </svg>
                      Verified
                    </span>
                  ) : (
                    <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                      <svg className="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      Pending Verification
                    </span>
                  )}
                </div>
              )}
            </div>

            {/* Quick Links */}
            {form.company_website && (
              <div className="border-t pt-4">
                <a
                  href={form.company_website.startsWith('http') ? form.company_website : `https://${form.company_website}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="flex items-center text-sm text-blue-600 hover:text-blue-700 font-medium"
                >
                  <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                  </svg>
                  Visit Website
                </a>
              </div>
            )}
          </div>
        </div>

        {/* Main Content */}
        <div className="lg:col-span-3">
          <div className="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden">
            {/* Card Header */}
            <div className="px-6 py-4 border-b border-gray-200 bg-gray-50">
              <h3 className="text-lg font-semibold text-gray-900">
                {isEditing ? "Edit Company Information" : "Company Information"}
              </h3>
              <p className="text-sm text-gray-600 mt-1">
                {isEditing ? "Update your business details below" : "Complete business details and verification status"}
              </p>
            </div>

            {/* Card Body */}
            <div className="p-6">
              {isEditing ? (
                <form onSubmit={handleSave} className="space-y-6">
                  {/* Company Details Section */}
                  <InfoSection title="Company Details" icon="business">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Company Name *
                        </label>
                        <input
                          name="company_name"
                          value={form.company_name}
                          onChange={handleChange}
                          required
                          placeholder="Enter company name"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Company Type
                        </label>
                        <input
                          name="company_type"
                          value={form.company_type}
                          onChange={handleChange}
                          placeholder="e.g., Technology, Healthcare"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div className="md:col-span-2">
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Company Website
                        </label>
                        <input
                          name="company_website"
                          value={form.company_website}
                          onChange={handleChange}
                          placeholder="https://yourcompany.com"
                          type="url"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                    </div>
                  </InfoSection>

                  {/* Address Section */}
                  <InfoSection title="Company Address" icon="location">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div className="md:col-span-2">
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Address Line 1
                        </label>
                        <input
                          name="address_line1"
                          value={form.address_line1}
                          onChange={handleChange}
                          placeholder="Street address, P.O. box"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div className="md:col-span-2">
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Address Line 2
                        </label>
                        <input
                          name="address_line2"
                          value={form.address_line2}
                          onChange={handleChange}
                          placeholder="Apartment, suite, unit, building, floor, etc."
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          City
                        </label>
                        <input
                          name="city"
                          value={form.city}
                          onChange={handleChange}
                          placeholder="City"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          State
                        </label>
                        <input
                          name="state"
                          value={form.state}
                          onChange={handleChange}
                          placeholder="State / Province"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Country
                        </label>
                        <input
                          name="country"
                          value={form.country}
                          onChange={handleChange}
                          placeholder="Country"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Pincode
                        </label>
                        <input
                          name="pincode"
                          value={form.pincode}
                          onChange={handleChange}
                          placeholder="Postal code"
                          className="w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-colors outline-none"
                        />
                      </div>
                    </div>
                  </InfoSection>

                  {/* Action Buttons */}
                  <div className="flex items-center justify-end gap-3 pt-6 border-t border-gray-200">
                    <button
                      type="button"
                      onClick={handleCancel}
                      className="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center"
                    >
                      <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Save Changes
                    </button>
                  </div>
                </form>
              ) : (
                <div className="space-y-6">
                  {/* Company Details Section */}
                  <InfoSection title="Company Details" icon="business">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <InfoItem
                        label="Company Name"
                        value={profile?.company_name}
                        icon="building"
                      />
                      <InfoItem
                        label="Company Type"
                        value={profile?.company_type}
                        icon="category"
                      />
                      <InfoItem
                        label="Website"
                        value={profile?.company_website}
                        icon="link"
                        isLink={true}
                      />
                      <InfoItem
                        label="Verification Status"
                        value={profile?.verified === 1 ? "Verified" : "Pending Verification"}
                        icon="verified"
                        status={profile?.verified === 1 ? "success" : "warning"}
                      />
                    </div>
                  </InfoSection>

                  {/* Address Section */}
                  <InfoSection title="Company Address" icon="location">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <InfoItem
                        label="Address Line 1"
                        value={profile?.address_line1}
                        icon="location"
                      />
                      <InfoItem
                        label="Address Line 2"
                        value={profile?.address_line2}
                        icon="location"
                      />
                      <InfoItem
                        label="City"
                        value={profile?.city}
                        icon="city"
                      />
                      <InfoItem
                        label="State"
                        value={profile?.state}
                        icon="region"
                      />
                      <InfoItem
                        label="Country"
                        value={profile?.country}
                        icon="country"
                      />
                      <InfoItem
                        label="Pincode"
                        value={profile?.pincode}
                        icon="pin"
                      />
                    </div>
                  </InfoSection>

                  {/* Verification & Metadata Section */}
                  {profile && (
                    <InfoSection title="Profile Information" icon="info">
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <InfoItem
                          label="Verification Notes"
                          value={profile.verification_notes || "No notes provided"}
                          icon="notes"
                        />
                        <InfoItem
                          label="Profile Created"
                          value={profile.created_at ? new Date(profile.created_at).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                          }) : "â"}
                          icon="calendar"
                        />
                        <InfoItem
                          label="Last Updated"
                          value={profile.updated_at ? new Date(profile.updated_at).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                          }) : "â"}
                          icon="update"
                        />
                      </div>
                    </InfoSection>
                  )}
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

// Info Section Component (keep as is)
function InfoSection({ title, icon, children }) {
  const getIcon = (iconName) => {
    const icons = {
      business: "M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",
      location: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",
      info: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
    };
    return icons[icon] || icons.info;
  };

  return (
    <div className="bg-gray-50 rounded-xl p-6">
      <div className="flex items-center mb-4">
        <svg className="w-5 h-5 text-gray-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={getIcon(icon)} />
        </svg>
        <h4 className="text-lg font-semibold text-gray-900">{title}</h4>
      </div>
      {children}
    </div>
  );
}

// Info Item Component (keep as is)
function InfoItem({ label, value, icon, isLink = false, status }) {
  const getIcon = (iconName) => {
    const icons = {
      building: "M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",
      category: "M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",
      link: "M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1",
      verified: "M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",
      location: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",
      city: "M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",
      region: "M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z",
      country: "M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z",
      pin: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",
      notes: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",
      calendar: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",
      update: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
    };
    return icons[icon] || icons.info;
  };

  const getStatusColor = (status) => {
    const colors = {
      success: "text-green-600 bg-green-100",
      warning: "text-yellow-600 bg-yellow-100",
      error: "text-red-600 bg-red-100"
    };
    return colors[status] || "text-gray-600 bg-gray-100";
  };

  return (
    <div>
      <dt className="flex items-center text-sm font-medium text-gray-600 mb-2">
        <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={getIcon(icon)} />
        </svg>
        {label}
      </dt>
      <dd className="ml-6">
        {isLink && value && value !== "Not provided" ? (
          <a
            href={value.startsWith('http') ? value : `https://${value}`}
            target="_blank"
            rel="noopener noreferrer"
            className="text-blue-600 hover:text-blue-700 font-medium text-sm truncate block"
          >
            {value}
          </a>
        ) : status ? (
          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(status)}`}>
            {value}
          </span>
        ) : (
          <span className="text-gray-900 font-medium text-sm">{value || "Not provided"}</span>
        )}
      </dd>
    </div>
  );
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\protected\GuestOnlyRoute.jsx ===
import { Navigate } from "react-router-dom";
import { useState, useEffect } from "react";
import api from "../components/apiconfig/apiconfig";

/**
 * GuestOnlyRoute - Only allows access to guests (non-authenticated users)
 * If a user is logged in (admin, recruiter, or candidate), redirects them to their dashboard
 */
export default function GuestOnlyRoute({ children }) {
  const [loading, setLoading] = useState(true);
  const [user, setUser] = useState(null);

  useEffect(() => {
    let alive = true;
    (async () => {
      try {
        const { data } = await api.get("/auth/session");
        if (alive) setUser(data?.user || null);
      } catch (e) {
        if (alive) setUser(null);
      } finally {
        if (alive) setLoading(false);
      }
    })();
    return () => {
      alive = false;
    };
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  // If user is logged in, redirect to their appropriate dashboard
  if (user) {
    const role = user?.role;

    if (role === "admin") {
      return <Navigate to="/admin" replace />;
    } else if (role === "recruiter") {
      return <Navigate to="/recruiter-dashboard" replace />;
    } else if (role === "candidate") {
      return <Navigate to="/dashboard" replace />;
    }
  }

  // User is not logged in â Show guest content
  return children;
}







--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\protected\ProtectedRecruiterRoute.jsx ===
import { Navigate } from "react-router-dom";
import { useRecruiterProfile } from "../hooks/useRecruiterProfile";

/**
 * Protected route that checks if recruiter profile is complete
 * Redirects to profile form if incomplete
 */
export default function ProtectedRecruiterRoute({ children }) {
  const { loading, isComplete } = useRecruiterProfile();

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  if (!isComplete) {
    return <Navigate to="/recruiter-profile-form" replace />;
  }

  return children;
}


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\protected\ProtectedRoute.jsx ===
import { Navigate, useLocation } from "react-router-dom";
import { useState, useEffect } from "react";
import api from "../components/apiconfig/apiconfig";

export default function ProtectedRoute({ children, roles }) {
  const [loading, setLoading] = useState(true);
  const [user, setUser] = useState(null);
  const location = useLocation();

  useEffect(() => {
    let alive = true;
    (async () => {
      try {
        const { data } = await api.get("/auth/session");
        if (alive) setUser(data?.user || null);
      } catch (e) {
        if (alive) setUser(null);
      } finally {
        if (alive) setLoading(false);
      }
    })();
    return () => {
      alive = false;
    };
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      </div>
    );
  }

  // If user is not logged in, redirect to login
  if (!user) {
    // For admin routes, redirect to admin signin
    if (location.pathname.startsWith('/admin')) {
      return <Navigate to="/admin/signin" replace state={{ from: location }} />;
    }
    return <Navigate to="/sign-in" replace state={{ from: location }} />;
  }

  const role = user?.role;

  // Check if user has required role
  // Only three roles in system: candidate, recruiter, admin
  const hasAccess = roles?.length === 0 || (roles && roles.includes(role)) || false;

  if (roles && roles.length > 0 && !hasAccess) {
    // If user tries to access wrong role's pages, redirect them to appropriate page
    if (role === "admin") {
      return <Navigate to="/admin" replace />;
    } else if (role === "recruiter") {
      return <Navigate to="/create-job" replace />;
    } else {
      return <Navigate to="/home" replace />;
    }
  }

  // Authenticated + allowed role â Show protected content
  return children;
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\src\routes\router.jsx ===
import React from "react";
import { createBrowserRouter, Navigate } from "react-router-dom";
import ProtectedRoute from "../protected/ProtectedRoute.jsx";
import ProtectedRecruiterRoute from "../protected/ProtectedRecruiterRoute.jsx";
import GuestOnlyRoute from "../protected/GuestOnlyRoute.jsx";

// Import Layouts
import GuestLayout from "../components/layout/guest-layout/GuestLayout.jsx";
import CandidateLayout from "../components/layout/candidate-layout/CandidateLayout.jsx";
import RecruiterLayout from "../components/layout/recruiter-layout/RecruiterLayout.jsx";
import AdminLayout from "../components/layout/admin-layout/AdminLayout.jsx";

// Import Public/Guest Components (renamed)
import Home from "../modules/guest/Home.jsx";
import Companies from "../modules/guest/companies/companies.jsx";
import CareerGuide from "../modules/guest/guide/career-guide.jsx";
import Jobs from "../modules/guest/jobs/job-list.jsx";
import JobDetail from "../modules/guest/jobs/job-list-details.jsx";
import Profile from "../components/profile/profile.jsx";
import TermsAndConditions from "../modules/guest/legal/TermsAndConditions.jsx";
import PrivacyPolicy from "../modules/guest/legal/PrivacyPolicy.jsx";
import RefundCancellation from "../modules/guest/legal/RefundCancellation.jsx";

// Import Auth Components (Candidate/Recruiter - Google Login Only)
import SignIn from "../modules/auth/candidate-recruiter/SignIn.jsx";
import SignUp from "../modules/auth/candidate-recruiter/SignUp.jsx";
import Forgot from "../modules/auth/candidate-recruiter/Forgot.jsx";
import SignInModal from "../modules/auth/candidate-recruiter/SignInModal.jsx";

// Import Candidate Dashboard Components (renamed paths)
import UserProfile from "../modules/candidate/dashboard/profile.jsx";
import Saved from "../modules/candidate/jobs/saved-list.jsx";
import Applied from "../modules/candidate/jobs/applied-list.jsx";

// Import Recruiter Components
import RecruiterDashboard from "../modules/recruiter/home/home.jsx";
import RecruiterPostJob from "../modules/recruiter/jobs/job-post.jsx";
import JobPosted from "../modules/recruiter/jobs/job-posted.jsx";
import JobApplicants from "../modules/recruiter/jobs/Job-response-list.jsx";
import RecruiterProfile from "../modules/recruiter/profile/recruiter-profile.jsx";
import RecruiterProfileForm from "../modules/recruiter/profile/recruiter-profile-form.jsx";

// Import Admin Auth Components (Username/Password Login)
import AdminSignIn from "../modules/auth/admin/SignIn.jsx";
import AdminSignUp from "../modules/auth/admin/SignUp.jsx";
import AdminDashboard from "../modules/admin/dashboard/dashboard.jsx";
import AdminUsers from "../modules/admin/candidate/candidate-list.jsx";
import AdminRecruiters from "../modules/admin/recruiter/recruiters-list.jsx";
import AdminJobs from "../modules/admin/jobs/jobs-list.jsx";
import PendingRecruiters from "../modules/admin/recruiter/pending-recruiters.jsx";
import VerifiedRecruiters from "../modules/admin/recruiter/verified-recruiters.jsx";
import PendingJobs from "../modules/admin/approval-management/pending-jobs-list.jsx";
import ApprovedJobs from "../modules/admin/approval-management/approval-job-list.jsx";
import ClosedJobs from "../modules/admin/approval-management/closed-jobs-list.jsx";
import RejectedJobs from "../modules/admin/approval-management/rejected-jobs.jsx";

// Define application routes
const router = createBrowserRouter([
  // ================= GUEST/PUBLIC ROUTES (Navbar + Footer) =================
  {
    path: "/",
    element: <GuestLayout />,
    children: [
      { index: true, element: <Navigate to="/home" replace /> },

      // Public pages (accessible without login)
      {
        path: "home",
        element: (
          <GuestOnlyRoute>
            <Home />
          </GuestOnlyRoute>
        )
      },
      { path: "companies", element: <Companies /> },
      { path: "career-guide", element: <CareerGuide /> },
      { path: "jobs", element: <Jobs /> },
      { path: "jobs/:id", element: <JobDetail /> },
      { path: "terms", element: <TermsAndConditions /> },
      { path: "privacy", element: <PrivacyPolicy /> },
      { path: "refund", element: <RefundCancellation /> },

      // Auth pages (accessible without login) - No footer on these
      { path: "sign-in", element: <SignIn /> },
      { path: "sign-up", element: <SignUp /> },
      { path: "forgot", element: <Forgot /> },
      { path: "sign-in-modal", element: <SignInModal /> },

      // Admin Auth pages (accessible without login)
      { path: "admin/signin", element: <AdminSignIn /> },
      { path: "admin/signup", element: <AdminSignUp /> },

      // Profile - Public
      { path: "profile", element: <Profile /> },

      { path: "*", element: <Navigate to="/home" replace /> },
    ],
  },

  // ================= CANDIDATE/USER ROUTES WITH SIDEBAR =================
  {
    path: "/",
    element: (
      <ProtectedRoute roles={["candidate"]}>
        <CandidateLayout />
      </ProtectedRoute>
    ),
    children: [
      {
        path: "dashboard",
        element: <Jobs />,
      },
      {
        path: "dashboard/profile",
        element: <UserProfile />,
      },
      {
        path: "dashboard/saved",
        element: <Saved />,
      },
      {
        path: "dashboard/applied",
        element: <Applied />,
      },
    ],
  },

  // ================= RECRUITER ROUTES WITH SIDEBAR =================
  {
    path: "/",
    element: (
      <ProtectedRoute roles={["recruiter"]}>
        <RecruiterLayout />
      </ProtectedRoute>
    ),
    children: [
      {
        path: "recruiter-dashboard",
        element: <RecruiterDashboard />,
      },
      {
        path: "recruiter-profile",
        element: <RecruiterProfile />,
      },
      {
        path: "recruiter-profile-form",
        element: <RecruiterProfileForm />,
      },
      {
        path: "create-job",
        element: (
          <ProtectedRecruiterRoute>
            <RecruiterPostJob />
          </ProtectedRecruiterRoute>
        ),
      },
      {
        path: "job-posted",
        element: (
          <ProtectedRecruiterRoute>
            <JobPosted />
          </ProtectedRecruiterRoute>
        ),
      },
      {
        path: "recruiter/jobs/:jobId/applicants",
        element: <JobApplicants />,
      },
    ],
  },

  // ================= ADMIN ROUTES WITH SIDEBAR =================
  {
    path: "admin",
    element: (
      <ProtectedRoute roles={["admin"]}>
        <AdminLayout />
      </ProtectedRoute>
    ),
    children: [
      { index: true, element: <AdminDashboard /> },
      { path: "users", element: <AdminUsers /> },
      { path: "recruiters", element: <AdminRecruiters /> },
      { path: "jobs", element: <AdminJobs /> },
      { path: "pending-recruiters", element: <PendingRecruiters /> },
      { path: "verified-recruiters", element: <VerifiedRecruiters /> },
      { path: "pending-jobs", element: <PendingJobs /> },
      { path: "approved-jobs", element: <ApprovedJobs /> },
      { path: "closed-jobs", element: <ClosedJobs /> },
      { path: "rejected-jobs", element: <RejectedJobs /> },
    ],
  },
]);

export default router;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\tailwind.config.js ===
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          DEFAULT: '#1769E0',
          light: '#2E8CFF',
          dark: '#0D4A9E',
          50: '#E8F1FF',
          100: '#D1E3FF',
          200: '#A3C7FF',
          300: '#75ABFF',
          400: '#478FFF',
          500: '#1769E0',
          600: '#1254B3',
          700: '#0D3F86',
          800: '#082A5A',
          900: '#04152D',
        },
        chip: {
          bg: '#E8F1FF',
        },
        bg: '#F5F7FA',
        text: {
          dark: '#111111',
          muted: '#555555',
          light: '#888888',
        },
        border: '#E5E7EB',
        highlight: '#F7C948',
        success: {
          DEFAULT: '#10B981',
          light: '#D1FAE5',
          dark: '#059669',
        },
        error: {
          DEFAULT: '#EF4444',
          light: '#FEE2E2',
          dark: '#DC2626',
        },
        warning: {
          DEFAULT: '#F59E0B',
          light: '#FEF3C7',
          dark: '#D97706',
        },
      },
      fontFamily: {
        sans: ['Inter', 'Poppins', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'sans-serif'],
      },
      fontSize: {
        'xs': ['0.75rem', { lineHeight: '1.5', letterSpacing: '0.01em' }],
        'sm': ['0.875rem', { lineHeight: '1.5', letterSpacing: '0.01em' }],
        'base': ['1rem', { lineHeight: '1.6', letterSpacing: '0' }],
        'lg': ['1.125rem', { lineHeight: '1.6', letterSpacing: '-0.01em' }],
        'xl': ['1.25rem', { lineHeight: '1.5', letterSpacing: '-0.01em' }],
        '2xl': ['1.5rem', { lineHeight: '1.4', letterSpacing: '-0.02em' }],
        '3xl': ['1.875rem', { lineHeight: '1.3', letterSpacing: '-0.02em' }],
        '4xl': ['2.25rem', { lineHeight: '1.2', letterSpacing: '-0.03em' }],
        '5xl': ['3rem', { lineHeight: '1.1', letterSpacing: '-0.03em' }],
      },
      spacing: {
        '18': '4.5rem',
        '22': '5.5rem',
        '88': '22rem',
        '128': '32rem',
      },
      borderRadius: {
        'card': '12px',
        'button': '10px',
        'chip': '20px',
        'input': '10px',
        'lg': '16px',
        'xl': '20px',
        '2xl': '24px',
      },
      boxShadow: {
        'soft': '0 2px 8px rgba(0, 0, 0, 0.08)',
        'medium': '0 4px 12px rgba(0, 0, 0, 0.1)',
        'large': '0 8px 24px rgba(0, 0, 0, 0.12)',
        'inner-soft': 'inset 0 2px 4px rgba(0, 0, 0, 0.06)',
      },
      screens: {
        'xs': '475px',
      },
    },
  },
  plugins: [],
}
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\client\vite.config.js ===
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
})

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\server.js ===
require('dotenv').config();
const express = require('express');
const cors = require('cors');
const cookieParser = require('cookie-parser');
const path = require('path');

const app = express();

// Middlewares
app.use(cors({
  origin: [
    process.env.CLIENT_ORIGIN,
    'http://localhost:3000', 
    'http://localhost:5173',
  ].filter(Boolean),
  credentials: true
}));

app.use(cookieParser());
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true }));

// Serve static files from uploads directory
const uploadsPath = path.join(__dirname, 'src', 'api', 'uploads');
app.use('/uploads', express.static(uploadsPath));

// Health check
app.get('/api/health', (req, res) => {
  res.json({ 
    status: 'OK', 
    environment: process.env.NODE_ENV || 'development' 
  });
});

// API Routes
const routes = require('./src/routes/routes');
app.use('/api', routes);

// API 404 handler
app.use((req, res) => {
  if (req.path?.startsWith('/api/')) {
    res.status(404).json({ 
      success: false,
      error: 'Endpoint not found'
    });
  }
});

// Error handler
app.use((err, req, res, next) => {
  console.error('Server Error:', err.message);
  
  res.status(500).json({ 
    success: false,
    error: 'Internal server error'
  });
});

// Start server
const PORT = process.env.PORT || 5000;
app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});

module.exports = app;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\auth\google-auth.js ===
const { OAuth2Client } = require('google-auth-library');
const jwt = require('jsonwebtoken');
const pool = require('../config/db');

/**
 * signToken(payload)
 * -------------------
 * Helper function to generate a JSON Web Token.
 */
function signToken(payload) {
  const secret = process.env.JWT_SECRET;
  const expiresIn = process.env.JWT_EXPIRES_IN || '7d';
  return jwt.sign(payload, secret, { expiresIn });
}

/**
 * POST /api/auth/google
 * ---------------------
 * Steps:
 * 1. Verify Google ID token from client.
 * 2. Extract user info (email, name, google_id).
 * 3. Check if user exists by email or google_id.
 * 4. If exists: update last_login and google_id if needed, then login.
 * 5. If not exists: create new user with role from request body.
 * 6. Generate JWT token and set cookie.
 * 7. Return user details.
 */
async function googleAuth(req, res) {
  try {
    const { credential, role } = req.body || {};

    if (!credential) {
      return res.status(400).json({ message: 'Google credential token is required' });
    }

    // Validate role (default to 'candidate' if not provided or invalid)
    // Store 'recruiter' for recruiters, 'candidate' for candidates
    const userRole = (role === 'recruiter' ? 'recruiter' : 'candidate');

    // Initialize Google OAuth client
    const client = new OAuth2Client(process.env.GOOGLE_CLIENT_ID);

    // Verify the Google ID token
    let ticket;
    try {
      ticket = await client.verifyIdToken({
        idToken: credential,
        audience: process.env.GOOGLE_CLIENT_ID,
      });
    } catch (err) {
      console.error('Google token verification error:', err);
      return res.status(401).json({ message: 'Invalid Google token' });
    }

    const payload = ticket.getPayload();
    const { email, name, sub: googleId } = payload;

    if (!email) {
      return res.status(400).json({ message: 'Email not provided by Google' });
    }

    // Get DB connection
    const conn = await pool.getConnection();
    try {
      // Check if user exists by email or google_id
      const [existing] = await conn.execute(
        'SELECT id, email, name, role, google_id, auth_provider FROM users WHERE email = ? OR google_id = ? LIMIT 1',
        [email, googleId]
      );

      let user;

      if (existing.length) {
        console.log('User exists - updating last_login and google_id/auth_provider if needed');
        // User exists - update last_login and google_id/auth_provider if needed
        const existingUser = existing[0];
        const updates = [];
        const values = [];

        // Set role if missing (ensures role is stored in DB for legacy rows)
        if (!existingUser.role) {
          updates.push('role = ?');
          values.push(userRole);
        }

        // Update google_id if not set
        if (!existingUser.google_id) {
          updates.push('google_id = ?');
          values.push(googleId);
        }

        // Update auth_provider if not set
        if (!existingUser.auth_provider || existingUser.auth_provider !== 'google') {
          updates.push('auth_provider = ?');
          values.push('google');
        }

        // Update name if changed
        if (name && existingUser.name !== name) {
          updates.push('name = ?');
          values.push(name);
        }

        // Always update last_login
        updates.push('last_login = NOW()');
        values.push(existingUser.id);

        if (updates.length > 1) {
          // More than just last_login
          await conn.execute(
            `UPDATE users SET ${updates.join(', ')} WHERE id = ?`,
            values
          );
        } else {
          // Only last_login
          await conn.execute(
            'UPDATE users SET last_login = NOW() WHERE id = ?',
            [existingUser.id]
          );
        }

        // Fetch updated user
        const [updated] = await conn.execute(
          'SELECT id, email, name, role FROM users WHERE id = ?',
          [existingUser.id]
        );
        // Ensure role fallback if still null in DB
        user = { ...updated[0], role: updated[0].role || userRole };
      } else {
        console.log('New user - creating account with role:', userRole);
        // New user - create account with role from frontend (userRole)
        const randomPassword = require('crypto').randomBytes(32).toString('hex');
        const passwordHash = await require('bcryptjs').hash(randomPassword, 10);

        const [result] = await conn.execute(
          'INSERT INTO users (email, name, password_hash, role, google_id, auth_provider, last_login) VALUES (?, ?, ?, ?, ?, ?, NOW())',
          [email, name || email.split('@')[0], passwordHash, userRole, googleId, 'google']
        );

        user = {
          id: result.insertId,
          email,
          name: name || email.split('@')[0],
          role: userRole,
        };
      }

      // Generate JWT token
      const token = signToken({
        sub: user.id,
        email: user.email,
        role: user.role,
      });

      // Set secure HttpOnly cookie
      const isProd = process.env.NODE_ENV === 'production';
      res.cookie('token', token, {
        httpOnly: true,
        secure: isProd,
        sameSite: isProd ? 'none' : 'lax',
        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days
      });

      return res.json({
        user,
        token,
        message: 'Google authentication successful',
      });
    } finally {
      conn.release();
    }
  } catch (err) {
    console.error('Google auth error:', err);
    return res.status(500).json({ message: 'Internal server error' });
  }
}

module.exports = googleAuth;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\auth\logout.js ===
async function  logout(req, res) {
  try {
    const isProd = process.env.NODE_ENV === 'production';
    // Clear cookie by using clearCookie with same options used when setting it
    res.clearCookie('token', {
      httpOnly: true,
      secure: isProd,
      sameSite: isProd ? 'none' : 'lax',
      path: '/',
    });

    return res.json({ message: 'Logged out' });
  } catch (err) {
    console.error('Logout error', err);
    return res.status(500).json({ message: 'Internal server error' });
  }
};
module.exports = logout;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\auth\sign-in.js ===
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const pool = require('../config/db');

/**
 * signToken(payload)
 * -------------------
 * Helper function to generate a JSON Web Token.
 * - payload: data stored inside the token (user ID, username, role).
 * - expiresIn: defaults to 7 days if not provided.
 */
function signToken(payload) {
  const secret = process.env.JWT_SECRET;
  const expiresIn = process.env.JWT_EXPIRES_IN || '7d';
  return jwt.sign(payload, secret, { expiresIn });
}

/**
 * POST /api/auth/login
 * ---------------------
 * Steps:
 * 1. Validate body input.
 * 2. Fetch user by email.
 * 3. Compare input password with stored password hash.
 * 4. Update last_login timestamp.
 * 5. Generate JWT token.
 * 6. Set authentication cookie.
 * 7. Return logged-in user details.
 */
async function signIn(req, res) {
  try {
    const { identifier, password } = req.body || {};

    // identifier is email (username removed from schema)
    if (!identifier || !password) {
      return res.status(400).json({ message: 'email and password are required' });
    }

    // Get DB connection from pool
    const conn = await pool.getConnection();
    try {
      /**
       * Step 1: Look up user by email
       * ------------------------------
       * Email is the identifier now (username removed).
       */
      const [rows] = await conn.execute(
        'SELECT id, name, email, role, password_hash FROM users WHERE email = ? LIMIT 1',
        [identifier]
      );

      // User not found
      if (!rows.length) {
        return res.status(401).json({ message: 'Invalid credentials' });
      }

      const userRow = rows[0];

      /**
       * Step 2: Compare input password with stored hash
       * ------------------------------------------------
       * bcrypt.compare() returns true if passwords match.
       */
      const valid = await bcrypt.compare(password, userRow.password_hash);
      if (!valid) {
        return res.status(401).json({ message: 'Invalid credentials' });
      }

      /**
       * Step 3: Update last_login timestamp
       */
      await conn.execute(
        'UPDATE users SET last_login = NOW() WHERE id = ?',
        [userRow.id]
      );

      /**
       * Step 4: Prepare safe user object (never send password_hash)
       */
      const user = {
        id: userRow.id,
        name: userRow.name,
        email: userRow.email,
        role: userRow.role,
      };

      /**
       * Step 5: Generate JWT token
       * ---------------------------
       * Payload includes:
       *  - sub (ID)
       *  - email
       *  - role
       */
      const token = signToken({
        sub: user.id,
        email: user.email,
        role: user.role,
      });

      /**
       * Step 5: Set secure HttpOnly cookie
       * ----------------------------------
       * - httpOnly: JS cannot read it (protects against XSS)
       * - secure: only works over HTTPS in production
       * - sameSite:
       *     - "none" for cross-site cookies in production
       *     - "lax" for local development
       */
      const isProd = process.env.NODE_ENV === 'production';
      res.cookie('token', token, {
        httpOnly: true,
        secure: isProd,
        sameSite: isProd ? 'none' : 'lax',
        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days
      });

      return res.json({
        user,
        token,
        message: 'Login successful',
      });

    } finally {
      // Always release DB connection
      conn.release();
    }

  } catch (err) {
    console.error('Login error', err);
    return res.status(500).json({ message: 'Internal server error' });
  }
}

module.exports = signIn;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\auth\sign-up.js ===
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const pool = require('../config/db');

/**
 * signToken(payload)
 * -------------------
 * Utility function to generate a signed JSON Web Token.
 *
 * - payload: Data we store in the token (sub, username, role).
 * - secret: Loaded from environment variable JWT_SECRET.
 * - expiresIn: Token expiry (default 7 days).
 */
function signToken(payload) {
  const secret = process.env.JWT_SECRET;
  const expiresIn = process.env.JWT_EXPIRES_IN || '7d';
  return jwt.sign(payload, secret, { expiresIn });
}

/**
 * POST /api/auth/signup
 * ----------------------
 * Steps:
 * 1. Validate required input fields.
 * 2. Enforce role safety (only "candidate" | "recruiter" | "admin").
 * 3. Get DB connection from pool.
 * 4. Check if user already exists (email OR username).
 * 5. Hash the password using bcrypt.
 * 6. Insert new user into database.
 * 7. Generate JWT token for authentication.
 * 8. Set HttpOnly cookie containing the token.
 * 9. Return newly created user.
 */
async function signUp(req, res) {
  try {
    // Extract fields from request body
    const { name, email, password, role: inputRole } = req.body || {};

    // Basic input validation
    if (!name || !email || !password) {
      return res.status(400).json({ message: 'name, email and password are required' });
    }

    // Normalize and validate role.
    // Database enum allows: "candidate" | "recruiter" | "admin"
    // - recruiter/admin are preserved
    // - anything else (including "user" or missing) becomes "candidate"
    let role = 'candidate';
    if (inputRole === 'recruiter' || inputRole === 'admin') {
      role = inputRole;
    }

    // Get a DB connection from the pool
    const conn = await pool.getConnection();
    try {
      /**
       * Step 1: Check if user already exists
       * -------------------------------------
       * Check by email only (username removed from schema)
       */
      const [existing] = await conn.execute(
        'SELECT id FROM users WHERE email = ? LIMIT 1',
        [email]
      );

      if (existing.length) {
        return res.status(409).json({ message: 'User already exists' });
      }

      /**
       * Step 2: Hash password
       * ----------------------
       * bcrypt.hash(password, 10)
       *  - 10 rounds of salting (standard strength)
       */
      const passwordHash = await bcrypt.hash(password, 10);

      /**
       * Step 3: Insert new user
       * ------------------------
       * Store hashed password, not plain text.
       * Using 'password_hash' column name as per schema.
       */
      const [result] = await conn.execute(
        'INSERT INTO users (name, email, password_hash, role, auth_provider) VALUES (?, ?, ?, ?, ?)',
        [name, email, passwordHash, role, 'local']
      );

      // Build user object for frontend response
      const user = { id: result.insertId, name, email, role };

      /**
       * Step 4: Generate token
       * ------------------------
       * Token contains:
       *  - sub: user ID
       *  - email
       *  - role
       */
      const token = signToken({
        sub: user.id,
        email: user.email,
        role: user.role,
      });

      /**
       * Step 5: Set cookie
       * -------------------
       * Secure cookie settings:
       *  - httpOnly: cannot be accessed via JS (prevents XSS)
       *  - secure: only HTTPS in production
       *  - sameSite:
       *      "none" for cross-site cookies in production
       *      "lax" for local dev
       */
      const isProd = process.env.NODE_ENV === 'production';
      res.cookie('token', token, {
        httpOnly: true,
        secure: isProd,
        sameSite: isProd ? 'none' : 'lax',
        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days
      });

      // Final response
      return res.status(201).json({
        user,
        token,
        message: 'Signup successful',
      });
    } finally {
      // Always release connection back to pool
      conn.release();
    }
  } catch (err) {
    console.error('Signup error', err);
    return res.status(500).json({ message: 'Internal server error' });
  }
}

module.exports = signUp;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\auth\update.js ===
const pool = require('../config/db');

async function updateProfile(req, res) {
  try {
    const userId = req.user && req.user.id;
    if (!userId) return res.status(401).json({ message: 'Unauthorized' });

    const allowed = ['username', 'email', 'name'];
    const payload = req.body || {};
    const requested = Object.keys(payload).filter(k => allowed.includes(k));
    if (!requested.length) return res.status(400).json({ message: 'No valid fields to update' });

    const conn = await pool.getConnection();
    try {
      // Get actual columns present in users table
      const [cols] = await conn.query('SHOW COLUMNS FROM users');
      const colNames = cols.map(c => c.Field);

      // Only update fields that actually exist
      const toUpdate = requested.filter(f => colNames.includes(f));
      if (!toUpdate.length) return res.status(400).json({ message: 'No updatable fields available' });

      const setParts = toUpdate.map(f => `${f} = ?`).join(', ');
      const values = toUpdate.map(f => payload[f]);
      values.push(userId);

      const sql = `UPDATE users SET ${setParts} WHERE id = ?`;
      await conn.execute(sql, values);

      // Build select list to return updated user
      const base = ['id','username','email','role'];
      const optional = ['name','created_at','last_login'].filter(c => colNames.includes(c));
      const selectCols = base.concat(optional).join(', ');
      const [rows] = await conn.execute(`SELECT ${selectCols} FROM users WHERE id = ? LIMIT 1`, [userId]);
      if (!rows.length) return res.status(404).json({ message: 'User not found' });

      return res.json({ user: rows[0] });
    } finally {
      conn.release();
    }
  } catch (err) {
    console.error('Update profile error', err);
    return res.status(500).json({ message: 'Internal server error' });
  }
}

module.exports = updateProfile;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\config\category-filters.js ===
// Category â filters mapping (used to expand category query param into filters)
// This mapping matches the client-side CATEGORY_FILTER_MAPPING in client/src/modules/guest/home/data.js
const CATEGORY_FILTER_MAPPING = {
  fresher: {
    label: "Fresher Jobs",
    filters: {
      experience: "0", // min_experience = 0 AND (max_experience = 0 OR max_experience IS NULL)
    },
  },
  "full-time": {
    label: "Full-time Jobs",
    filters: {
      jobTypes: ["full-time"],
    },
  },
  "part-time": {
    label: "Part-time Jobs",
    filters: {
      jobTypes: ["part-time"],
    },
  },
  internship: {
    label: "Internship",
    filters: {
      jobTypes: ["internship"],
    },
  },
  remote: {
    label: "Remote Jobs",
    filters: {
      workModes: ["Remote"], // Note: database uses 'Remote' with capital R
    },
  },
  "office-data-entry": {
    label: "Office / Data Entry Jobs",
    filters: {
      workModes: ["Office"],
      roles: ["Data Entry", "Back Office"],
      tags: ["data entry"],
    },
  },
  "it-jobs": {
    label: "IT Jobs",
    filters: {
      roles: ["Developer", "Engineer", "IT"],
      tags: ["IT", "Software"],
    },
  },
  noida: {
    label: "Jobs in Noida",
    filters: {
      cities: ["Noida"],
    },
  },
  delivery: {
    label: "Delivery Jobs",
    filters: {
      roles: ["Delivery"],
      tags: ["delivery"],
    },
  },
  "customer-care-telecaller": {
    label: "Customer Care / Telecaller Jobs",
    filters: {
      roles: ["Customer Care", "Telecaller", "Call Center"],
      tags: ["customer care", "telecaller"],
    },
  },
};

module.exports = CATEGORY_FILTER_MAPPING;


--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\config\db.js ===
const mysql = require('mysql2/promise');

/**
 * MySQL Connection Pool
 * ----------------------
 * Purpose:
 *   - Create a reusable pool of MySQL connections.
 *   - Avoid opening a new DB connection for every request (better performance).
 *   - Use async/await because mysql2/promise is being used.
 *
 * Environment Variables (loaded from .env):
 *   - DB_HOST: Database server hostname
 *   - DB_USER: Username for DB authentication
 *   - DB_PASSWORD: Password for DB authentication
 *   - DB_NAME: Database name to connect to
 *
 * Options:
 *   waitForConnections: true
 *       â Queue incoming requests when all connections are busy.
 *
 *   connectionLimit: 10
 *       â Max number of active connections allowed in the pool at once.
 *         (Customize based on server resources.)
 *
 *   queueLimit: 0
 *       â 0 = unlimited queued connection requests.
 */
const pool = mysql.createPool({
  host: process.env.DB_HOST,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_NAME,
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0,
});

// Export pool so other files can run queries using:
// const [rows] = await pool.query("SELECT * FROM users");
module.exports = pool;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\applications.js ===
const path = require("path");
const fs = require("fs");
const multer = require("multer");
const pool = require("../config/db");
const { requireAuth } = require("../../middlewares/auth");

// Ensure upload directory exists
const UPLOAD_DIR = path.join(__dirname, "..", "uploads", "resumes");
if (!fs.existsSync(UPLOAD_DIR)) fs.mkdirSync(UPLOAD_DIR, { recursive: true });

// Multer storage config
const storage = multer.diskStorage({
  destination: (req, file, cb) => cb(null, UPLOAD_DIR),
  filename: (req, file, cb) => {
    const ext = path.extname(file.originalname);
    const base = path.basename(file.originalname, ext).replace(/\s+/g, "_");
    const unique = `${Date.now()}_${Math.round(Math.random() * 1e6)}`;
    cb(null, `${base}_${unique}${ext}`);
  },
});

const upload = multer({
  storage,
  limits: { fileSize: 5 * 1024 * 1024 },
  fileFilter: (req, file, cb) => {
    const allowed = [".pdf", ".doc", ".docx"];
    const ext = path.extname(file.originalname).toLowerCase();
    if (allowed.includes(ext)) cb(null, true);
    else cb(new Error("Only PDF / DOC / DOCX resumes are allowed"));
  },
});

// POST /applications function
const postApplication = async (req, res) => {
  const conn = await pool.getConnection();
  try {
    const userId = req.user && req.user.id;
    if (!userId) {
      return res.status(401).json({ ok: false, error: "Unauthorized" });
    }

    const { job_id, cover_letter } = req.body;
    if (!job_id) {
      return res.status(400).json({ ok: false, error: "job_id is required" });
    }

    // Check if job exists
    const [jobRows] = await conn.query("SELECT id FROM jobs WHERE id = ? LIMIT 1", [job_id]);
    if (jobRows.length === 0) {
      return res.status(404).json({ ok: false, error: "Job not found" });
    }

    // Prevent duplicate application
    const [existing] = await conn.query(
      "SELECT id FROM job_applications WHERE job_id = ? AND user_id = ? LIMIT 1",
      [job_id, userId]
    );
    if (existing.length > 0) {
      return res.status(409).json({ ok: false, error: "You have already applied to this job" });
    }

    // Determine resume path: prioritize uploaded file, then body resume_path, then profile resume_path
    let resumePath = null;
    if (req.file) {
      // New file uploaded
      resumePath = path.join("uploads", "resumes", req.file.filename);
    } else if (req.body.resume_path) {
      // Resume path provided in body (from profile)
      resumePath = req.body.resume_path;
    } else {
      // Try to get resume from user's profile
      try {
        const [profileRows] = await conn.query(
          "SELECT resume_path FROM candidate_profiles WHERE user_id = ? LIMIT 1",
          [userId]
        );
        if (profileRows.length > 0 && profileRows[0].resume_path) {
          resumePath = profileRows[0].resume_path;
        }
      } catch (profileErr) {
        // Profile doesn't exist or error - resume will be null
        console.error("Error fetching profile resume:", profileErr);
      }
    }

    const status = "applied";

    const insertSql = `
      INSERT INTO job_applications
        (job_id, user_id, status, cover_letter, resume_path, applied_at, updated_at)
      VALUES (?, ?, ?, ?, ?, NOW(), NOW())
    `;

    const [result] = await conn.query(insertSql, [
      job_id,
      userId,
      status,
      cover_letter || null,
      resumePath,
    ]);

    const insertedId = result.insertId;

    // Remove job from saved jobs if it exists (since user has now applied)
    try {
      await conn.query(
        'DELETE FROM saved_jobs WHERE user_id = ? AND job_id = ?',
        [userId, job_id]
      );
    } catch (savedJobErr) {
      // Log error but don't fail the application if removing from saved jobs fails
      console.error("Error removing from saved jobs:", savedJobErr);
    }

    res.status(201).json({
      ok: true,
      application_id: insertedId,
      job_id: Number(job_id),
      user_id: userId,
      status,
      resume_path: resumePath,
    });
  } catch (err) {
    console.error("Apply error:", err);
    // If multer produced file but DB failed, do cleanup
    if (req.file) {
      try {
        fs.unlinkSync(path.join(UPLOAD_DIR, req.file.filename));
      } catch (e) {
        // ignore
      }
    }
    res.status(500).json({ ok: false, error: "Server error", details: err.message });
  } finally {
    conn.release();
  }
};

// Export the upload middleware and postApplication function
module.exports = {
  upload,
  postApplication
};
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\get-filters.js ===
const pool = require('../config/db');

/**
 * GET /api/jobs/filters
 * Returns dynamic filter options based on approved jobs only:
 * - cities: distinct cities from jobs.city where status='approved'
 * - titles: distinct titles from jobs.title where status='approved'
 * - tags: distinct tags from job_tags joined with job_tag_map and jobs where status='approved'
 */
async function getFilters(req, res) {
  try {
    // Fetch distinct cities from approved jobs
    const [cityRows] = await pool.query(`
      SELECT DISTINCT city 
      FROM jobs 
      WHERE status = 'approved' AND city IS NOT NULL AND city != ''
      ORDER BY city ASC
    `);

    // Fetch distinct job titles from approved jobs
    const [titleRows] = await pool.query(`
      SELECT DISTINCT title 
      FROM jobs 
      WHERE status = 'approved' AND title IS NOT NULL AND title != ''
      ORDER BY title ASC
    `);

    // Fetch distinct tags from approved jobs via job_tag_map
    let tags = [];
    try {
      const [tagRows] = await pool.query(`
        SELECT DISTINCT jt.name as tag
        FROM job_tags jt
        INNER JOIN job_tag_map jtm ON jt.id = jtm.tag_id
        INNER JOIN jobs j ON jtm.job_id = j.id
        WHERE j.status = 'approved' AND jt.name IS NOT NULL AND jt.name != ''
        ORDER BY jt.name ASC
      `);
      tags = tagRows.map(row => row.tag);
    } catch (e) {
      // If tag tables don't exist or there's an error, return empty array
      console.error('Error fetching tags:', e.message);
    }

    const cities = cityRows.map(row => row.city);
    const titles = titleRows.map(row => row.title);

    res.json({
      ok: true,
      filters: {
        cities,
        titles,
        tags
      }
    });
  } catch (err) {
    console.error('GET /api/jobs/filters error:', err);
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  }
}

module.exports = getFilters;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\get-jobdetails.js ===
const express = require('express');
const pool = require('../config/db');
const router = express.Router();

async function getjobdetails(req, res) {
  try {
    const id = parseInt(req.params.id, 10);
    if (Number.isNaN(id)) return res.status(400).json({ ok: false, message: 'Invalid job id' });

    const sql = `
      SELECT
        id,
        title,
        company,
        job_type,
        work_mode,
        city,
        locality,
        min_experience,
        max_experience,
        min_salary,
        max_salary,
        vacancies,
        description,
        logo_path,
        status,
        created_at,
        contact_email,
        contact_phone,
        interview_address
      FROM jobs
      WHERE id = ?
      LIMIT 1
    `;
    const [rows] = await pool.query(sql, [id]);
    if (!rows || rows.length === 0) return res.status(404).json({ ok: false, message: 'Job not found' });

    const r = rows[0];
    let experiance = 'Not specified';
    if (r.min_experience == null && r.max_experience == null) experiance = 'Fresher';
    else if (r.min_experience != null && r.max_experience == null) experiance = `${r.min_experience}+ yrs`;
    else if (r.min_experience == null && r.max_experience != null) experiance = `Up to ${r.max_experience} yrs`;
    else experiance = `${r.min_experience}-${r.max_experience} yrs`;

    // fetch tags from tag tables if available (silent fallback)
    let tags = [];
    try {
      const [tagRows] = await pool.query(
        `SELECT jtm.job_id, jt.name as tag FROM job_tag_map jtm JOIN job_tags jt ON jt.id = jtm.tag_id WHERE jtm.job_id = ?`,
        [id]
      );
      tags = tagRows.map(tr => tr.tag);
    } catch (e) {
      // ignore if tag tables aren't present
    }

    // Build location string safely handling null/undefined values
    let location = '';
    if (r.city) {
      location = r.city;
      if (r.locality) {
        location += `, ${r.locality}`;
      }
    } else if (r.locality) {
      location = r.locality;
    } else {
      location = 'Not specified';
    }

    // Format salary range (monthly)
    const formatSalary = (minSalary, maxSalary) => {
      if (minSalary == null && maxSalary == null) return null;
      if (minSalary != null && maxSalary != null) {
        return `${minSalary}-${maxSalary} /Month`;
      }
      if (minSalary != null) return `${minSalary}+ /Month`;
      if (maxSalary != null) return `Up to ${maxSalary} /Month`;
      return null;
    };

    const job = {
      id: r.id,
      title: r.title,
      company: r.company,
      type: r.job_type || 'Full-time',
      workMode: r.work_mode || 'Office',
      location,
      tags: tags.length ? tags : (r.skills || '').split(',').map(s => s.trim()).filter(Boolean),
      salary: formatSalary(r.min_salary, r.max_salary),
      minSalary: r.min_salary,
      maxSalary: r.max_salary,
      vacancies: r.vacancies,
      description: r.description,
      logoPath: r.logo_path || null,
      status: r.status || 'pending',
      createdAt: r.created_at,
      experiance,
      min_experience: r.min_experience,
      max_experience: r.max_experience,
      contactEmail: r.contact_email || null,
      contactPhone: r.contact_phone || null,
      interviewAddress: r.interview_address || null,
    };

    res.json({ ok: true, job });
  } catch (err) {
    console.error('GET /api/jobs/:id error:', err);
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  }
};
module.exports = getjobdetails;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\get-jobs.js ===
const pool = require('../config/db');
const jwt = require('jsonwebtoken');
const CATEGORY_FILTER_MAPPING = require('../config/category-filters');

function parseSkills(skills) {
  if (!skills) return [];
  return skills.split(',').map(s => s.trim()).filter(Boolean);
}

// Helper function to optionally get user ID from token
function getUserIdFromToken(req) {
  try {
    const token = req.cookies?.token;
    if (!token) return null;
    const payload = jwt.verify(token, process.env.JWT_SECRET);
    return payload.sub || null;
  } catch (err) {
    // Token invalid or expired - return null (user not authenticated)
    return null;
  }
}

// Helper function to expand category into filters
function expandCategoryToFilters(category) {
  if (!category || !CATEGORY_FILTER_MAPPING[category]) {
    return null;
  }
  return CATEGORY_FILTER_MAPPING[category].filters;
}

// Helper function to build WHERE conditions from filters
function buildFilterConditions(filters, isAuthenticated) {
  const conditions = [];
  const params = [];
  let needsTagJoin = false;

  // jobTypes filter
  if (filters.jobTypes && Array.isArray(filters.jobTypes) && filters.jobTypes.length > 0) {
    const placeholders = filters.jobTypes.map(() => '?').join(',');
    conditions.push(`j.job_type IN (${placeholders})`);
    params.push(...filters.jobTypes);
  }

  // workModes filter
  if (filters.workModes && Array.isArray(filters.workModes) && filters.workModes.length > 0) {
    const placeholders = filters.workModes.map(() => '?').join(',');
    conditions.push(`j.work_mode IN (${placeholders})`);
    params.push(...filters.workModes);
  }

  // experience filter (fresher = 0 years)
  if (filters.experience === "0") {
    conditions.push(`(j.min_experience = 0 OR j.min_experience IS NULL) AND (j.max_experience = 0 OR j.max_experience IS NULL)`);
  }

  // cities filter
  if (filters.cities && Array.isArray(filters.cities) && filters.cities.length > 0) {
    const placeholders = filters.cities.map(() => '?').join(',');
    conditions.push(`j.city IN (${placeholders})`);
    params.push(...filters.cities);
  }

  // roles filter (search in title)
  if (filters.roles && Array.isArray(filters.roles) && filters.roles.length > 0) {
    const roleConditions = filters.roles.map((role) => {
      params.push(`%${role}%`);
      return `j.title LIKE ?`;
    });
    conditions.push(`(${roleConditions.join(' OR ')})`);
  }

  // tags filter (requires JOIN with job_tag_map and job_tags)
  if (filters.tags && Array.isArray(filters.tags) && filters.tags.length > 0) {
    needsTagJoin = true;
    const tagConditions = filters.tags.map((tag) => {
      params.push(tag);
      return `jt.name = ?`;
    });
    conditions.push(`(${tagConditions.join(' OR ')})`);
  }

  return { conditions, params, needsTagJoin };
}

async function getjobs(req, res) {
  try {
    const limit = Math.max(1, Math.min(100, parseInt(req.query.limit || '10', 10)));
    const userId = getUserIdFromToken(req);
    const category = req.query.category;

    // Expand category into filters if provided
    const filters = expandCategoryToFilters(category);
    const filterInfo = filters ? buildFilterConditions(filters, !!userId) : { conditions: [], params: [], needsTagJoin: false };

    // Build SQL query - exclude jobs user has already applied for if authenticated
    let sql;
    let params = [];
    // Use table alias 'j' if we have filters, tag joins, or authenticated user
    const useAlias = userId || filterInfo.needsTagJoin || filterInfo.conditions.length > 0;
    const tableAlias = useAlias ? 'j' : null;
    const prefix = tableAlias ? `${tableAlias}.` : '';

    // Base SELECT clause - use DISTINCT if we have tag joins to avoid duplicate rows
    const selectKeyword = filterInfo.needsTagJoin ? 'SELECT DISTINCT' : 'SELECT';
    const selectClause = `
      ${selectKeyword}
        ${prefix}id,
        ${prefix}title,
        ${prefix}company,
        ${prefix}job_type,
        ${prefix}work_mode,
        ${prefix}city,
        ${prefix}locality,
        ${prefix}min_experience,
        ${prefix}max_experience,
        ${prefix}min_salary,
        ${prefix}max_salary,
        ${prefix}vacancies,
        ${prefix}description,
        ${prefix}logo_path,
        ${prefix}status,
        ${prefix}created_at
    `;

    // Build FROM and JOIN clauses
    let fromClause;
    if (userId) {
      // User is authenticated - exclude applied jobs
      if (filterInfo.needsTagJoin) {
        fromClause = `
          FROM jobs j
          LEFT JOIN job_applications ja ON j.id = ja.job_id AND ja.user_id = ?
          LEFT JOIN job_tag_map jtm ON j.id = jtm.job_id
          LEFT JOIN job_tags jt ON jtm.tag_id = jt.id
        `;
      } else {
        fromClause = `
          FROM jobs j
          LEFT JOIN job_applications ja ON j.id = ja.job_id AND ja.user_id = ?
        `;
      }
    } else {
      // User not authenticated
      if (filterInfo.needsTagJoin) {
        fromClause = `
          FROM jobs j
          LEFT JOIN job_tag_map jtm ON j.id = jtm.job_id
          LEFT JOIN job_tags jt ON jtm.tag_id = jt.id
        `;
      } else if (useAlias) {
        fromClause = `FROM jobs j`;
      } else {
        fromClause = `FROM jobs`;
      }
    }

    // Build WHERE clause
    const whereConditions = [];

    // Base condition: only approved jobs
    whereConditions.push(`${prefix}status = 'approved'`);

    // Exclude applied jobs if authenticated
    if (userId) {
      whereConditions.push(`ja.id IS NULL`);
    }

    // Add filter conditions
    if (filterInfo.conditions.length > 0) {
      whereConditions.push(...filterInfo.conditions);
    }

    // Add userId param if authenticated (must be first param for JOIN)
    if (userId) {
      params.push(userId);
    }

    // Add filter params
    params.push(...filterInfo.params);

    // Add limit
    params.push(limit);

    // Build final SQL
    const whereClause = whereConditions.length > 0 ? `WHERE ${whereConditions.join(' AND ')}` : '';

    sql = `
      ${selectClause}
      ${fromClause}
      ${whereClause}
      ORDER BY ${prefix}created_at DESC
      LIMIT ?
    `;

    const [rows] = await pool.query(sql, params);

    // Fetch tags from normalized tables when available (silent fallback)
    let tagMap = {};
    if (Array.isArray(rows) && rows.length) {
      try {
        const ids = rows.map((r) => r.id);
        const placeholders = ids.map(() => '?').join(',');
        const tagSql = `SELECT jtm.job_id, jt.name as tag FROM job_tag_map jtm JOIN job_tags jt ON jt.id = jtm.tag_id WHERE jtm.job_id IN (${placeholders})`;
        const [tagRows] = await pool.query(tagSql, ids);
        tagRows.forEach((tr) => {
          tagMap[tr.job_id] = tagMap[tr.job_id] || [];
          tagMap[tr.job_id].push(tr.tag);
        });
      } catch (e) {
        // silently ignore missing tag tables or errors
      }
    }

    // Helper function to format salary range (monthly)
    const formatSalary = (minSalary, maxSalary) => {
      if (minSalary == null && maxSalary == null) return null;
      if (minSalary != null && maxSalary != null) {
        return `${minSalary}-${maxSalary} /Month`;
      }
      if (minSalary != null) return `${minSalary}+ /Month`;
      if (maxSalary != null) return `Up to ${maxSalary} /Month`;
      return null;
    };

    const jobs = rows.map(r => {
      let experiance = 'Not specified';
      if (r.min_experience == null && r.max_experience == null) experiance = 'Fresher';
      else if (r.min_experience != null && r.max_experience == null) experiance = `${r.min_experience}+ yrs`;
      else if (r.min_experience == null && r.max_experience != null) experiance = `Up to ${r.max_experience} yrs`;
      else experiance = `${r.min_experience}-${r.max_experience} yrs`;

      // Build location string safely handling null/undefined values
      let location = '';
      if (r.city) {
        location = r.city;
        if (r.locality) {
          location += `, ${r.locality}`;
        }
      } else if (r.locality) {
        location = r.locality;
      } else {
        location = 'Not specified';
      }

      return {
        id: r.id,
        title: r.title,
        company: r.company,
        type: r.job_type || 'Full-time',
        workMode: r.work_mode || 'Office',
        city: r.city || null, // Include city field for filtering
        location,
        tags: tagMap[r.id] || parseSkills(r.skills || r.tags || r.skill || ''),
        salary: formatSalary(r.min_salary, r.max_salary),
        minSalary: r.min_salary,
        maxSalary: r.max_salary,
        minExperience: r.min_experience,
        maxExperience: r.max_experience,
        vacancies: r.vacancies,
        description: r.description,
        logoPath: r.logo_path || null,
        status: r.status || 'approved', // Include status, default to approved for public listing
        createdAt: r.created_at,
        experiance,
      };
    });

    res.json({ ok: true, jobs });
  } catch (err) {
    console.error('GET /api/jobs error:', err);
    try {
      const fs = require('fs');
      const path = require('path');
      const dbgPath = path.join(__dirname, '../../../debug_jobs.log');
      const now = new Date().toISOString();
      fs.appendFileSync(dbgPath, `${now} - ERROR: ${err && err.stack ? err.stack : String(err)}\n`);
    } catch (e) {
      // ignore file logging errors
    }
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  }
};

module.exports = getjobs;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\getapplied.js ===
const pool = require("../../api/config/db");
const { requireAuth } = require("../../middlewares/auth");

// GET /applied-jobs - Get all applied jobs for current login  user
const getAppliedJobs = async (req, res) => {
  const connection = await pool.getConnection();

  try {
    const userId = req.user?.id;
    if (!userId) {
      return res.status(401).json({
        ok: false,
        error: "Unauthorized"
      });
    }

    const sql = `
      SELECT 
        ja.id,
        ja.job_id,
        ja.status,
        ja.applied_at,
        j.title,
        j.company,
        j.job_type,
        j.work_mode,
        j.city,
        j.locality,
        j.min_salary,
        j.max_salary,
        j.logo_path
      FROM job_applications ja
      JOIN jobs j ON ja.job_id = j.id
      WHERE ja.user_id = ?
      ORDER BY ja.applied_at DESC
    `;

    const [applications] = await connection.query(sql, [userId]);

    // Format salary range for each application (monthly)
    const formatSalary = (minSalary, maxSalary) => {
      if (minSalary == null && maxSalary == null) return null;
      if (minSalary != null && maxSalary != null) {
        return `${minSalary}-${maxSalary} per month`;
      }
      if (minSalary != null) return `${minSalary}+ per month`;
      if (maxSalary != null) return `Up to ${maxSalary} per month`;
      return null;
    };

    const formattedApplications = applications.map(app => ({
      ...app,
      salary: formatSalary(app.min_salary, app.max_salary),
      work_mode: app.work_mode || 'Office'
    }));

    res.json({
      ok: true,
      applications: formattedApplications,
      count: formattedApplications.length
    });

  } catch (err) {
    console.error("Get applied jobs error:", err);
    res.status(500).json({
      ok: false,
      error: "Server error while fetching applications"
    });
  } finally {
    connection.release();
  }
};

module.exports = getAppliedJobs;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\savejobs\checkSavedJob.js ===
const pool = require('../../config/db');

const checkSavedJob = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const userId = req.user.id;
    const { job_id } = req.params;

    const [rows] = await connection.execute(
      'SELECT * FROM saved_jobs WHERE user_id = ? AND job_id = ?',
      [userId, job_id]
    );

    res.json({ 
      success: true, 
      isSaved: rows.length > 0,
      data: rows.length > 0 ? rows[0] : null
    });
  } catch (error) {
    console.error('Check saved job error:', error);
    res.status(500).json({ success: false, message: 'Internal server error' });
  } finally {
    connection.release();
  }
};

module.exports = checkSavedJob;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\savejobs\getSavedJobs.js ===
const pool = require('../../config/db');

const getSavedJobs = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const userId = req.user.id;


    // Use the exact column names from my jobs table
    const [rows] = await connection.execute(`
      SELECT 
        sj.job_id,
        sj.saved_at,
        j.id,
        j.title,
        j.company,
        j.job_type as type,
        j.work_mode,
        j.city,
        j.locality,
        j.min_experience,
        j.max_experience,
        j.min_salary,
        j.max_salary,
        j.vacancies,
        j.description,
        j.logo_path,
        j.created_at
      FROM saved_jobs sj
      LEFT JOIN jobs j ON sj.job_id = j.id
      WHERE sj.user_id = ?
      ORDER BY sj.saved_at DESC
    `, [userId]);

    // Helper function to format salary range (monthly)
    const formatSalary = (minSalary, maxSalary) => {
      if (minSalary == null && maxSalary == null) return null;
      if (minSalary != null && maxSalary != null) {
        return `${minSalary}-${maxSalary} per month`;
      }
      if (minSalary != null) return `${minSalary}+ per month`;
      if (maxSalary != null) return `Up to ${maxSalary} per month`;
      return null;
    };

    // Process the jobs to match my frontend format
    const processedJobs = rows.map(job => {
      // Calculate experience string (same as your getjobs API)
      let experience = 'Not specified';
      if (job.min_experience == null && job.max_experience == null) {
        experience = 'Fresher';
      } else if (job.min_experience != null && job.max_experience == null) {
        experience = `${job.min_experience}+ yrs`;
      } else if (job.min_experience == null && job.max_experience != null) {
        experience = `Up to ${job.max_experience} yrs`;
      } else {
        experience = `${job.min_experience}-${job.max_experience} yrs`;
      }

      // Build location (same as my getjobs API)
      const location = job.city + (job.locality ? `, ${job.locality}` : '');

      return {
        job_id: job.job_id,
        saved_at: job.saved_at,
        id: job.id,
        title: job.title || 'Job Title',
        company: job.company || 'Company',
        location: location || 'Location not specified',
        type: job.type || 'Full-time',
        workMode: job.work_mode || 'Office',
        experience: experience,
        salary: formatSalary(job.min_salary, job.max_salary),
        minSalary: job.min_salary,
        maxSalary: job.max_salary,
        description: job.description || '',
        logo_path: job.logo_path || null,
        created_at: job.created_at,
        // Add empty tags array for compatibility
        tags: []
      };
    });

    res.json({
      success: true,
      data: processedJobs,
      count: processedJobs.length
    });
  } catch (error) {
    console.error('Get saved jobs error:', error);
    console.error('Error details:', {
      message: error.message,
      code: error.code,
      sqlMessage: error.sqlMessage
    });

    res.status(500).json({
      success: false,
      message: 'Internal server error',
      error: process.env.NODE_ENV === 'development' ? error.message : undefined
    });
  } finally {
    connection.release();
  }
};

module.exports = getSavedJobs;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\savejobs\removeSavedJob.js ===
const pool = require('../../config/db');

const removeSavedJob = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const userId = req.user.id;
    const { job_id } = req.params;

    if (!job_id) {
      return res.status(400).json({ success: false, message: 'Job ID is required' });
    }

    const [result] = await connection.execute(
      'DELETE FROM saved_jobs WHERE user_id = ? AND job_id = ?',
      [userId, job_id]
    );

    if (result.affectedRows === 0) {
      return res.status(404).json({ success: false, message: 'Saved job not found' });
    }

    res.json({ 
      success: true, 
      message: 'Job removed from saved items',
      data: { job_id }
    });
  } catch (error) {
    console.error('Remove saved job error:', error);
    res.status(500).json({ success: false, message: 'Internal server error' });
  } finally {
    connection.release();
  }
};

module.exports = removeSavedJob;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\jobs\savejobs\savedJobs.js ===
const pool = require('../../config/db');

const saveJob = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const userId = req.user.id;
    const { job_id } = req.params;

    if (!job_id) {
      return res.status(400).json({ success: false, message: 'Job ID is required' });
    }

    // Check if job exists in jobs table
    const [jobExists] = await connection.execute(
      'SELECT id FROM jobs WHERE id = ?',
      [job_id]
    );

    if (jobExists.length === 0) {
      return res.status(404).json({ success: false, message: 'Job not found' });
    }

    // Check if user has already applied to this job
    const [applicationExists] = await connection.execute(
      'SELECT id FROM job_applications WHERE user_id = ? AND job_id = ? LIMIT 1',
      [userId, job_id]
    );

    if (applicationExists.length > 0) {
      return res.status(409).json({ success: false, message: 'Cannot save a job you have already applied to' });
    }

    // Check if job is already saved
    const [existing] = await connection.execute(
      'SELECT * FROM saved_jobs WHERE user_id = ? AND job_id = ?',
      [userId, job_id]
    );

    if (existing.length > 0) {
      return res.status(409).json({ success: false, message: 'Job already saved' });
    }

    // Save the job
    await connection.execute(
      'INSERT INTO saved_jobs (user_id, job_id, saved_at) VALUES (?, ?, NOW())',
      [userId, job_id]
    );

    res.status(201).json({
      success: true,
      message: 'Job saved successfully',
      data: { user_id: userId, job_id, saved_at: new Date().toISOString() }
    });
  } catch (error) {
    console.error('Save job error:', error);
    res.status(500).json({ success: false, message: 'Internal server error' });
  } finally {
    connection.release();
  }
};

module.exports = saveJob;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-jobs.js ===
const pool = require('../../config/db');

const getAdminJobs = async (req, res) => {
  try {
    const { status } = req.query;

    let sql = `
      SELECT 
        j.id,
        j.title,
        j.company,
        j.job_type,
        j.work_mode,
        j.city,
        j.locality,
        j.min_experience,
        j.max_experience,
        j.min_salary,
        j.max_salary,
        j.vacancies,
        j.description,
        j.contact_email,
        j.contact_phone,
        j.interview_address,
        j.logo_path,
        j.status,
        j.posted_at,
        j.created_at,
        j.updated_at,
        u.email as recruiter_email,
        rp.company_name
      FROM jobs j
      LEFT JOIN users u ON j.recruiter_id = u.id
      LEFT JOIN recruiter_profiles rp ON j.recruiter_id = rp.user_id
    `;

    // Add status filter if provided
    if (status && status !== 'all') {
      // Handle 'pending' status to include both 'pending' and NULL (for backward compatibility)
      if (status === 'pending') {
        sql += ` WHERE (j.status = ? OR j.status IS NULL)`;
      } else {
        sql += ` WHERE j.status = ?`;
      }
    }

    sql += ` ORDER BY j.created_at DESC`;

    const params = status && status !== 'all' ? [status] : [];
    const [jobs] = await pool.execute(sql, params);

    // Helper function to format salary range (monthly)
    const formatSalary = (minSalary, maxSalary) => {
      if (minSalary == null && maxSalary == null) return 'Not specified';
      if (minSalary != null && maxSalary != null) {
        return `${minSalary}-${maxSalary} /Month`;
      }
      if (minSalary != null) return `${minSalary}+ /Month`;
      if (maxSalary != null) return `Up to ${maxSalary} /Month`;
      return 'Not specified';
    };

    const jobsWithFormattedData = (jobs || []).map(job => {
      let experience = 'Not specified';
      if (job.min_experience == null && job.max_experience == null) experience = 'Fresher';
      else if (job.min_experience != null && job.max_experience == null) experience = `${job.min_experience}+ yrs`;
      else if (job.min_experience == null && job.max_experience != null) experience = `Up to ${job.max_experience} yrs`;
      else experience = `${job.min_experience}-${job.max_experience} yrs`;

      // Build location string safely handling null/undefined values
      let location = '';
      if (job.city) {
        location = job.city;
        if (job.locality) {
          location += `, ${job.locality}`;
        }
      } else if (job.locality) {
        location = job.locality;
      } else {
        location = 'Not specified';
      }

      return {
        ...job,
        experience,
        location,
        salary: formatSalary(job.min_salary, job.max_salary),
        work_mode: job.work_mode || 'Office'
      };
    });

    res.json({
      success: true,
      jobs: jobsWithFormattedData
    });
  } catch (error) {
    console.error('Admin get jobs error:', error);
    console.error('Error details:', {
      message: error.message,
      stack: error.stack,
      query: req.query
    });
    res.status(500).json({
      success: false,
      message: 'Internal server error',
      error: process.env.NODE_ENV === 'development' ? error.message : undefined
    });
  }
};

module.exports = getAdminJobs;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-login.js ===
const pool = require('../../../api/config/db');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

const adminLogin = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const { email, password } = req.body;

    if (!email || !password) {
      return res.status(400).json({
        success: false,
        message: 'Email and password are required'
      });
    }

    // Find admin by email
    const [admins] = await connection.execute(
      'SELECT * FROM admins WHERE email = ?',
      [email]
    );

    if (admins.length === 0) {
      return res.status(401).json({
        success: false,
        message: 'Invalid email or password'
      });
    }

    const admin = admins[0];

    // Verify password
    const isPasswordValid = await bcrypt.compare(password, admin.password_hash);
    if (!isPasswordValid) {
      return res.status(401).json({
        success: false,
        message: 'Invalid email or password'
      });
    }

    // Generate JWT token
    const token = jwt.sign(
      {
        sub: admin.admin_id,
        email: admin.email,
        role: 'admin',
        full_name: admin.full_name
      },
      process.env.JWT_SECRET,
      { expiresIn: '7d' }
    );

    // Set HTTP-only cookie
    res.cookie('token', token, {
      httpOnly: true,
      secure: process.env.NODE_ENV === 'production',
      sameSite: 'strict',
      maxAge: 7 * 24 * 60 * 60 * 1000 // 7 days
    });

    res.json({
      success: true,
      message: 'Admin login successful',
      user: {
        id: admin.admin_id,
        email: admin.email,
        full_name: admin.full_name,
        role: 'admin'
      }
    });

  } catch (error) {
    console.error('Admin login error:', error);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  } finally {
    if (connection) connection.release();
  }
};

module.exports = adminLogin;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-logout.js ===
const adminLogout = (req, res) => {
  try {
    const isProd = process.env.NODE_ENV === 'production';
    // Clear cookie with same options used when setting it (matching admin-login.js)
    res.clearCookie('token', {
      httpOnly: true,
      secure: isProd,
      sameSite: 'strict',
      path: '/',
    });

    res.json({
      success: true,
      message: 'Admin logged out successfully'
    });
  } catch (err) {
    console.error('Admin logout error', err);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  }
};

module.exports = adminLogout;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-recruiters.js ===
const pool = require('../../config/db');

const getAdminRecruiters = async (req, res) => {
  try {
    const [recruiters] = await pool.execute(`
      SELECT 
        rp.user_id,
        rp.company_name,
        rp.company_website,
        rp.company_type,
        rp.address_line1,
        rp.address_line2,
        rp.city,
        rp.state,
        rp.country,
        rp.pincode,
        rp.status,
        rp.verification_notes,
        rp.created_at,
        rp.updated_at,
        u.email
      FROM recruiter_profiles rp
      LEFT JOIN users u ON rp.user_id = u.id
      ORDER BY rp.created_at DESC
    `);

    // Map status to verified for frontend compatibility
    const recruitersWithVerified = recruiters.map(recruiter => ({
      ...recruiter,
      verified: recruiter.status === 'approved' ? 1 : 0  // Add verified field (1 or 0)
    }));

    res.json({
      success: true,
      recruiters: recruitersWithVerified || []
    });
  } catch (error) {
    console.error('Admin get recruiters error:', error);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  }
};

module.exports = getAdminRecruiters;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-register.js ===
const pool = require('../../../api/config/db');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

const adminRegister = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const { full_name, email, phone, password } = req.body;

    // Validation
    if (!full_name || !email || !password) {
      return res.status(400).json({
        success: false,
        message: 'Full name, email, and password are required'
      });
    }

    // Check if admin already exists
    const [existingAdmins] = await connection.execute(
      'SELECT admin_id FROM admins WHERE email = ?',
      [email]
    );

    if (existingAdmins.length > 0) {
      return res.status(409).json({
        success: false,
        message: 'Admin with this email already exists'
      });
    }

    // Hash password
    const saltRounds = 12;
    const password_hash = await bcrypt.hash(password, saltRounds);

    // Insert admin
    const [result] = await connection.execute(
      'INSERT INTO admins (full_name, email, phone, password_hash) VALUES (?, ?, ?, ?)',
      [full_name, email, phone || null, password_hash]
    );

    // Generate JWT token
    const token = jwt.sign(
      {
        sub: result.insertId,
        email: email,
        role: 'admin',
        full_name: full_name
      },
      process.env.JWT_SECRET,
      { expiresIn: '7d' }
    );

    // Set HTTP-only cookie
    res.cookie('token', token, {
      httpOnly: true,
      secure: process.env.NODE_ENV === 'production',
      sameSite: 'strict',
      maxAge: 7 * 24 * 60 * 60 * 1000 // 7 days
    });

    res.status(201).json({
      success: true,
      message: 'Admin registered successfully',
      admin: {
        admin_id: result.insertId,
        full_name,
        email,
        phone
      }
    });

  } catch (error) {
    console.error('Admin register error:', error);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  } finally {
    if (connection) connection.release();
  }
};

module.exports = adminRegister;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-update-job-status.js ===
const pool = require('../../config/db');

const updateJobStatus = async (req, res) => {
  try {
    const { jobId } = req.params;
    const { status, rejection_reason } = req.body;

    // Validate status
    const validStatuses = ['draft', 'pending', 'approved', 'rejected', 'closed'];
    if (!validStatuses.includes(status)) {
      return res.status(400).json({
        success: false,
        message: `Invalid status. Must be one of: ${validStatuses.join(', ')}`
      });
    }

    // Try to update with rejection_reason if provided
    // If column doesn't exist, it will fail and we'll retry without it
    if (rejection_reason !== undefined && rejection_reason !== null && rejection_reason.trim()) {
      try {
        await pool.execute(
          'UPDATE jobs SET status = ?, rejection_reason = ?, updated_at = NOW() WHERE id = ?',
          [status, rejection_reason.trim(), jobId]
        );
        return res.json({
          success: true,
          message: `Job status updated to ${status} successfully`
        });
      } catch (error) {
        // If error is due to unknown column, fall through to update without rejection_reason
        if (error.code === 'ER_BAD_FIELD_ERROR' && error.message.includes('rejection_reason')) {
          console.log('rejection_reason column not found, updating without it');
          // Fall through to update without rejection_reason
        } else {
          throw error; // Re-throw if it's a different error
        }
      }
    }

    // Update without rejection_reason (either not provided or column doesn't exist)
    await pool.execute(
      'UPDATE jobs SET status = ?, updated_at = NOW() WHERE id = ?',
      [status, jobId]
    );

    res.json({
      success: true,
      message: `Job status updated to ${status} successfully`
    });
  } catch (error) {
    console.error('Admin update job status error:', error);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  }
};

module.exports = updateJobStatus;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-users.js ===
const pool = require('../../config/db');

const getAdminUsers = async (req, res) => {
  try {
    const [users] = await pool.execute(`
      SELECT 
        up.user_id,
        up.full_name,
        up.phone,
        up.city,
        up.state,
        up.country,
        up.experience_years,
        up.highest_education,
        up.created_at,
        u.email
      FROM candidate_profiles up
      LEFT JOIN users u ON up.user_id = u.id
      ORDER BY up.created_at DESC
    `);
    // Send response
    res.json({
      success: true,
      users: users || []
    });
  } catch (error) {
    console.error('Admin get users error:', error);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  }
};

module.exports = getAdminUsers;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\admin\admin-verify-recruiter.js ===
const pool = require('../../config/db');

const verifyRecruiter = async (req, res) => {
  try {
    const { recruiterId } = req.params;
    const { verified } = req.body; // 0 or 1

    if (typeof verified === 'undefined') {
      return res.status(400).json({
        success: false,
        message: 'verified field is required (0 or 1)'
      });
    }

    // Convert verified (0/1) to status
    const status = verified === 1 ? 'approved' : 'pending';
    
    await pool.execute(
      'UPDATE recruiter_profiles SET status = ? WHERE user_id = ?',
      [status, recruiterId]
    );

    res.json({
      success: true,
      message: `Recruiter ${verified === 1 ? 'verified' : 'unverified'} successfully`
    });
  } catch (error) {
    console.error('Admin verify recruiter error:', error);
    res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  }
};

module.exports = verifyRecruiter;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\candidate\candidate-get.js ===
const express = require('express');
const router = express.Router();
const pool = require('../../config/db');
const { requireAuth } = require('../../../middlewares/auth');

const getCandidateProfile = async (req, res) => {
  const connection = await pool.getConnection();
  try {
    const userId = req.user?.id;
    if (!userId) return res.status(401).json({ success: false, message: 'Unauthorized' });

    const [rows] = await connection.execute('SELECT * FROM candidate_profiles WHERE user_id = ?', [userId]);
    if (!rows || rows.length === 0) return res.status(404).json({ success: false, message: 'Profile not found' });

    // Parse key_skills JSON field if it exists
    const profile = rows[0];
    if (profile.key_skills) {
      try {
        profile.key_skills = JSON.parse(profile.key_skills);
      } catch (e) {
        // If parsing fails, try to handle as comma-separated string
        if (typeof profile.key_skills === 'string' && profile.key_skills.includes(',')) {
          profile.key_skills = profile.key_skills.split(',').map(s => s.trim()).filter(s => s);
        }
      }
    }

    res.json({ success: true, user: profile });
  } catch (error) {
    res.status(500).json({ success: false, message: 'Internal server error' });
  } finally {
    connection.release();
  }
};

module.exports = getCandidateProfile;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\candidate\candidate-put.js ===

const pool = require('../../config/db');

/**
 * Get table columns to verify structure
 */
async function getTableColumns(connection, tableName) {
  try {
    const [columns] = await connection.execute(`SHOW COLUMNS FROM ${tableName}`);
    return columns.map(col => col.Field);
  } catch (error) {
    return [];
  }
}

/**
 * Handler: Create or update user profile.
 * Exported as a const so you can attach it to a route elsewhere:
 *   router.put('/user', requireAuth, user);
 */
const candidateProfile = async (req, res) => {
  const connection = await pool.getConnection();

  try {
    // Verify table structure
    const tableColumns = await getTableColumns(connection, 'candidate_profiles');
    // If you expect requireAuth to run before this handler, req.user should exist.
    // If not present, respond with 401 so caller knows to apply auth middleware.
    const authUserId = req.user?.id;
    if (!authUserId && !req.body?.user_id) {
      return res.status(401).json({
        success: false,
        message: 'Unauthorized: missing authenticated user. Apply requireAuth or send user_id in body.'
      });
    }

    const {
      user_id, // optional fallback if caller supplies it
      full_name,
      phone,
      date_of_birth,
      gender,
      city,
      state,
      country,
      highest_qualification,
      trade_stream,
      key_skills,
      skill_level,
      experience_type,
      job_type,
      preferred_work_type,
      availability,
      expected_salary,
      id_proof_available,
      preferred_contact_method,
      willing_to_relocate,
      experience_years,
      resume_path,
      linkedin_url,
      github_url
    } = req.body;

    const finalUserId = authUserId || user_id;
    if (!finalUserId) {
      return res.status(400).json({
        success: false,
        message: 'User ID is required (ensure authentication or provide user_id in request body).'
      });
    }

    if (!full_name) {
      return res.status(400).json({
        success: false,
        message: 'Full name is required.'
      });
    }

    await connection.beginTransaction();

    // Check if profile exists
    const [existingProfiles] = await connection.execute(
      'SELECT user_id FROM candidate_profiles WHERE user_id = ?',
      [finalUserId]
    );

    const now = new Date();

    // Handle key_skills - convert array to JSON string if needed
    let keySkillsJson = null;
    if (key_skills) {
      if (Array.isArray(key_skills)) {
        // Only stringify if array has items
        if (key_skills.length > 0) {
          keySkillsJson = JSON.stringify(key_skills);
        }
      } else if (typeof key_skills === 'string') {
        // If it's a comma-separated string, convert to array then JSON
        try {
          const skillsArray = key_skills.split(',').map(s => s.trim()).filter(s => s);
          if (skillsArray.length > 0) {
            keySkillsJson = JSON.stringify(skillsArray);
          }
        } catch (e) {
          // If it's already JSON, try to parse and validate
          try {
            const parsed = JSON.parse(key_skills);
            if (Array.isArray(parsed) && parsed.length > 0) {
              keySkillsJson = key_skills;
            }
          } catch (e2) {
            // If parsing fails, use as is if not empty
            if (key_skills.trim()) {
              keySkillsJson = key_skills;
            }
          }
        }
      } else {
        keySkillsJson = JSON.stringify(key_skills);
      }
    }

    // Handle willing_to_relocate - convert to tinyint (0 or 1)
    let willingToRelocateValue = null;
    if (willing_to_relocate !== undefined && willing_to_relocate !== null) {
      if (typeof willing_to_relocate === 'boolean') {
        willingToRelocateValue = willing_to_relocate ? 1 : 0;
      } else if (typeof willing_to_relocate === 'string') {
        const lower = willing_to_relocate.toLowerCase();
        willingToRelocateValue = (lower === 'yes' || lower === 'true' || lower === '1') ? 1 : 0;
      } else {
        willingToRelocateValue = willing_to_relocate ? 1 : 0;
      }
    }

    if (existingProfiles.length > 0) {
      // Update existing profile
      const updateValues = [
        full_name,
        phone !== undefined ? phone : null,
        date_of_birth || null,
        gender || null,
        city || null,
        state || null,
        country || null,
        highest_qualification || null,
        trade_stream || null,
        keySkillsJson,
        skill_level || null,
        experience_type || null,
        job_type || null,
        preferred_work_type || null,
        availability || null,
        expected_salary || null,
        id_proof_available || null,
        preferred_contact_method || null,
        willingToRelocateValue,
        experience_years !== undefined && experience_years !== null ? parseFloat(experience_years) : null,
        resume_path || null,
        linkedin_url || null,
        github_url || null,
        now,
        finalUserId
      ];

      const updateColumns = [
        'full_name', 'phone', 'date_of_birth', 'gender', 'city', 'state', 'country',
        'highest_qualification', 'trade_stream', 'key_skills', 'skill_level',
        'experience_type', 'job_type', 'preferred_work_type', 'availability',
        'expected_salary', 'id_proof_available', 'preferred_contact_method',
        'willing_to_relocate', 'experience_years', 'resume_path',
        'linkedin_url', 'github_url', 'updated_at'
      ];

      const updateResult = await connection.execute(
        `UPDATE candidate_profiles
         SET full_name = ?, phone = ?, date_of_birth = ?, gender = ?, city = ?, state = ?, country = ?,
             highest_qualification = ?, trade_stream = ?, key_skills = ?, skill_level = ?,
             experience_type = ?, job_type = ?, preferred_work_type = ?, availability = ?,
             expected_salary = ?, id_proof_available = ?, preferred_contact_method = ?,
             willing_to_relocate = ?, experience_years = ?, resume_path = ?,
             linkedin_url = ?, github_url = ?, updated_at = ?
         WHERE user_id = ?`,
        updateValues
      );

      await connection.commit();

      const [updatedProfiles] = await connection.execute(
        'SELECT * FROM candidate_profiles WHERE user_id = ?',
        [finalUserId]
      );

      // Parse key_skills JSON for response
      if (updatedProfiles[0] && updatedProfiles[0].key_skills) {
        try {
          updatedProfiles[0].key_skills = JSON.parse(updatedProfiles[0].key_skills);
        } catch (e) {
          // If parsing fails, keep as is
        }
      }

      return res.json({
        success: true,
        message: 'Profile updated successfully',
        user: updatedProfiles[0]
      });
    } else {
      // Create new profile
      const insertValues = [
        finalUserId,
        full_name,
        phone || null,
        date_of_birth || null,
        gender || null,
        city || null,
        state || null,
        country || null,
        highest_qualification || null,
        trade_stream || null,
        keySkillsJson,
        skill_level || null,
        experience_type || null,
        job_type || null,
        preferred_work_type || null,
        availability || null,
        expected_salary || null,
        id_proof_available || null,
        preferred_contact_method || null,
        willingToRelocateValue,
        experience_years !== undefined && experience_years !== null ? parseFloat(experience_years) : null,
        resume_path || null,
        linkedin_url || null,
        github_url || null,
        now,
        now
      ];

      const columnNames = [
        'user_id', 'full_name', 'phone', 'date_of_birth', 'gender', 'city', 'state', 'country',
        'highest_qualification', 'trade_stream', 'key_skills', 'skill_level', 'experience_type',
        'job_type', 'preferred_work_type', 'availability', 'expected_salary', 'id_proof_available',
        'preferred_contact_method', 'willing_to_relocate', 'experience_years', 'resume_path',
        'linkedin_url', 'github_url', 'created_at', 'updated_at'
      ];

      const insertResult = await connection.execute(
        `INSERT INTO candidate_profiles
         (user_id, full_name, phone, date_of_birth, gender, city, state, country,
          highest_qualification, trade_stream, key_skills, skill_level, experience_type,
          job_type, preferred_work_type, availability, expected_salary, id_proof_available,
          preferred_contact_method, willing_to_relocate, experience_years, resume_path,
          linkedin_url, github_url, created_at, updated_at)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
        insertValues
      );

      await connection.commit();

      const [newProfiles] = await connection.execute(
        'SELECT * FROM candidate_profiles WHERE user_id = ?',
        [finalUserId]
      );

      // Parse key_skills JSON for response
      if (newProfiles[0] && newProfiles[0].key_skills) {
        try {
          newProfiles[0].key_skills = JSON.parse(newProfiles[0].key_skills);
        } catch (e) {
          // If parsing fails, keep as is
        }
      }

      return res.status(201).json({
        success: true,
        message: 'Profile created successfully',
        user: newProfiles[0]
      });
    }
  } catch (error) {
    try {
      await connection.rollback();
    } catch (e) {
      // Rollback error
    }
    return res.status(500).json({
      success: false,
      message: 'Internal server error',
      error: process.env.NODE_ENV === 'development' ? error.message : undefined,
      sqlError: process.env.NODE_ENV === 'development' ? error.sqlMessage : undefined,
      details: process.env.NODE_ENV === 'development' ? error.stack : undefined
    });
  } finally {
    if (connection) {
      connection.release();
    }
  }
};

module.exports = candidateProfile;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\recruiter\get-recruiter.js ===
const pool = require("../../config/db");

async function getRecruiterProfile(req, res) {
  try {
    const userId = req.user?.id;
    if (!userId) {
      return res.status(401).json({
        success: false,
        message: "Unauthorized: User not authenticated."
      });
    }

    const [rows] = await pool.execute(
      `SELECT *
       FROM recruiter_profiles
       WHERE user_id = ?`,
      [userId]
    );

    if (rows.length === 0) {
      return res.status(404).json({
        success: false,
        message: "Recruiter profile not found."
      });
    }

    // Add verified field for frontend compatibility
    const recruiterData = rows[0];
    recruiterData.verified = recruiterData.status === 'approved' ? 1 : 0;

    return res.json({
      success: true,
      recruiter: recruiterData
    });

  } catch (err) {
    console.error("GET recruiter profile error:", err);
    return res.status(500).json({
      success: false,
      message: "Internal server error."
    });
  }
}

module.exports = getRecruiterProfile;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\profile\recruiter\recruiter-put.js ===
const pool = require('../../config/db');
const ALLOWED_COMPANY_TYPES = ['company', 'consultancy', 'startup'];
const ALLOWED_STATUSES = ['pending', 'approved', 'rejected'];

const recruiterProfile = async (req, res) => {
  let connection;
  try {
    connection = await pool.getConnection();

    const authUserId = req.user?.id;
    const {
      user_id,
      company_name,
      company_website,
      company_type,
      address_line1,
      address_line2,
      city,
      state,
      country,
      pincode,
      verified,  // Keep verified for frontend (0 or 1)
      verification_notes
    } = req.body;

    const finalUserId = authUserId || user_id;
    if (!finalUserId) {
      return res.status(401).json({
        success: false,
        message: 'Unauthorized: missing authenticated user.'
      });
    }

    if (!company_name) {
      return res.status(400).json({
        success: false,
        message: 'company_name is required.'
      });
    }

    if (company_type && !ALLOWED_COMPANY_TYPES.includes(company_type)) {
      return res.status(400).json({
        success: false,
        message: `company_type must be one of: ${ALLOWED_COMPANY_TYPES.join(', ')}.`
      });
    }

    // Convert verified (0/1) to status
    let statusValue = null;
    if (typeof verified !== 'undefined' && verified !== null) {
      // Convert verified number to status string
      if (verified === 1 || verified === '1' || verified === true) {
        statusValue = 'approved';
      } else if (verified === 0 || verified === '0' || verified === false) {
        statusValue = 'pending';
      }
    }

    await connection.beginTransaction();

    const [existing] = await connection.execute(
      'SELECT user_id FROM recruiter_profiles WHERE user_id = ?',
      [finalUserId]
    );

    const now = new Date();

    if (existing.length > 0) {
      // Update existing profile
      await connection.execute(
        `UPDATE recruiter_profiles
         SET company_name = ?, company_website = ?, company_type = ?, 
             address_line1 = ?, address_line2 = ?, city = ?, state = ?, country = ?, pincode = ?,
             status = COALESCE(?, status), verification_notes = ?, updated_at = ?
         WHERE user_id = ?`,
        [
          company_name,
          company_website || null,
          company_type || null,
          address_line1 || null,
          address_line2 || null,
          city || null,
          state || null,
          country || null,
          pincode || null,
          statusValue || null,
          verification_notes || null,
          now,
          finalUserId
        ]
      );

      await connection.commit();

      const [updatedRows] = await connection.execute(
        'SELECT * FROM recruiter_profiles WHERE user_id = ?',
        [finalUserId]
      );

      // Add verified field for frontend compatibility
      const recruiterData = updatedRows[0];
      if (recruiterData) {
        recruiterData.verified = recruiterData.status === 'approved' ? 1 : 0;
      }

      return res.json({
        success: true,
        message: 'Recruiter profile updated successfully',
        recruiter: recruiterData
      });
    } else {
      // Create new recruiter profile
      const defaultStatus = statusValue || 'pending';
      
      await connection.execute(
        `INSERT INTO recruiter_profiles
         (user_id, company_name, company_website, company_type,
          address_line1, address_line2, city, state, country, pincode,
          status, verification_notes, created_at, updated_at)
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,
        [
          finalUserId,
          company_name,
          company_website || null,
          company_type || null,
          address_line1 || null,
          address_line2 || null,
          city || null,
          state || null,
          country || null,
          pincode || null,
          defaultStatus,
          verification_notes || null,
          now,
          now
        ]
      );

      await connection.commit();

      const [newRows] = await connection.execute(
        'SELECT * FROM recruiter_profiles WHERE user_id = ?',
        [finalUserId]
      );

      // Add verified field for frontend compatibility
      const recruiterData = newRows[0];
      if (recruiterData) {
        recruiterData.verified = recruiterData.status === 'approved' ? 1 : 0;
      }

      return res.status(201).json({
        success: true,
        message: 'Recruiter profile created successfully',
        recruiter: recruiterData
      });
    }
  } catch (err) {
    if (connection) {
      try { await connection.rollback(); } catch (e) { /* ignore rollback error */ }
    }
    console.error('Recruiter profile handler error:', err);
    return res.status(500).json({
      success: false,
      message: 'Internal server error'
    });
  } finally {
    if (connection) connection.release();
  }
};

module.exports = recruiterProfile;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\recruiter\hire-jobs\create-job.js ===
const multer = require("multer");
const path = require("path");
const fs = require("fs");
const pool = require("../../config/db");

// ensure uploads dir exists
const UPLOAD_DIR = path.join(__dirname, "..", "..", "..", "uploads", "logos");
fs.mkdirSync(UPLOAD_DIR, { recursive: true });

// multer storage
const storage = multer.diskStorage({
  destination: (req, file, cb) => cb(null, UPLOAD_DIR),
  filename: (req, file, cb) => {
    const ext = path.extname(file.originalname);
    const name = `${Date.now()}-${Math.round(Math.random() * 1e9)}${ext}`;
    cb(null, name);
  },
});
const upload = multer({
  storage,
  limits: { fileSize: 5 * 1024 * 1024 }, // 5MB limit
  fileFilter: (req, file, cb) => {
    if (!file.mimetype.startsWith("image/")) return cb(new Error("Only image files allowed"), false);
    cb(null, true);
  },
});

async function createJobHandler(req, res) {
  // Apply multer middleware for single file upload
  const uploadMiddleware = upload.single("logo");
  uploadMiddleware(req, res, async (err) => {
    if (err) {
      return res.status(400).json({ ok: false, message: err.message });
    }
    try {
      // Get recruiter_id from authenticated user - use req.user.id from your auth middleware
      const recruiterId = req.user?.id;

      console.log("User object:", req.user); // Debug log
      console.log("Recruiter ID:", recruiterId); // Debug log

      if (!recruiterId) {
        return res.status(401).json({ ok: false, message: "Unauthorized - Please log in to post jobs" });
      }

      // fields from your frontend form (camelCase)
      const {
        title = "",
        company = "",
        jobType = "Full-time",
        workMode = "Office",
        city = "",
        locality = "",
        minExperience = null,
        maxExperience = null,
        minSalary = null,
        maxSalary = null,
        vacancies = "1",
        description = "",
        interviewAddress = "",
        contactEmail = "",
        contactPhone = "",
        skills = "", // Added skills here
      } = req.body;

      // simple validation
      const errors = [];
      if (!title.trim()) errors.push("title is required");
      if (!company.trim()) errors.push("company is required");
      if (!city.trim()) errors.push("city is required");
      if (!description.trim()) errors.push("description is required");
      if (!contactEmail.trim() && !contactPhone.trim()) errors.push("provide email or phone");

      if (errors.length) return res.status(400).json({ ok: false, errors });

      // prepare values to insert
      const logoPath = req.file ? path.posix.join("uploads", "logos", req.file.filename) : null;

      // convert numeric fields carefully
      const minExpNum = minExperience === null || minExperience === "" ? null : Number(minExperience);
      const maxExpNum = maxExperience === null || maxExperience === "" ? null : Number(maxExperience);
      const minSalaryNum = minSalary === null || minSalary === "" ? null : Number(minSalary);
      const maxSalaryNum = maxSalary === null || maxSalary === "" ? null : Number(maxSalary);
      const vacanciesNum = vacancies ? Math.max(1, parseInt(vacancies, 10) || 1) : 1;

      // Validate work_mode
      const validWorkModes = ['Office', 'Remote', 'Hybrid'];
      const workModeValue = validWorkModes.includes(workMode) ? workMode : 'Office';

      // Insert into DB (use placeholders)
      // Set status to 'pending' by default - jobs need admin approval
      const sql = `
        INSERT INTO jobs
          (title, company, job_type, work_mode, city, locality, min_experience, max_experience, min_salary, max_salary, vacancies, description, interview_address, contact_email, contact_phone, logo_path, recruiter_id, status, posted_at)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'pending', NOW())
      `;

      const params = [
        title,
        company,
        jobType,
        workModeValue,
        city,
        locality || null,
        minExpNum,
        maxExpNum,
        minSalaryNum,
        maxSalaryNum,
        vacanciesNum,
        description,
        interviewAddress || null,
        contactEmail || null,
        contactPhone || null,
        logoPath,
        recruiterId,
      ];

      const [result] = await pool.query(sql, params);
      const jobId = result.insertId;

      // Insert skills as tags if provided
      if (skills && typeof skills === 'string' && skills.trim()) {
        try {
          const skillList = skills.split(',').map(s => s.trim()).filter(Boolean);
          for (const skillName of skillList) {
            // Insert tag if not exists, get its ID
            const [tagRows] = await pool.query(
              `INSERT INTO job_tags (name) VALUES (?) ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id)`,
              [skillName]
            );
            const tagId = tagRows.insertId || (await pool.query(`SELECT id FROM job_tags WHERE name = ?`, [skillName]))[0][0].id;
            // Link job to tag
            await pool.query(`INSERT IGNORE INTO job_tag_map (job_id, tag_id) VALUES (?, ?)`, [jobId, tagId]);
          }
        } catch (e) {
          // if tag insertion fails, still return success (job was created)
          console.error('Error saving skills as tags:', e.message);
        }
      }

      return res.status(201).json({
        ok: true,
        id: jobId,
        message: "Job created successfully",
        logoPath,
      });
    } catch (err) {
      console.error("createJob error:", err);
      return res.status(500).json({ ok: false, message: err.message || "Internal Server Error" });
    }
  });
}

module.exports = createJobHandler;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\recruiter\hire-jobs\getJobApplicants.js ===
const pool = require("../../config/db");

async function getJobApplicants(req, res) {
  try {
    const recruiterId = req.user?.id;
    const jobId = req.params.jobId;

    if (!recruiterId) {
      return res.status(401).json({ ok: false, message: "Unauthorized" });
    }

    if (!jobId) {
      return res.status(400).json({ ok: false, message: "Job ID is required" });
    }

    // First verify the job belongs to this recruiter
    const [jobRows] = await pool.query(
      'SELECT id FROM jobs WHERE id = ? AND recruiter_id = ?',
      [jobId, recruiterId]
    );

    if (jobRows.length === 0) {
      return res.status(404).json({ ok: false, message: "Job not found or access denied" });
    }

    // Get applicants for this job
    const sql = `
      SELECT 
        ja.id as application_id,
        ja.status,
        ja.cover_letter,
        ja.resume_path,
        ja.applied_at,
        ja.updated_at,
        u.id as user_id,
        u.email,
        u.name,
        up.full_name,
        up.phone,
        up.city,
        up.state,
        up.country,
        up.experience_years,
        up.highest_education,
        up.linkedin_url,
        up.portfolio_url,
        up.availability
      FROM job_applications ja
      INNER JOIN users u ON ja.user_id = u.id
      LEFT JOIN candidate_profiles up ON u.id = up.user_id
      WHERE ja.job_id = ?
      ORDER BY ja.applied_at DESC
    `;

    const [applicants] = await pool.query(sql, [jobId]);

    const result = applicants.map(app => ({
      applicationId: app.application_id,
      status: app.status,
      coverLetter: app.cover_letter,
      resumePath: app.resume_path,
      appliedAt: app.applied_at,
      updatedAt: app.updated_at,
      user: {
        id: app.user_id,
        email: app.email,
        name: app.name,
        fullName: app.full_name,
        phone: app.phone,
        location: `${app.city || ''}${app.city && app.state ? ', ' : ''}${app.state || ''}`,
        country: app.country,
        experienceYears: app.experience_years,
        highestEducation: app.highest_education,
        linkedinUrl: app.linkedin_url,
        portfolioUrl: app.portfolio_url,
        availability: app.availability
      }
    }));

    res.json({ ok: true, applicants: result });
  } catch (err) {
    console.error('GET /api/recruiter/jobs/:jobId/applicants error:', err);
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  }
}

module.exports = getJobApplicants;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\recruiter\hire-jobs\getRecruiterJobs.js ===
const pool = require("../../config/db");

function parseSkills(skills) {
  if (!skills) return [];
  return skills.split(',').map(s => s.trim()).filter(Boolean);
}

async function getRecruiterJobs(req, res) {
  try {
    const recruiterId = req.user?.id;

    if (!recruiterId) {
      return res.status(401).json({ ok: false, message: "Unauthorized" });
    }

    const sql = `
      SELECT
        id,
        title,
        company,
        job_type,
        work_mode,
        city,
        locality,
        min_experience,
        max_experience,
        min_salary,
        max_salary,
        vacancies,
        description,
        logo_path,
        contact_email,
        contact_phone,
        interview_address,
        status,
        posted_at,
        created_at
      FROM jobs
      WHERE recruiter_id = ?
      ORDER BY created_at DESC
    `;

    const [rows] = await pool.query(sql, [recruiterId]);

    // Fetch tags from normalized tables
    let tagMap = {};
    if (Array.isArray(rows) && rows.length) {
      try {
        const ids = rows.map((r) => r.id);
        if (ids.length > 0) {
          const placeholders = ids.map(() => '?').join(',');
          const tagSql = `SELECT jtm.job_id, jt.name as tag FROM job_tag_map jtm JOIN job_tags jt ON jt.id = jtm.tag_id WHERE jtm.job_id IN (${placeholders})`;
          const [tagRows] = await pool.query(tagSql, ids);
          tagRows.forEach((tr) => {
            tagMap[tr.job_id] = tagMap[tr.job_id] || [];
            tagMap[tr.job_id].push(tr.tag);
          });
        }
      } catch (e) {
        console.error('Error fetching tags:', e.message);
      }
    }

    // Helper function to format salary range (monthly)
    const formatSalary = (minSalary, maxSalary) => {
      if (minSalary == null && maxSalary == null) return 'Not specified';
      if (minSalary != null && maxSalary != null) {
        return `${minSalary}-${maxSalary} /Month`;
      }
      if (minSalary != null) return `${minSalary}+ /Month`;
      if (maxSalary != null) return `Up to ${maxSalary} /Month`;
      return 'Not specified';
    };

    const jobs = rows.map(r => {
      let experience = 'Not specified';
      if (r.min_experience == null && r.max_experience == null) experience = 'Fresher';
      else if (r.min_experience != null && r.max_experience == null) experience = `${r.min_experience}+ yrs`;
      else if (r.min_experience == null && r.max_experience != null) experience = `Up to ${r.max_experience} yrs`;
      else experience = `${r.min_experience}-${r.max_experience} yrs`;

      // Build location string safely handling null/undefined values
      let location = '';
      if (r.city) {
        location = r.city;
        if (r.locality) {
          location += `, ${r.locality}`;
        }
      } else if (r.locality) {
        location = r.locality;
      } else {
        location = 'Not specified';
      }

      return {
        id: r.id,
        title: r.title,
        company: r.company,
        type: r.job_type || 'Full-time',
        workMode: r.work_mode || 'Office',
        location,
        tags: tagMap[r.id] || [],
        salary: formatSalary(r.min_salary, r.max_salary),
        minSalary: r.min_salary,
        maxSalary: r.max_salary,
        vacancies: r.vacancies,
        description: r.description,
        logoPath: r.logo_path || null,
        contactEmail: r.contact_email,
        contactPhone: r.contact_phone,
        interviewAddress: r.interview_address,
        status: r.status || 'pending',
        postedAt: r.posted_at,
        createdAt: r.created_at,
        experience,
      };
    });

    res.json({ ok: true, jobs });
  } catch (err) {
    console.error('GET /api/recruiter/jobs error:', err);
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  }
}

module.exports = getRecruiterJobs;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\recruiter\hire-jobs\getRecruiterJobStats.js ===
const pool = require("../../config/db");

async function getRecruiterJobStats(req, res) {
  try {
    const recruiterId = req.user?.id;
    
    if (!recruiterId) {
      return res.status(401).json({ ok: false, message: "Unauthorized" });
    }

    // Get jobs with application counts
    const sql = `
      SELECT 
        j.id,
        j.title,
        j.company,
        j.job_type,
        j.city,
        j.locality,
        j.vacancies,
        j.created_at,
        COUNT(ja.id) as application_count
      FROM jobs j
      LEFT JOIN job_applications ja ON j.id = ja.job_id
      WHERE j.recruiter_id = ?
      GROUP BY j.id
      ORDER BY j.created_at DESC
    `;
    
    const [rows] = await pool.query(sql, [recruiterId]);

    const jobs = rows.map(job => ({
      id: job.id,
      title: job.title,
      company: job.company,
      type: job.job_type,
      location: job.city + (job.locality ? `, ${job.locality}` : ''),
      vacancies: job.vacancies,
      applicationCount: job.application_count,
      createdAt: job.created_at
    }));

    res.json({ ok: true, jobs });
  } catch (err) {
    console.error('GET /api/recruiter/job-stats error:', err);
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  }
}

module.exports = getRecruiterJobStats;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\api\recruiter\hire-jobs\updateApplicationStatus.js ===
const pool = require("../../config/db");

async function updateApplicationStatus(req, res) {
  const connection = await pool.getConnection();

  try {
    const recruiterId = req.user?.id;
    const { applicationId } = req.params;
    const { status, interviewDate, interviewTime, interviewMessage } = req.body;

    if (!recruiterId) {
      return res.status(401).json({ ok: false, message: "Unauthorized" });
    }

    if (!applicationId) {
      return res.status(400).json({ ok: false, message: "Application ID is required" });
    }

    // Validate status
    const validStatuses = ['applied', 'shortlisted', 'interview_called', 'closed'];
    if (!status || !validStatuses.includes(status)) {
      return res.status(400).json({
        ok: false,
        message: `Invalid status. Must be one of: ${validStatuses.join(', ')}`
      });
    }

    // Verify the application belongs to a job owned by this recruiter
    const [applicationRows] = await connection.query(
      `SELECT ja.id, ja.job_id, j.recruiter_id 
       FROM job_applications ja
       INNER JOIN jobs j ON ja.job_id = j.id
       WHERE ja.id = ? AND j.recruiter_id = ?`,
      [applicationId, recruiterId]
    );

    if (applicationRows.length === 0) {
      return res.status(404).json({
        ok: false,
        message: "Application not found or access denied"
      });
    }

    // If status is interview_called, validate interview details
    if (status === 'interview_called') {
      if (!interviewDate || !interviewTime) {
        return res.status(400).json({
          ok: false,
          message: "Interview date and time are required when marking as interview called"
        });
      }
    }

    // Update application status
    await connection.beginTransaction();

    await connection.query(
      'UPDATE job_applications SET status = ?, updated_at = NOW() WHERE id = ?',
      [status, applicationId]
    );

    // Store interview details if provided (you might want to create a separate table for this)
    // For now, we'll just update the status. Interview details can be stored in cover_letter field
    // or a separate interview_details table in the future.

    await connection.commit();

    res.json({
      ok: true,
      message: "Application status updated successfully",
      status: status
    });

  } catch (err) {
    if (connection) {
      await connection.rollback();
    }
    console.error('UPDATE /api/recruiter/jobs/applications/:applicationId/status error:', err);
    res.status(500).json({ ok: false, message: 'Internal Server Error' });
  } finally {
    if (connection) {
      connection.release();
    }
  }
}

module.exports = updateApplicationStatus;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\auth\admin\index.js ===
const express = require('express');
const router = express.Router();
const adminRegister = require('../../../api/profile/admin/admin-register');
const adminLogin = require('../../../api/profile/admin/admin-login');
const adminLogout = require('../../../api/profile/admin/admin-logout');
const { requireAdminAuth } = require('../../../middlewares/adminAuth');
const getAdminUsers = require('../../../api/profile/admin/admin-users');
const getAdminRecruiters = require('../../../api/profile/admin/admin-recruiters');
const getAdminJobs = require('../../../api/profile/admin/admin-jobs');
const verifyRecruiter = require('../../../api/profile/admin/admin-verify-recruiter');
const updateJobStatus = require('../../../api/profile/admin/admin-update-job-status');

// Admin Register
router.post('/register', adminRegister);

// Admin Sign In
router.post('/login', adminLogin);

// Admin Logout
router.post('/logout', adminLogout);
router.get('/users', requireAdminAuth, getAdminUsers);
router.get('/recruiters', requireAdminAuth, getAdminRecruiters);
router.get('/jobs', requireAdminAuth, getAdminJobs);
router.put('/recruiters/:recruiterId/verify', requireAdminAuth, verifyRecruiter);
router.put('/jobs/:jobId/status', requireAdminAuth, updateJobStatus);



module.exports = router;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\auth\candidate\index.js ===
const express = require('express');
const router = express.Router();
const logout = require('../../../api/auth/logout');
const updateProfile = require('../../../api/auth/update');
/**
 * Import Auth Handlers
 * ---------------------
 * These handlers contain the actual logic for signup and login.
 * They live in: src/api/auth/users/
 *
 * signUp  â Creates new user, hashes password, saves to DB, sets cookie.
 * signIn  â Validates credentials, checks DB, issues JWT cookie.
 */
const signUp = require('../../../api/auth/sign-up');
const signIn = require('../../../api/auth/sign-in');
const googleAuth = require('../../../api/auth/google-auth');

/**
 * Auth Middleware
 * ----------------
 * requireAuth  â Ensures that the incoming request has a valid JWT cookie.
 * authCheck    â Returns the decoded user data stored in req.user.
 */
const { requireAuth, authCheck } = require('../../../middlewares/auth');

/**
 * Route Mount Point
 * ------------------
 * This file is mounted at /api/auth in routes/router.js:
 * 
 *     app.use('/api/auth', index)
 *
 * So the final endpoints become:
 *   POST   /api/auth/signup
 *   POST   /api/auth/login
 *   GET    /api/auth/session
 *   PUT    /api/auth/me (update profile)
 */

// Create new user
router.post('/signup', signUp);

// Login user and issue JWT cookie
router.post('/login', signIn);

// Google OAuth authentication
router.post('/google', googleAuth);

// Get current session (validates cookie and returns authenticated user)
router.get('/session', requireAuth, authCheck);

// Update profile (authenticated)
router.put('/me', requireAuth, updateProfile);
// Logout user by clearing the cookie
router.post('/logout', logout);

module.exports = router;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\auth\recruiter\hire-jobs\create-jobs\index.js ===
const express = require("express");
const router = express.Router();

const createJob = require("../../../../../api/recruiter/hire-jobs/create-job");
// POST /recruiter/hire-jobs - Create a new job posting
router.post("/", createJob);

module.exports = router;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\auth\recruiter\recruter-premier\index.js ===

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\jobs\index.js ===
const express = require("express");
const router = express.Router();

//  here are Import job controllers
const getjobs = require("../../api/jobs/get-jobs");
const getjobdetails = require("../../api/jobs/get-jobdetails");
const getFilters = require("../../api/jobs/get-filters");
const { postApplication, upload } = require("../../api/jobs/applications");
const getAppliedJobs = require("../../api/jobs/getapplied");
const removeSavedJob = require("../../api/jobs/savejobs/removeSavedJob");
const checkSavedJob = require("../../api/jobs/savejobs/checkSavedJob");
const saveJob = require("../../api/jobs/savejobs/savedJobs");
const getSavedJobs = require("../../api/jobs/savejobs/getSavedJobs");
const { requireAuth } = require("../../middlewares/auth");

// Apply auth middleware to protected routes
router.get("/applied-jobs", requireAuth, getAppliedJobs);
router.post("/apply", requireAuth, upload.single("resume"), postApplication);

// Saved jobs routes
router.post("/save/:job_id", requireAuth, saveJob);
router.delete("/save/:job_id", requireAuth, removeSavedJob);
router.get("/save/:job_id", requireAuth, checkSavedJob);
router.get("/saved-jobs", requireAuth, getSavedJobs);

// Public routes
router.get("/", getjobs);
router.get("/filters", getFilters);
router.get("/:id", getjobdetails);

module.exports = router;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\profile\candidate\index.js ===
const express = require('express');
const router = express.Router();
const user = require("../../../api/profile/candidate/candidate-put");
const getuser = require("../../../api/profile/candidate/candidate-get");
const { requireAuth } = require('../../../middlewares/auth');

// Ensure JSON payloads are parsed for profile routes
router.use(express.json());
router.get('/user', requireAuth, getuser);
router.put('/user', requireAuth, user);
module.exports = router;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\profile\recruiter\index.js ===
const express = require('express');
const router = express.Router();
const { requireAuth } = require('../../../middlewares/auth');
const recruiterProfile = require("../../../api/profile/recruiter/recruiter-put");
const getRecruiterProfile = require("../../../api/profile/recruiter/get-recruiter");
// GET /recruiter - Get recruiter profile
router.use(express.json());
router.get('/recruiter', requireAuth, getRecruiterProfile);
// PUT /recruiter - Update recruiter profile
router.use(express.json());
router.put('/recruiter', requireAuth, recruiterProfile);
module.exports = router;
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\controllers\recruiter\hire-jobs\index.js ===
const express = require('express');
const router = express.Router();
const { requireAuth } = require('../../../middlewares/auth');
const getRecruiterJobs = require('../../../api/recruiter/hire-jobs/getRecruiterJobs');
const getRecruiterJobStats = require("../../../api/recruiter/hire-jobs/getRecruiterJobStats");
const getJobApplicants = require("../../../api/recruiter/hire-jobs/getJobApplicants");
const updateApplicationStatus = require("../../../api/recruiter/hire-jobs/updateApplicationStatus");
const createJob = require('../../../api/recruiter/hire-jobs/create-job');
// Apply authentication middleware
router.use(requireAuth);
// POST /api/recruiter/jobs/create
router.post('/create', createJob);
// GET /api/recruiter/jobs
router.get('/', getRecruiterJobs);
// GET /api/recruiter/jobs/stats
router.get('/stats', getRecruiterJobStats);
// PUT /api/recruiter/jobs/applications/:applicationId/status (must be before /:jobId route)
router.put('/applications/:applicationId/status', updateApplicationStatus);
// GET /api/recruiter/jobs/:jobId/applicants
router.get('/:jobId/applicants', getJobApplicants);
// GET /api/recruiter/jobs/stats/overview


module.exports = router;

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\middlewares\adminAuth.js ===
const jwt = require('jsonwebtoken');

function requireAdminAuth(req, res, next) {
  try {
    const token = req.cookies?.token;

    if (!token) {
      return res.status(401).json({ message: 'Unauthorized: No token provided' });
    }

    const payload = jwt.verify(token, process.env.JWT_SECRET);

    // Check if user is admin
    if (payload.role !== 'admin') {
      return res.status(403).json({ message: 'Forbidden: Admin access required' });
    }

    req.user = {
      id: payload.sub,
      email: payload.email,
      role: payload.role,
      full_name: payload.full_name,
      loginAt: payload.iat ? new Date(payload.iat * 1000).toISOString() : undefined,
    };

    return next();
  } catch (err) {
    return res.status(401).json({ message: 'Unauthorized: Invalid token' });
  }
}

module.exports = { requireAdminAuth };
--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\middlewares\auth.js ===

const jwt = require('jsonwebtoken');
const pool = require('../api/config/db');


function requireAuth(req, res, next) {
  try {
    // Extract token from cookies
    const token = req.cookies?.token;

    // If no token found, block access
    if (!token) return res.status(401).json({ message: 'Unauthorized' });

    // Verify token and extract payload
    const payload = jwt.verify(token, process.env.JWT_SECRET);

    // Attach essential user details to req.user for use in next handlers
    // Include token issuance time (iat) as loginAt so frontend can show login time
    req.user = {
      id: payload.sub,
      email: payload.email,
      role: payload.role,
      full_name: payload.full_name, // Include full_name if present (for admin tokens)
      loginAt: payload.iat ? new Date(payload.iat * 1000).toISOString() : undefined,
    };

    return next(); // Move to the next middleware/controller
  } catch (err) {
    // Token expired or invalid
    return res.status(401).json({ message: 'Unauthorized' });
  }
}

/**
 * Handler: authCheck
 * -------------------
 * Purpose:
 *   - Return the currently authenticated user's data.
 *   - This handler must run after requireAuth middleware.
 *
 * Flow:
 *   1. Check if req.user exists.
 *   2. If not â return 401.
 *   3. Fetch complete user data from database.
 *   4. Send user object in response.
 */
async function authCheck(req, res) {
  if (!req.user) return res.status(401).json({ message: 'Unauthorized' });

  try {
    // Get DB connection from pool
    const conn = await pool.getConnection();
    try {
      let userRow;

      // Check if user is admin - admins are stored in a separate table
      if (req.user.role === 'admin') {
        // Query admins table
        const [adminRows] = await conn.execute(
          'SELECT admin_id, email, full_name, phone FROM admins WHERE admin_id = ? LIMIT 1',
          [req.user.id]
        );

        if (!adminRows.length) {
          return res.status(404).json({ message: 'Admin not found' });
        }

        const admin = adminRows[0];
        // Map admin fields to user format for consistency
        // Note: admins table doesn't have created_at or last_login columns
        userRow = {
          id: admin.admin_id,
          email: admin.email,
          role: 'admin',
          name: admin.full_name,
          full_name: admin.full_name,
          created_at: null, // Admins table doesn't have created_at column
          last_login: null // Admins table doesn't have last_login column
        };
      } else {
        // Regular users - query users table
        // First, check what columns exist in the users table
        const [columns] = await conn.query('SHOW COLUMNS FROM users');
        const columnNames = columns.map(col => col.Field);

        // Build SELECT query with only existing columns
        const selectFields = ['id', 'email', 'role'];
        if (columnNames.includes('name')) selectFields.push('name');
        if (columnNames.includes('created_at')) selectFields.push('created_at');
        if (columnNames.includes('last_login')) selectFields.push('last_login');

        const selectQuery = `SELECT ${selectFields.join(', ')} FROM users WHERE id = ? LIMIT 1`;

        // Fetch complete user data from database
        const [rows] = await conn.execute(selectQuery, [req.user.id]);

        if (!rows.length) {
          return res.status(404).json({ message: 'User not found' });
        }

        userRow = rows[0];
      }

      // Convert MySQL date objects to ISO strings for proper JSON serialization
      const formatDate = (dateValue) => {
        if (!dateValue) return null;
        // If it's already a string (ISO format or MySQL datetime string), return it
        if (typeof dateValue === 'string') {
          // If it's already in ISO format, return as is
          if (dateValue.includes('T') || dateValue.includes('Z')) {
            return dateValue;
          }
          // Otherwise, try to parse and convert to ISO
          const parsed = new Date(dateValue);
          return isNaN(parsed.getTime()) ? null : parsed.toISOString();
        }
        // If it's a Date object, convert to ISO string
        if (dateValue instanceof Date) {
          return isNaN(dateValue.getTime()) ? null : dateValue.toISOString();
        }
        // If it's a MySQL date object or other format, try to convert
        try {
          const parsed = new Date(dateValue);
          return isNaN(parsed.getTime()) ? null : parsed.toISOString();
        } catch (e) {
          return null;
        }
      };

      // Prepare user object with all required fields
      const user = {
        id: userRow.id,
        name: userRow.name || null,
        username: userRow.email, // Email is used as username
        email: userRow.email,
        role: userRow.role,
        created_at: formatDate(userRow.created_at),
        createdAt: formatDate(userRow.created_at), // Alias for compatibility
        last_login: formatDate(userRow.last_login),
        lastLogin: formatDate(userRow.last_login), // Alias for compatibility
        loginAt: formatDate(userRow.last_login) || req.user.loginAt, // Use last_login from DB, fallback to token iat
        full_name: userRow.name, // Alias for compatibility
        fullname: userRow.name, // Alias for compatibility
      };

      // Send user info to frontend
      return res.json({ user });
    } finally {
      conn.release();
    }
  } catch (err) {
    console.error('Error fetching user data:', err);
    return res.status(500).json({ message: 'Internal server error' });
  }
}

module.exports = { requireAuth, authCheck };

--- END OF FILE ---

=== FILE: C:\Users\CreativeStudio24\Desktop\Job-spark\server\src\routes\routes.js ===
const express = require('express');
const router = express.Router();

// Import all route modules
const recruiterJobRoutes = require('../controllers/recruiter/hire-jobs/index');
const jobsRouter = require('../controllers/jobs/index'); // This should point to jobs.js router
const profileRoutes = require("../controllers/profile/candidate/index");
const authRoutes = require('../controllers/auth/candidate/index');
const recruiter_profiles = require("../controllers/profile/recruiter/index");
const  requireAdminAuth  = require('../controllers/auth/admin/index');

// Auth routes
router.use('/auth', authRoutes);
// Admin Auth routes
router.use('/admin/auth', requireAdminAuth);

// Recruiter jobs
router.use('/recruiter/jobs', recruiterJobRoutes);

// Jobs routes - FIXED: This mounts at /api/jobs
router.use('/jobs', jobsRouter);

// Profile routes
router.use('/profile', profileRoutes);

// Recruiter Profiles - FIXED: Changed to avoid conflict
router.use('/recruiter-profile', recruiter_profiles);

module.exports = router;
--- END OF FILE ---


=== END OF MERGE (Total files: 106) ===
